(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{158:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return a})),n.d(e,"rightToc",(function(){return b})),n.d(e,"default",(function(){return i}));n(0);var r=n(193);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var n,r,c=function(t,e){if(null==t)return{};var n,r,c={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(c[n]=t[n]);return c}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(c[n]=t[n])}return c}var a={id:"https",title:"HTTPS",sidebar_label:"HTTPS"},b=[{value:"什么是HTTPS？",id:"什么是https？",children:[]},{value:"对称加密",id:"对称加密",children:[]},{value:"非对称加密",id:"非对称加密",children:[]},{value:"CA 证书",id:"ca-证书",children:[]},{value:"HTTP/2 与 HTTPS",id:"http2-与-https",children:[]}],p={rightToc:b},u="wrapper";function i(t){var e=t.components,n=l(t,["components"]);return Object(r.b)(u,c({},p,n,{components:e,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"什么是https？"},"什么是HTTPS？"),Object(r.b)("p",null,"为了解决 HTTP 协议的以上缺点，在上世纪90年代中期，由网景（NetScape）公司设计了 SSL 协议。SSL 是“Secure Sockets Layer”的缩写，中文叫做“安全套接层”。"),Object(r.b)("p",null,"到了1999年，SSL 因为应用广泛，已经成为互联网上的事实标准。IETF 就在那年把 SSL 标准化。",Object(r.b)("strong",{parentName:"p"},"标准化之后的名称改为 TLS（是“Transport Layer Security”的缩写），中文叫做“传输层安全协议”"),"。"),Object(r.b)("p",null,"很多相关的文章都把这两者并列称呼（SSL/TLS），因为这两者可以视作同一个东西的不同阶段。"),Object(r.b)("p",null,"互联网加密协议历史："),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"1994年，NetScape 公司设计了 SSL 协议的1.0版，但是未发布。"),Object(r.b)("li",{parentName:"ul"},"1995年，NetScape 公司发布 SSL 2.0版，很快发现有严重漏洞。"),Object(r.b)("li",{parentName:"ul"},"1996年，SSL 3.0 版问世，得到大规模应用。"),Object(r.b)("li",{parentName:"ul"},"1999年，互联网标准化组织 ISOC 接替 NetScape 公司，发布了 SSL 的升级版 TLS 1.0 版。"),Object(r.b)("li",{parentName:"ul"},"2006年和2008年，TLS 进行了两次升级，分别为 TLS 1.1 版和 TLS 1.2 版。最新的变动是2011年 TLS 1.2 的修订版。")),Object(r.b)("p",null,"目前，应用最广泛的是TLS 1.0，接下来是SSL 3.0。但是，主流浏览器都已经实现了TLS 1.2的支持。TLS 1.0通常被标示为SSL 3.1，TLS 1.1为SSL 3.2，TLS 1.2为SSL 3.3。"),Object(r.b)("p",null,"所谓的 HTTPS 其实是“HTTP over SSL”或“HTTP over TLS”，它是 HTTP 与 SSL/TSL 的结合使用而已。另外HTTPS默认",Object(r.b)("strong",{parentName:"p"},"443端口"),"。"),Object(r.b)("img",{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/IetTiz.png",width:"330",height:"210"}),Object(r.b)("p",null,"原先是应用层将数据直接给到TCP进行传输，现在改成应用层将数据给到TLS/SSL，将数据加密后，再给到TCP进行传输。"),Object(r.b)("p",null,"大致如图所示:\n",Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/SkBt0g.png",alt:null}))),Object(r.b)("p",null,"就是这么回事。将数据加密后再传输，而不是任由数据在复杂而又充满危险的网络上明文裸奔，在很大程度上确保了数据的安全。这样的话，即使数据被中间节点截获，坏人也看不懂。"),Object(r.b)("p",null,"看下面内容之前可以先看看这篇文章，先压压惊：HTTPS 的故事-前端外刊评论"),Object(r.b)("p",null,"最原始的明文传输消息：\n",Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/xiXhrq.png",alt:null}))),Object(r.b)("p",null,"TSL主要内容：“加密”和“解密”"),Object(r.b)("p",null,"通俗而言，你可以把“加密”和“解密”理解为某种【互逆的】数学运算。就好比“加法和减法”互为逆运算、“乘法和除法”互为逆运算。"),Object(r.b)("p",null,"“加密”的过程，就是把“明文”变成“密文”的过程；反之，“解密”的过程，就是把“密文”变为“明文”。在这两个过程中，都需要一个关键的东西——叫做“密钥”——来参与数学运算。"),Object(r.b)("p",null,"公钥：保险箱\n私钥：打开保险箱的钥匙"),Object(r.b)("h2",{id:"对称加密"},"对称加密"),Object(r.b)("p",null,Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/PxDRGS.png",alt:null}))),Object(r.b)("p",null,"所谓的“对称加密技术”，意思就是说：“加密”和“解密”使用【相同的】密钥。这个比较好理解。就好比你用 7zip 或 WinRAR 创建一个带密码（口令）的加密压缩包。当你下次要把这个压缩文件解开的时候，你需要输入【同样的】密码。在这个例子中，密码/口令就如同刚才说的“密钥”。"),Object(r.b)("p",null,"缺点：如果使用对称加密，客户端和服务端都需要保存大量的加密算法和对应的密钥，管理成本巨大且容易泄漏。"),Object(r.b)("h2",{id:"非对称加密"},"非对称加密"),Object(r.b)("p",null,Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/xJJupw.png",alt:null}))),Object(r.b)("p",null,"所谓的“非对称加密技术”，意思就是说：“加密”和“解密”使用【不同的】密钥。服务端将公钥（密码箱）发送给客户端，客户端使用公钥加密信息（锁箱子），服务端接受消息后使用私钥（仅韩梅梅知道的密码）解密。当年“非对称加密”的发明，还被誉为“密码学”历史上的一次革命。"),Object(r.b)("p",null,"也有被劫持情况：\n",Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/zmSHKn.png",alt:null}))),Object(r.b)("p",null,"窃听者可以伪造服务器的公钥与客户端通讯，客户端以为是跟服务器通讯，其实是与窃听者在通讯，后果可想而知。其实这个过程窃听者也要和服务器端进行通信继续所要公匙A。"),Object(r.b)("h2",{id:"ca-证书"},"CA 证书"),Object(r.b)("p",null,"CA是认证机构（Certification Authority）的简称。CA 是 PKI 系统中通信双方信任的实体，被称为可信第三方（Trusted Third Party，简称TTP）。　CA 证书，顾名思义，就是 CA 颁发的证书。"),Object(r.b)("p",null,"CA 的初始是为了解决上面非对称加密被劫持的情况，",Object(r.b)("strong",{parentName:"p"},"服务器申请 CA 证书时将服务器的“公钥”提供给 CA，CA 使用自己的“私钥”将“服务器的公钥”加密后（即：CA证书）返回给服务器"),"，服务器再将CA 证书提供给客户端。一般系统或者浏览器会内置 CA 的根证书（公钥）"),Object(r.b)("p",null,"HTTPS 中 CA 证书的获取\n",Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/aqJThY.png",alt:null}))),Object(r.b)("p",null,"注：",Object(r.b)("strong",{parentName:"p"},"上图步骤 2 之后，客户端获取到“CA 证书”会进行本地验证，即使用本地系统或者浏览器中的公钥进行解密，每个“CA 证书”都会有一个证书编号可用于解密后进行比对（具体验证算法请查阅相关资料）"),"。"),Object(r.b)("p",null,Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/bqbFNK.png",alt:null}))),Object(r.b)("p",null,"步骤 5 之前使用的是对称加密，之后将使用对称加密来提高通讯效率。"),Object(r.b)("h2",{id:"http2-与-https"},"HTTP/2 与 HTTPS"),Object(r.b)("p",null,"2012年google如一声惊雷提出了SPDY的方案，大家才开始从正面看待和解决老版本HTTP协议本身的问题，SPDY可以说是综合了HTTPS和HTTP两者有点于一体的传输协议，缩短 Web 页面的加载时间（50%）。"),Object(r.b)("p",null,Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/lGACHP.png",alt:null}))),Object(r.b)("p",null,"SPDY位于HTTP之下，TCP和SSL之上，这样可以轻松兼容老版本的HTTP协议(将HTTP1.x的内容封装成一种新的frame格式)，同时可以使用已有的SSL功能。"),Object(r.b)("p",null,"顾名思义有了HTTP1.x，那么HTTP2.0也就顺理成章的出现了。HTTP2可以说是SPDY的升级版（其实原本也是基于SPDY设计的），但是，HTTP2跟 SPDY 仍有不同的地方，主要是以下两点："),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"HTTP2.0 理论上支持明文 HTTP 传输，而 SPDY 强制使用 HTTPS。")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"HTTP2.0 消息头的压缩算法采用 HPACK，而非 SPDY 采用的 DEFLATE。"))))}i.isMDXComponent=!0},193:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return o}));var r=n(0),c=n.n(r),l=c.a.createContext({}),a=function(t){var e=c.a.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):Object.assign({},e,t)),n},b=function(t){var e=a(t.components);return c.a.createElement(l.Provider,{value:e},t.children)};var p="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return c.a.createElement(c.a.Fragment,{},e)}},i=Object(r.forwardRef)((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,b=t.parentName,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(t,["components","mdxType","originalType","parentName"]),i=a(n),o=r,T=i[b+"."+o]||i[o]||u[o]||l;return n?c.a.createElement(T,Object.assign({},{ref:e},p,{components:n})):c.a.createElement(T,Object.assign({},{ref:e},p))}));function o(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,a=new Array(l);a[0]=i;var b={};for(var u in e)hasOwnProperty.call(e,u)&&(b[u]=e[u]);b.originalType=t,b[p]="string"==typeof t?t:r,a[1]=b;for(var o=2;o<l;o++)a[o]=n[o];return c.a.createElement.apply(null,a)}return c.a.createElement.apply(null,n)}i.displayName="MDXCreateElement"}}]);