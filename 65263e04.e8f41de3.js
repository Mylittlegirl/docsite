(window.webpackJsonp=window.webpackJsonp||[]).push([[192],{355:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return b}));t(0);var r=t(546);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}const o={title:"class",sidebar_label:"class"},s=[{value:"ES5\u548cES6\u5728\u7ee7\u627f\u4e0a\u7684\u5dee\u522b",id:"es5\u548ces6\u5728\u7ee7\u627f\u4e0a\u7684\u5dee\u522b",children:[]}],c={rightToc:s},l="wrapper";function b({components:e,...n}){return Object(r.b)(l,a({},c,n,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"\u524d\u8a00\uff1a\nES6\u4e2d\u5f15\u5165\u4e86\u7c7b\u4f3c\u4f20\u7edf\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d\u201cclass\u201d\u7684\u6982\u5ff5\u3002\u5b9e\u9645\u4e0a\u8fd9\u4e9b\u5173\u952e\u5b57\u53ea\u662f\u4e00\u4e9b\u8bed\u6cd5\u7cd6\uff0c\u5e95\u5c42\u5b9e\u73b0\u8fd8\u662f\u901a\u8fc7\u539f\u578b\u94fe\u4e4b\u95f4\u7684\u59d4\u6258\u5173\u8054\u5173\u7cfb\u5b9e\u73b0\u7ee7\u627f\u3002\u901a\u8fc7",Object(r.b)("a",a({parentName:"p"},{href:"https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYGwhgzhAEAKCmAnCB7AdtA3gKGtY6EALogK7BEqIAUaYAtvAJRa57REAWAlhAHR1GAXkHwAPmIBEAEXgAzMKRBFJAbjYBfNpQDKJbmgDm1JjnbRE8IqUQYA5ADkG8AFx2A1F14Dn6vFq1sUEgYACEUAE9oeAAPIng0ABMYBGR0M3xCEnJKGlFTNjwIUgAHJFpnJj92L35DBMT4ITtwiLtqrTxdfSMTDLxLa1toYrLEPm7EA2Mmd0loAFpoAHEG10lPHjq1juwNIA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=false&presets=es2015&prettier=true&targets=&version=7.4.5&externalPlugins="}),"Babel\u7684\u8f6c\u8bd1"),"\u53ef\u4ee5\u53d1\u73b0\u53ef\u4ee5\u6620\u5c04\u5230ES5\u7684\u5bc4\u751f\u7ec4\u5408\u7ee7\u627f\u3002"),Object(r.b)("h2",{id:"es5\u548ces6\u5728\u7ee7\u627f\u4e0a\u7684\u5dee\u522b"},"ES5\u548cES6\u5728\u7ee7\u627f\u4e0a\u7684\u5dee\u522b"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u5b50\u7c7b this \u751f\u6210\u987a\u5e8f\u4e0d\u540c\u3002ES5 \u7684\u7ee7\u627f\uff0c\u5148\u751f\u6210\u4e86\u5b50\u7c7b\u5b9e\u4f8b\uff0c\u518d\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u9970\u5b50\u7c7b\u5b9e\u4f8b\u3002ES6 \u7684\u7ee7\u627f\uff0c\u5148\u751f\u6210\u7236\u7c7b\u5b9e\u4f8b\uff0c\u518d\u8c03\u7528\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u9970\u7236\u7c7b\u5b9e\u4f8b\u3002"),Object(r.b)("p",{parentName:"li"},"\u800c\u8fd9\u79cd\u5dee\u522b\u53ef\u4ee5\u76f4\u63a5\u4f53\u73b0\u5728\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f\u4e0a\uff0c\u539f\u6765\u6211\u4eec\u5f88\u96be\u81ea\u5b9a\u4e49\u4e00\u4e2aArray\u7684\u5b50\u7c7b\uff1a"))),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function MyArray() {\n  Array.apply(this, arguments); //\u5148\u6709\u5b50\u7c7b\u7684this,\u7136\u540e\u5728\u5b50\u7c7bthis\u57fa\u7840\u4e0a\uff0c\u8c03\u7528\u7236\u7c7bconstructor\u6765\u5904\u7406this\n}\n\nMyArray.prototype = Object.create(Array.prototype, {\n  constructor: {\n    value: MyArray,\n    writable: true,\n    enumerable: false,\n    configurable: true\n  }\n});\n\n")),Object(r.b)("p",null,"\u4f46\u5b8c\u5168\u65e0\u6cd5\u4f7f\u7528 Array\u5bf9\u8c61\u7684\u4e00\u4e9b\u65b9\u6cd5\u5c5e\u6027"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'//test\nvar colors = new MyArray();\ncolors[0] = "red";\ncolors.length  // 0\n\ncolors.length = 0;\ncolors[0]  // "red"\n')),Object(r.b)("p",null,"\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3a\uff0c Array.apply(this, arguments);\u662f\u56e0\u4e3a\u5b50\u7c7b\u65e0\u6cd5\u83b7\u5f97\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u5185\u90e8\u5c5e\u6027\uff0c\u901a\u8fc7Array.apply()\u6216\u8005\u5206\u914d\u7ed9\u539f\u578b\u5bf9\u8c61\u90fd\u4e0d\u884c\u3002\u539f\u751f\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565apply\u65b9\u6cd5\u4f20\u5165\u7684this\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u539f\u751f\u6784\u9020\u51fd\u6570\u7684this\u65e0\u6cd5\u7ed1\u5b9a\uff0c\u5bfc\u81f4\u62ff\u4e0d\u5230\u5185\u90e8\u5c5e\u6027\u3002"),Object(r.b)("p",null,"ES6\u7ee7\u627fArray\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'class MyArray extends Array {\n  constructor(...args) {\n    super(...args);\n  }\n}\n\nvar arr = new MyArray();\n//test\nvar colors = new MyArray();\ncolors[0] = "red";\ncolors.length  // 1\n\ncolors.length = 0;\ncolors[0]  // undefined\n')),Object(r.b)("p",null,"\u4e3b\u8981\u662fthis\u5bf9\u8c61\u521b\u5efa\u987a\u5e8f\u4e0d\u540c"),Object(r.b)("p",null,"ES5 \u7684\u7ee7\u627f\uff0c\u5b9e\u8d28\u662f\u5148\u521b\u9020\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61this\uff0c\u7136\u540e\u518d\u5c06\u7236\u7c7b\u7684\u65b9\u6cd5\u6dfb\u52a0\u5230this\u4e0a\u9762\uff08Parent.apply(this)\uff09\u3002ES6 \u7684\u7ee7\u627f\u673a\u5236\u5b8c\u5168\u4e0d\u540c\uff0c\u5b9e\u8d28\u662f\u5148\u5c06\u7236\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u52a0\u5230this\u4e0a\u9762\uff08\u6240\u4ee5\u5fc5\u987b\u5148\u8c03\u7528super\u65b9\u6cd5\uff09\uff0c\u7136\u540e\u518d\u7528\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u6539this\u3002"),Object(r.b)("p",null,"\u6ce8\u610f\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"class NewObj extends Object{\n  constructor(){\n    super(...arguments);\n  }\n}\nvar o = new NewObj({attr: true});\no.attr === true  // false\n")),Object(r.b)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cNewObj\u7ee7\u627f\u4e86Object\uff0c\u4f46\u662f\u65e0\u6cd5\u901a\u8fc7super\u65b9\u6cd5\u5411\u7236\u7c7bObject\u4f20\u53c2\u3002\u8fd9\u662f\u56e0\u4e3a ES6 \u6539\u53d8\u4e86Object\u6784\u9020\u51fd\u6570\u7684\u884c\u4e3a\uff0c\u4e00\u65e6\u53d1\u73b0Object\u65b9\u6cd5\u4e0d\u662f\u901a\u8fc7new Object()\u8fd9\u79cd\u5f62\u5f0f\u8c03\u7528\uff0cES6 \u89c4\u5b9aObject\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565\u53c2\u6570\u3002"),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"\u5b50\u7c7b",Object(r.b)("strong",{parentName:"strong"},"proto"),"\u6307\u5411\u4e0d\u540c"),"\u3002\u5b50\u7c7b\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7",Object(r.b)("strong",{parentName:"li"},"proto"),"\u5bfb\u5740\u5230\u7236\u7c7b\u3002\u6838\u5fc3\u76ee\u7684\u662f\u5b9e\u73b0\u9759\u6001\u65b9\u6cd5\u7ee7\u627f\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"class Super {}\nclass Sub extends Super {}\n\nconst sub = new Sub();\n\nSub.__proto__ === Super; // true\n")),Object(r.b)("p",null,"\u800c\u901a\u8fc7 ES5 \u7684\u65b9\u5f0f\uff0cSub.proto === Function.prototype"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function Super() {}\nfunction Sub() {}\n\nSub.prototype = Object.create(Super.prototype);\nSub.prototype.constructor = Sub;\n\nvar sub = new Sub();\n\nSub.__proto__ === Function.prototype;  // true\n\n")),Object(r.b)("p",null,"\u5728\u5728babel\u89e3\u6790\u4e2d_inherits\u7684\u5b9e\u73b0\u5927\u6982\u662f\u8fd9\u6837\u7684\uff0c\u6ce8\u610f\u6700\u540e\u4e00\u53e5\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function _inherits(subClass, superClass) {\n  subClass.prototype = Object.create(\n      Foo.prototype, {\n          constructor: { \n              value: subClass, // \u5c06constructor\u6307\u5411\u5b50\u7c7b\n              writable: true, \n              configurable: true // babel \u6ca1\u6709enumerable: false why?\n          }\n      }\n  );\n  subClass.__proto__ = superClass\n}\n")),Object(r.b)("p",null,"ES6\u7ee7\u627f\u5bf9\u5e94\u7684\u539f\u578b\u94fe\u5176\u5b9e\u662f\u8fd9\u6837\u7684\uff1a\n",Object(r.b)("img",a({parentName:"p"},{src:"https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/HETr4Z.png",alt:null}))),Object(r.b)("ol",{start:3},Object(r.b)("li",{parentName:"ol"},"class \u4e0d\u4f1a\u201c\u53d8\u91cf\u63d0\u5347\u201d\uff0c\u7c7b\u4f3c\u4e8e let\u3001const \u58f0\u660e\u53d8\u91cf\uff0c\u4f46\u4f1a\u8fdb\u5165\u6682\u65f6\u6027\u6b7b\u533a\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"var Foo = function() {\n  this.foo = 21;\n};\n\n{\n  const foo = new Foo(); // ReferenceError: Foo is not defined\n  class Foo {\n    constructor() {\n      this.foo = 37;\n    }\n  }\n}\n")),Object(r.b)("ol",{start:4},Object(r.b)("li",{parentName:"ol"},"class \u58f0\u660e\u5185\u90e8\u4f1a\u542f\u7528\u4e25\u683c\u6a21\u5f0f\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"// \u5f15\u7528\u4e00\u4e2a\u672a\u58f0\u660e\u7684\u53d8\u91cf\nfunction Bar() {\n  baz = 42; // it's ok\n}\nconst bar = new Bar();\n\nclass Foo {\n  constructor() {\n    fol = 42; // ReferenceError: fol is not defined\n  }\n}\nconst foo = new Foo();\n")),Object(r.b)("ol",{start:5},Object(r.b)("li",{parentName:"ol"},"class \u7684\u6240\u6709\u65b9\u6cd5\uff08\u5305\u62ec\u9759\u6001\u65b9\u6cd5\u548c\u5b9e\u4f8b\u65b9\u6cd5\uff09\u90fd\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"// \u5f15\u7528\u4e00\u4e2a\u672a\u58f0\u660e\u7684\u53d8\u91cf\nfunction Bar() {\n  baz = 42; // it's ok\n}\nconst bar = new Bar();\n\nclass Foo {\n  constructor() {\n    fol = 42; // ReferenceError: fol is not defined\n  }\n}\nconst foo = new Foo();\n")),Object(r.b)("ol",{start:6},Object(r.b)("li",{parentName:"ol"},"class \u7684\u6240\u6709\u65b9\u6cd5\uff08\u5305\u62ec\u9759\u6001\u65b9\u6cd5\u548c\u5b9e\u4f8b\u65b9\u6cd5\uff09\u90fd\u6ca1\u6709\u539f\u578b\u5bf9\u8c61 prototype\uff0c\u6240\u4ee5\u4e5f\u6ca1\u6709[","[construct]","]\uff0c\u4e0d\u80fd\u4f7f\u7528 new \u6765\u8c03\u7528\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function Bar() {\n  this.bar = 42;\n}\nBar.prototype.print = function() {\n  console.log(this.bar);\n};\n\nconst bar = new Bar();\nconst barPrint = new bar.print(); // it's ok\n\nclass Foo {\n  constructor() {\n    this.foo = 42;\n  }\n  print() {\n    console.log(this.foo);\n  }\n}\nconst foo = new Foo();\nconst fooPrint = new foo.print(); // TypeError: foo.print is not a constructor\n")))}b.isMDXComponent=!0},546:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return u}));var r=t(0),a=t.n(r),o=a.a.createContext({}),s=function(e){var n=a.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},c=function(e){var n=s(e.components);return a.a.createElement(o.Provider,{value:n},e.children)};var l="mdxType",b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},p=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(e,["components","mdxType","originalType","parentName"]),p=s(t),u=r,i=p[c+"."+u]||p[u]||b[u]||o;return t?a.a.createElement(i,Object.assign({},{ref:n},l,{components:t})):a.a.createElement(i,Object.assign({},{ref:n},l))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=p;var c={};for(var b in n)hasOwnProperty.call(n,b)&&(c[b]=n[b]);c.originalType=e,c[l]="string"==typeof e?e:r,s[1]=c;for(var u=2;u<o;u++)s[u]=t[u];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);