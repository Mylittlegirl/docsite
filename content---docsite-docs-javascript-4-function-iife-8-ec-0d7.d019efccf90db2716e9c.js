(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{297:function(n,e,t){"use strict";t.r(e),t.d(e,"frontMatter",(function(){return c})),t.d(e,"rightToc",(function(){return a})),t.d(e,"default",(function(){return i}));t(58),t(31),t(22),t(23),t(59),t(0);var o=t(537);function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}).apply(this,arguments)}var c={title:"\u7acb\u5373\u6267\u884c\u51fd\u6570IIFE",sidebar_label:"\u7acb\u5373\u6267\u884c\u51fd\u6570IIFE"},a=[{value:"\u9694\u79bb\u4f5c\u7528\u57df",id:"\u9694\u79bb\u4f5c\u7528\u57df",children:[]},{value:"\u9632\u6b62\u5305\u51b2\u7a81",id:"\u9632\u6b62\u5305\u51b2\u7a81",children:[]},{value:"\u7528IIFE\u5199\u60f0\u6027\u8f7d\u5165",id:"\u7528iife\u5199\u60f0\u6027\u8f7d\u5165",children:[]}],l={rightToc:a},u="wrapper";function i(n){var e=n.components,t=function(n,e){if(null==n)return{};var t,o,r={},c=Object.keys(n);for(o=0;o<c.length;o++)t=c[o],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,["components"]);return Object(o.b)(u,r({},l,t,{components:e,mdxType:"MDXLayout"}),Object(o.b)("p",null,"\u7acb\u5373\u6267\u884c\u51fd\u6570\u8868\u8fbe\u5f0f(Immediately-Invoked Function Expression)"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"!function(){ /* code */ }();\n~function(){ /* code */ }();\n-function(){ /* code */ }();\n+function(){ /* code */ }();\n\nvoid function(){ /* code */ }();\n\n// new\u5173\u952e\u5b57\u4e5f\u80fd\u8fbe\u5230\u8fd9\u4e2a\u6548\u679c\nnew function(){ /* code */ }\nnew function(){ /* code */ }()\n// \u53ea\u6709\u4f20\u9012\u53c2\u6570\u65f6\uff0c\u624d\u9700\u8981\u6700\u540e\u90a3\u4e2a\u5706\u62ec\u53f7\n")),Object(o.b)("p",null,"\u6709\u4eba\u505a\u8fc7\u6d4b\u8bd5\uff0c\u4f7f\u7528()\u548cvoid\u65f6\uff0c\u6548\u7387\u662f\u6700\u9ad8\u7684\uff0c\u6240\u4ee5\u63a8\u8350\u5927\u5bb6\u5c3d\u91cf\u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u5f0f\u3002"),Object(o.b)("p",null,"\u9664\u4e86\u60f0\u6027\u548c\u5c40\u90e8\u4f5c\u7528\u57df\u907f\u514d\u6c61\u67d3\uff0c\u5e7f\u544a\uff0c\u7b2c\u4e09\u65b9\u7edf\u8ba1\u9700\u6c42\u8fd9\u79cd\uff0c\u4e5f\u662f\u9700\u8981\u81ea\u6267\u884c\u7684\u3002"),Object(o.b)("p",null,"FE\u5e38\u7528\u7684\u529f\u80fd"),Object(o.b)("h2",{id:"\u9694\u79bb\u4f5c\u7528\u57df"},"\u9694\u79bb\u4f5c\u7528\u57df"),Object(o.b)("p",null,"\u9632\u6b62\u4f5c\u7528\u57df\u6c61\u67d3\u3002ES6\u4e4b\u524dJS\u539f\u751f\u53c8\u4e0d\u63d0\u4f9b\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u53ea\u80fd\u7528",Object(o.b)("strong",{parentName:"p"},"\u51fd\u6570\u4f5c\u7528\u57df"),"\u6a21\u62df\u4e86\u3002"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"// IIFEs\uff08\u7acb\u5373\u6267\u884c\u51fd\u6570\uff09 can also be used to create variables that are inaccessible from the global\n// scope\nconst counter = (function() {\n   var count = 0 // count\u5bf9\u8c61\u53ea\u80fd\u901a\u8fc7counter\u5bf9\u8c61\u91cc\u9762\u7684\u65b9\u6cd5\u53bb\u8c03\u7528\uff0c\u4e0e\u5916\u754c\u9694\u79bb\n\n   return {\n       inc: function() { count = count + 1 },\n       get: function() { console.log(count) },\n   }\n})()\n\ncounter.get()\ncounter.inc()\ncounter.get()\n")),Object(o.b)("h2",{id:"\u9632\u6b62\u5305\u51b2\u7a81"},"\u9632\u6b62\u5305\u51b2\u7a81"),Object(o.b)("p",null,"\u5982\u679c\u6211\u4eec\u5728\u9875\u9762\u4e2d\u540c\u65f6\u5f15\u7528\u4e86\u591a\u4e2ajs\u6587\u4ef6\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u6587\u4ef6\u4e2d\u6709\u76f8\u540c\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u90a3\u4e48\u5c31\u4f1a\u88ab\u8986\u76d6\u6389\u3002\u8bd5\u60f3\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),Object(o.b)("p",null,"lib_a.js"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"var num = 1;\n// code....\n")),Object(o.b)("p",null,"lib_b.js"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"var num = 2;\n// code....\n")),Object(o.b)("p",null,"\u5982\u679c\u5728\u9875\u9762\u4e2d\u540c\u65f6\u5f15\u7528lib_a.js\u548clib_a.js\u4e24\u4e2a\u5e93\uff0c\u5fc5\u7136\u5bfc\u81f4num\u53d8\u91cf\u88ab\u8986\u76d6\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7IIFE\u6765\u89e3\u51b3\uff1a"),Object(o.b)("p",null,"lib_a.js"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"(function() {\n        var num = 1;\n        // code....\n})();\n")),Object(o.b)("p",null,"lib_b.js"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"(function() {\n        var num = 2;\n        // code....\n})();\n")),Object(o.b)("h2",{id:"\u7528iife\u5199\u60f0\u6027\u8f7d\u5165"},"\u7528IIFE\u5199\u60f0\u6027\u8f7d\u5165"),Object(o.b)("p",null,"\u56e0\u4e3a\u51fd\u6570\u88ab\u6267\u884c\u5f15\u64ce\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u7acb\u5373\u6267\u884c\u4e86\uff0c\u6240\u4ee5\u5f53\u4f60\u5728\u4e4b\u540e\u7684\u4ee3\u7801\u8bbf\u95ee\u8fd9\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\u7ed9\u4f60\u8ba1\u7b97\u540e\u7684\u7b5b\u9009\u7ed3\u679c\u4e86\u3002"),Object(o.b)("p",null,"\u6211\u4eec\u5e73\u65f6\u5199\u7684\u5224\u65ad\u56e0\u4e3a\u5224\u65ad\u6761\u4ef6\u53ef\u80fd\u4f1a\u88ab\u6539\u53d8\uff0c\u6240\u4ee5\u9700\u8981\u6bcf\u6b21\u90fd\u8fdb\u884c\u5224\u65ad\uff1b\u4f46\u662f\u5f53\u6211\u4eec\u5224\u65ad\u7684\u5bf9\u8c61\u662f\u4e00\u4e2a\u5728\u5f53\u524d\u9875\u9762\u4e0d\u4f1a\u518d\u6b21\u88ab\u6539\u53d8\u7684\u5bf9\u8c61\u65f6\uff0c\u60f0\u6027\u8f7d\u5165\u7684\u4f5c\u7528\u5c31\u663e\u793a\u51fa\u6765\u4e86"),Object(o.b)("p",null,"\u4e3e\u4e2a\u6817\u5b50\uff0c\u4e00\u4e2a\u89c6\u9891\u64ad\u653e\u7684\u65b9\u6cd5\u9700\u8981\u5bf9\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u91c7\u53d6\u4e0d\u540c\u7684\u5bf9\u7b56\uff0c\u5728 IE \u4e2d\u91c7\u7528 flash \uff0c\u800c\u5176\u4ed6\u6d4f\u89c8\u5668\u4e2d\u4e0d\u4f7f\u7528\u3002\u7531\u4e8e\u9664\u975e\u6362\u6d4f\u89c8\u5668\uff0c\u5426\u5219\u662f\u5426\u662f IE \u8fd9\u4e2a\u6761\u4ef6\u7684\u503c\u4e0d\u4f1a\u88ab\u6539\u53d8\uff0c\u8fd9\u6837\u91c7\u7528\u60f0\u6027\u8f7d\u5165\uff0c\u5c31\u53ef\u4ee5\u5728\u591a\u6b21\u8c03\u7528\u65f6\u6709\u660e\u663e\u7684\u4f18\u52bf\u3002"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-js"}),"var showVideo = function () {\n   console.log('\u7b2c\u4e00\u6b21\u8c03\u7528 showVideo')\n\n   if (isIE) {\n       return function () {\n           console.log('\u5728 IE \u4e2d\u8c03\u7528 showVideo')\n       }\n   } else {\n       return function () {\n           console.log('\u5728 \u975eIE \u4e2d\u56fd\u8c03\u7528 showVideo')\n       }\n   }\n}()\n// \u7b2c\u4e00\u6b21\u8c03\u7528 showVideo\n\nshowVideo();\n// \u5728 \u975eIE \u4e2d\u56fd\u8c03\u7528 showVideo\n\nshowVideo();\n// \u5728 \u975eIE \u4e2d\u56fd\u8c03\u7528 showVideo\n\nshowVideo();\n// \u5728 \u975eIE \u4e2d\u56fd\u8c03\u7528 showVideo\n")))}i.isMDXComponent=!0},537:function(n,e,t){"use strict";t.d(e,"a",(function(){return l})),t.d(e,"b",(function(){return s}));var o=t(0),r=t.n(o),c=r.a.createContext({}),a=function(n){var e=r.a.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):Object.assign({},e,n)),t},l=function(n){var e=a(n.components);return r.a.createElement(c.Provider,{value:e},n.children)};var u="mdxType",i={inlineCode:"code",wrapper:function(n){var e=n.children;return r.a.createElement(r.a.Fragment,{},e)}},b=Object(o.forwardRef)((function(n,e){var t=n.components,o=n.mdxType,c=n.originalType,l=n.parentName,u=function(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&-1===e.indexOf(o)&&(t[o]=n[o]);return t}(n,["components","mdxType","originalType","parentName"]),b=a(t),s=o,p=b[l+"."+s]||b[s]||i[s]||c;return t?r.a.createElement(p,Object.assign({},{ref:e},u,{components:t})):r.a.createElement(p,Object.assign({},{ref:e},u))}));function s(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var c=t.length,a=new Array(c);a[0]=b;var l={};for(var i in e)hasOwnProperty.call(e,i)&&(l[i]=e[i]);l.originalType=n,l[u]="string"==typeof n?n:o,a[1]=l;for(var s=2;s<c;s++)a[s]=t[s];return r.a.createElement.apply(null,a)}return r.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);