(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{407:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"rightToc",(function(){return o})),t.d(n,"default",(function(){return l}));t(58),t(31),t(22),t(23),t(59),t(0);var r=t(537);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var c={title:"\u521b\u5efa\u5b9e\u4f8b",sidebar_label:"\u521b\u5efa\u5b9e\u4f8b"},o=[{value:"\u4ece\u6784\u9020\u51fd\u6570\u521b\u5efa\uff1anew",id:"\u4ece\u6784\u9020\u51fd\u6570\u521b\u5efa\uff1anew",children:[{value:"new \u547d\u4ee4\u7684\u539f\u7406",id:"new-\u547d\u4ee4\u7684\u539f\u7406",children:[]}]},{value:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aconstructor",id:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aconstructor",children:[]},{value:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aObject.create",id:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aobjectcreate",children:[]}],p={rightToc:o},b="wrapper";function l(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,["components"]);return Object(r.b)(b,a({},p,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"\u4ece\u6784\u9020\u51fd\u6570\u521b\u5efa\uff1anew"},"\u4ece\u6784\u9020\u51fd\u6570\u521b\u5efa\uff1anew"),Object(r.b)("p",null,"new \u4f1a",Object(r.b)("strong",{parentName:"p"},"\u52ab\u6301"),"\u6240\u6709\u666e\u901a\u51fd\u6570\u5e76\u7528\u6784\u9020\u5bf9\u8c61\u7684\u5f62\u5f0f\u6765\u8c03\u7528\u5b83\u3002"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"new\u547d\u4ee4\u4f7f\u7528\u9700\u8981\u6ce8\u610f\u7684\u70b9\uff1a")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"new\u547d\u4ee4\u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8981\u4e48\u662f\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u8981\u4e48\u662freturn\u8bed\u53e5\u6307\u5b9a\u7684\u5bf9\u8c61\u3002\u6bd4\u5982return\u8bed\u53e5\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5new\u547d\u4ee4\u5c31\u5ffd\u7565\u4e86\u8be5\u8bed\u53e5\uff0c\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61this\u3002"),Object(r.b)("li",{parentName:"ul"},"new\u547d\u4ee4\u6267\u884c\u65f6\uff0c\u6784\u9020\u51fd\u6570\u5185\u90e8\u7684this\uff0c\u5c31\u4ee3\u8868\u4e86\u65b0\u751f\u6210\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528new \u8c03\u7528\u8be5\u51fd\u6570\u90a3\u4e48this\u4f1a\u6307\u5411\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u6bd4\u5982\u5168\u5c40\u5bf9\u8c61\u3002"),Object(r.b)("li",{parentName:"ul"},"new\u547d\u4ee4\u672c\u8eab\u5c31\u53ef\u4ee5\u6267\u884c\u6784\u9020\u51fd\u6570\uff0c\u6240\u4ee5\u540e\u9762\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u5e26\u62ec\u53f7\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5e26\u62ec\u53f7\u3002\u4e0b\u9762\u4e24\u884c\u4ee3\u7801\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u662f\u4e3a\u4e86\u8868\u793a\u8fd9\u91cc\u662f\u51fd\u6570\u8c03\u7528\uff0c\u63a8\u8350\u4f7f\u7528\u62ec\u53f7\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"// \u63a8\u8350\u7684\u5199\u6cd5\nvar v = new Vehicle();\n// \u4e0d\u63a8\u8350\u7684\u5199\u6cd5\nvar v = new Vehicle;\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"\u5982\u4f55\u4fdd\u8bc1\u6784\u9020\u51fd\u6570\u5fc5\u987b\u4e0enew\u547d\u4ee4\u4e00\u8d77\u4f7f\u7528\uff1f")),Object(r.b)("p",null,"\u65b9\u6cd5\u4e00\uff1a\u6784\u9020\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u4e25\u683c\u6a21\u5f0f\uff0c\u5373\u7b2c\u4e00\u884c\u52a0\u4e0ause strict\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u4e00\u65e6\u5fd8\u4e86\u4f7f\u7528new\u547d\u4ee4\uff0c\u76f4\u63a5\u8c03\u7528\u6784\u9020\u51fd\u6570\u5c31\u4f1a\u62a5\u9519\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function Fubar(foo, bar){\n  'use strict';\n this._foo = foo;\n this._bar = bar;\n}\n\nFubar()\n// TypeError: Cannot set property '_foo' of undefined\n")),Object(r.b)("p",null,"\u7531\u4e8e\u4e25\u683c\u6a21\u5f0f\u4e2d\uff0c",Object(r.b)("strong",{parentName:"p"},"\u51fd\u6570\u5185\u90e8\u7684this\u4e0d\u6307\u5411\u5168\u5c40\u5bf9\u8c61"),"\uff0c\u9ed8\u8ba4\u7b49\u4e8e",Object(r.b)("inlineCode",{parentName:"p"},"undefined"),"\u3002"),Object(r.b)("p",null,"\u65b9\u6cd5\u4e8c\uff1a\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528new.target\u5c5e\u6027\u3002\u5982\u679c\u5f53\u524d\u51fd\u6570\u662fnew\u547d\u4ee4\u8c03\u7528\uff0cnew.target\u6307\u5411\u5f53\u524d\u51fd\u6570\uff0c\u5426\u5219\u4e3aundefined\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function f() {\n console.log(new.target === f);\n}\n\nf() // false\nnew f() // true\n")),Object(r.b)("p",null,"\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u53ef\u4ee5\u5224\u65ad\u51fd\u6570\u8c03\u7528\u7684\u65f6\u5019\uff0c\u662f\u5426\u4f7f\u7528new\u547d\u4ee4\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function f() {\n if (!new.target) {\n   throw new Error('\u8bf7\u4f7f\u7528 new \u547d\u4ee4\u8c03\u7528\uff01');\n }\n // ...\n}\n\nf() // Uncaught Error: \u8bf7\u4f7f\u7528 new \u547d\u4ee4\u8c03\u7528\uff01\n")),Object(r.b)("h3",{id:"new-\u547d\u4ee4\u7684\u539f\u7406"},"new \u547d\u4ee4\u7684\u539f\u7406"),Object(r.b)("p",null,"\u4f7f\u7528new\u547d\u4ee4\u65f6\uff0c\u5b83\u540e\u9762\u7684\u51fd\u6570\u4f9d\u6b21\u6267\u884c\u4e0b\u9762\u7684\u6b65\u9aa4\u3002"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u5c06\u8981\u8fd4\u56de\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002"),Object(r.b)("li",{parentName:"ol"},"\u5c06\u8fd9\u4e2a\u7a7a\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u6307\u5411\u6784\u9020\u51fd\u6570\u7684prototype\u5c5e\u6027\u3002"),Object(r.b)("li",{parentName:"ol"},"\u5c06\u8fd9\u4e2a\u7a7a\u5bf9\u8c61\u8d4b\u503c\u7ed9\u51fd\u6570\u5185\u90e8\u7684this\u5173\u952e\u5b57\u3002"),Object(r.b)("li",{parentName:"ol"},"\u5f00\u59cb\u6267\u884c\u6784\u9020\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\u3002")),Object(r.b)("p",null,"\u5c31\u662f\u8bf4\uff0c\u6784\u9020\u51fd\u6570\u5185\u90e8\uff0c",Object(r.b)("strong",{parentName:"p"},"this\u6307\u7684\u662f\u4e00\u4e2a\u65b0\u751f\u6210\u7684\u7a7a\u5bf9\u8c61"),"\uff0c\u6240\u6709\u9488\u5bf9this\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u53d1\u751f\u5728\u8fd9\u4e2a\u7a7a\u5bf9\u8c61\u4e0a\u3002\u6784\u9020\u51fd\u6570\u4e4b\u6240\u4ee5\u53eb\u201c\u6784\u9020\u51fd\u6570\u201d\uff0c\u5c31\u662f\u8bf4\u8fd9\u4e2a\u51fd\u6570\u7684\u76ee\u7684\uff0c",Object(r.b)("strong",{parentName:"p"},"\u5c31\u662f\u64cd\u4f5c\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff08\u5373this\u5bf9\u8c61\uff09\uff0c\u5c06\u5176\u201c\u6784\u9020\u201d\u4e3a\u9700\u8981\u7684\u6837\u5b50"),"\u3002"),Object(r.b)("p",null,"new\u547d\u4ee4\u7b80\u5316\u7684\u5185\u90e8\u6d41\u7a0b\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u8868\u793a\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function _new(/* \u6784\u9020\u51fd\u6570 */ constructor, /* \u6784\u9020\u51fd\u6570\u53c2\u6570 */ params) {\n // \u5c06 arguments \u5bf9\u8c61\u8f6c\u4e3a\u6570\u7ec4\n var args = [].slice[al].call(arguments);\n // \u53d6\u51fa\u6784\u9020\u51fd\u6570\n var constructor = args.shift()[am];\n // \u521b\u5efa\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u7ee7\u627f\u6784\u9020\u51fd\u6570\u7684 prototype \u5c5e\u6027\n var context[an] = Object.create(constructor.prototype);\n // \u6267\u884c\u6784\u9020\u51fd\u6570\n var result = constructor.apply(context, args[ao]);\n // \u5982\u679c\u8fd4\u56de\u7ed3\u679c\u662f\u5bf9\u8c61\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\uff0c\u5426\u5219\u8fd4\u56de context \u5bf9\u8c61\n return (typeof result === 'object' && result != null) ? result : context;\n}\n\n// \u5b9e\u4f8b\nvar actor = _new(Person, '\u5f20\u4e09', 28);\n")),Object(r.b)("h2",{id:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aconstructor"},"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aconstructor"),Object(r.b)("p",null,"\u5148\u4ecb\u7ecd\u4e00\u4e0b",Object(r.b)("inlineCode",{parentName:"p"},"prototype"),"\u5bf9\u8c61\u91cc\u7684",Object(r.b)("inlineCode",{parentName:"p"},"constructor"),"\u5c5e\u6027\uff0c\u9ed8\u8ba4\u6307\u5411",Object(r.b)("inlineCode",{parentName:"p"},"prototype"),"\u5bf9\u8c61\u6240\u5728\u7684\u6784\u9020\u51fd\u6570\u3002\u8bf7\u6ce8\u610f",Object(r.b)("strong",{parentName:"p"},"\u7531\u6784\u9020\u51fd\u6570\u521b\u5efa\u51fa\u6765\u7684\u5b9e\u4f8b\u5b9e\u9645\u4e0a\u662f\u6ca1\u6709",Object(r.b)("inlineCode",{parentName:"strong"},"constructor"),"\u5c5e\u6027\uff0c\u56e0\u4e3a\u5b83\u662f",Object(r.b)("inlineCode",{parentName:"strong"},"prototype"),"\u7684\u4e00\u4e2a\u5c5e\u6027"),"\uff0c\u800c",Object(r.b)("inlineCode",{parentName:"p"},"prototype"),"\u662f\u6784\u9020\u51fd\u6570\u6240\u7279\u6709\u7684\u3002\u4f46\u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7",Object(r.b)("strong",{parentName:"p"},"\u539f\u578b\u94fe\u59d4\u6258\u7ee7\u627f"),"\u7684\u65b9\u5f0f\u6765\u7ee7\u627f\u8be5\u5c5e\u6027\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function P() {}\nvar p = new P();\n\np.constructor === P // true\np.constructor === P.prototype.constructor // true\np.hasOwnProperty('constructor') // false\n")),Object(r.b)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cp\u662f\u6784\u9020\u51fd\u6570P\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4f46\u662fp\u81ea\u8eab\u6ca1\u6709",Object(r.b)("inlineCode",{parentName:"p"},"constructor"),"\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u5176\u5b9e\u662f\u8bfb\u53d6\u539f\u578b\u94fe\u4e0a\u9762\u7684",Object(r.b)("inlineCode",{parentName:"p"},"P.prototype.constructor"),"\u5c5e\u6027\u3002"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"constructor"),"\u5c5e\u6027\u7684\u4f5c\u7528\u662f\uff0c\u53ef\u4ee5\u5f97\u77e5\u67d0\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5230\u5e95\u662f\u54ea\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u4ea7\u751f\u7684\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function F() {};\nvar f = new F();\n\nf.constructor === F // true\nf.constructor === RegExp // false\n")),Object(r.b)("p",null,"\u6784\u9020\u51fd\u6570\u4f5c\u4e3a\u6a21\u677f\uff0c\u53ef\u4ee5\u751f\u6210\u5b9e\u4f8b\u5bf9\u8c61\u3002\u4f46\u662f\uff0c",Object(r.b)("strong",{parentName:"p"},"\u6709\u65f6\u62ff\u4e0d\u5230\u6784\u9020\u51fd\u6570\uff0c\u53ea\u80fd\u62ff\u5230\u4e00\u4e2a\u73b0\u6709\u7684\u5b9e\u4f8b\u3002\u6211\u4eec\u53ef\u4ee5\u7528a\u7684",Object(r.b)("inlineCode",{parentName:"strong"},"constructor"),"\u65b9\u6cd5\u53bb\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"function A() {}\nvar a = new A();\n\nvar b = new a.constructor(); // \u5176\u5b9e\u76f8\u5f53\u4e8enew A()\nb instanceof A // true\n")),Object(r.b)("div",null,Object(r.b)("img",{width:"436",src:"https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/image15.png"})),Object(r.b)("p",null,"\u8fd9\u4f7f\u5f97\u5728\u5b9e\u4f8b\u65b9\u6cd5\u4e2d\uff0c\u8c03\u7528\u81ea\u8eab\u7684\u6784\u9020\u51fd\u6570\u6210\u4e3a\u53ef\u80fd\u3002"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"Constructor.prototype.createCopy = function () {\n return new this.constructor();\n};\n\n")),Object(r.b)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0ccreateCopy\u65b9\u6cd5\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u65b0\u5efa\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u3002"),Object(r.b)("h2",{id:"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aobjectcreate"},"\u4ece\u5b9e\u4f8b\u521b\u5efa\uff1aObject.create"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Object.create")," \u4e3b\u8981\u662f\u7528\u6765\u4ece",Object(r.b)("strong",{parentName:"p"},"\u4e00\u4e2a\u5bf9\u8c61\u521b\u5efa\u51fa\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5e76\u4e14\u4fdd\u7559\u8be5\u5bf9\u8c61\u7684\u539f\u578b\u94fe\u7ee7\u627f\u5173\u7cfb"),"\u3002\u5b83\u4f1a\u51ed\u7a7a\u521b\u5efa\u4e00\u4e2a\u201c\u65b0\u201d\u5bf9\u8c61\u5e76\u628a\u65b0\u5bf9\u8c61\u5185\u90e8\u7684",Object(r.b)("inlineCode",{parentName:"p"},"__proto_"),"_\u5173\u8054\u5230\u4f60\u6307\u5b9a\u7684\u5bf9\u8c61\u3002\u5b83\u4ee5\u73b0\u6709\u7684\u5bf9\u8c61\u4e3a\u57fa\u7840\uff0c\u800c\u5728JS\u4e2d\u65e0\u8bba\u662f\u5b57\u9762\u91cf\u5bf9\u8c61\u8fd8\u662fnew\u51fa\u6765\u7684\u5bf9\u8c61\u5b9e\u4f8b\u672c\u8d28\u4e0a\u90fd\u662fObject\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\u3002\u6240\u4ee5",Object(r.b)("strong",{parentName:"p"},"\u4ece\u4e00\u4e2a\u5bf9\u8c61\u521b\u5efa\u51fa\u53e6\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u7406\u89e3\u6210\u201c\u4ece\u4e00\u4e2a\u5b9e\u4f8bduplicate\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u5b9e\u4f8b\u201d\u3002")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"var person1 = {\n name: '\u5f20\u4e09',\n age: 38,\n greeting: function() {\n   console.log('Hi! I\\'m ' + this.name + '.');\n }\n};\n\nvar person2 = Object.create(person1);\n\nperson2.name // \u5f20\u4e09\nperson2.greeting() // Hi! I'm \u5f20\u4e09\n")),Object(r.b)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61person1\u662fperson2\u7684\u6a21\u677f\uff0c\u540e\u8005\u7ee7\u627f\u4e86\u524d\u8005\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002"),Object(r.b)("p",null,"\u76f8\u5173\u62d3\u5c55\uff1a",Object(r.b)("a",a({parentName:"p"},{href:"https://www.google.com/url?q=https://blog.csdn.net/blueblueskyhua/article/details/73135938&sa=D&ust=1570507768637000"}),"Object.create \u548cnew\u533a\u522b")))}l.isMDXComponent=!0},537:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return s}));var r=t(0),a=t.n(r),c=a.a.createContext({}),o=function(e){var n=a.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},p=function(e){var n=o(e.components);return a.a.createElement(c.Provider,{value:n},e.children)};var b="mdxType",l={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},u=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,p=e.parentName,b=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(e,["components","mdxType","originalType","parentName"]),u=o(t),s=r,i=u[p+"."+s]||u[s]||l[s]||c;return t?a.a.createElement(i,Object.assign({},{ref:n},b,{components:t})):a.a.createElement(i,Object.assign({},{ref:n},b))}));function s(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,o=new Array(c);o[0]=u;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[b]="string"==typeof e?e:r,o[1]=p;for(var s=2;s<c;s++)o[s]=t[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);