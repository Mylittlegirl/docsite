<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/docsite/main.5af442a778040b828313.css","/docsite/main.1327fab92a7f01990c21.js"],"component---site-src-pages-index-jsc-4-f-f99":["/docsite/component---site-src-pages-index-jsc-4-f-f99.9f99729bff7f082bd679.css","/docsite/component---site-src-pages-index-jsc-4-f-f99.fd8cf93fcee5e33b2573.js"],"component---theme-blog-post-pageccc-cab":["/docsite/component---theme-blog-post-pageccc-cab.210f66a78c470eaa14f5.js"],"content---docsite-blog-welcome-286-fbe":["/docsite/content---docsite-blog-welcome-286-fbe.280ee3ff0a1d6e4d5c1b.js"],"metadata---docsite-blog-welcome-769-d0e":["/docsite/metadata---docsite-blog-welcome-769-d0e.14cf1fe19d820fcb944b.js"],"nextItem---docsite-blog-welcome-552-1b1":["/docsite/nextItem---docsite-blog-welcome-552-1b1.c73594547be4af5d0734.js"],"content---docsite-blog-hello-worldd-61-877":["/docsite/content---docsite-blog-hello-worldd-61-877.9122060eccbe3f390201.js"],"nextItem---docsite-blog-hello-worldeec-c62":["/docsite/nextItem---docsite-blog-hello-worldeec-c62.d3f76e0429a73000d7ec.js"],"content---docsite-blog-holabdd-cc6":["/docsite/content---docsite-blog-holabdd-cc6.258ad7e9a5f0300c1985.js"],"component---theme-blog-list-pagea-6-a-7ba":["/docsite/component---theme-blog-list-pagea-6-a-7ba.02261ac3cbc2506c61ba.js"],"content---docsite-blogaf-1-fa9":["/docsite/content---docsite-blogaf-1-fa9.7e3c9a7e2812c9750ac8.js"],"content---docsite-blog-357-e89":["/docsite/content---docsite-blog-357-e89.7d5b5f43403caefa4638.js"],"content---docsite-blog-8-e-9-cce":["/docsite/content---docsite-blog-8-e-9-cce.d459cb10065f7c536409.js"],"metadata---docsite-blog-218-2ba":["/docsite/metadata---docsite-blog-218-2ba.69136b579a7384fb9b04.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/docsite/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css","/docsite/component---theme-doc-legacy-page-9-e-7-ca5.9d6c43606139fcc73a3b.js"],"docsMetadata---docsite-docs-6-dd-ccc":["/docsite/docsMetadata---docsite-docs-6-dd-ccc.4f95eed2f63796e64261.js"],"component---theme-doc-legacy-item-031-769":["/docsite/component---theme-doc-legacy-item-031-769.1f1ce10374de019f5d3a.css","/docsite/component---theme-doc-legacy-item-031-769.e3d3e1c8418c84422cd5.js"],"content---docsite-docs-doc-3616-679":["/docsite/content---docsite-docs-doc-3616-679.08a8ed454deb9b341cbc.js"],"metadata---docsite-docs-doc-3-cf-9-b82":["/docsite/metadata---docsite-docs-doc-3-cf-9-b82.aed42387d9ee494992d2.js"],"content---docsite-docs-react-security-guide-74-a-370":["/docsite/content---docsite-docs-react-security-guide-74-a-370.4a4db31166e9593a9d11.js"],"metadata---docsite-docs-react-security-guidec-8-a-e29":["/docsite/metadata---docsite-docs-react-security-guidec-8-a-e29.a6c64341e44c76100a34.js"],"content---docsite-docs-react-shuo-ming-273-7d2":["/docsite/content---docsite-docs-react-shuo-ming-273-7d2.dd4d1ded77c9b5d87720.js"],"metadata---docsite-docs-react-shuo-ming-7-b-8-07d":["/docsite/metadata---docsite-docs-react-shuo-ming-7-b-8-07d.8c4620a3b8f518d79aad.js"],"content---docsite-docs-mdxce-3-ecf":["/docsite/content---docsite-docs-mdxce-3-ecf.9310b84be5638175952c.js"],"metadata---docsite-docs-mdxdf-5-7ef":["/docsite/metadata---docsite-docs-mdxdf-5-7ef.aa0e4c335b9ad26ee47a.js"],"content---docsite-docs-react-appendix-1-references-14-f-380":["/docsite/content---docsite-docs-react-appendix-1-references-14-f-380.b92803351b2579a49b58.js"],"metadata---docsite-docs-react-appendix-1-references-5-bc-3c7":["/docsite/metadata---docsite-docs-react-appendix-1-references-5-bc-3c7.4ea3ac9218d0e1270210.js"],"content---docsite-docs-react-readme-377-926":["/docsite/content---docsite-docs-react-readme-377-926.f8e6d429969c58afbc16.js"],"metadata---docsite-docs-react-readme-0-d-3-7c3":["/docsite/metadata---docsite-docs-react-readme-0-d-3-7c3.526559ee4c9abe657706.js"],"content---docsite-docs-react-1-app-zong-lan-readm-ef-0-a-0b1":["/docsite/content---docsite-docs-react-1-app-zong-lan-readm-ef-0-a-0b1.94a9c691d738c363f568.js"],"metadata---docsite-docs-react-1-app-zong-lan-readme-0-f-8-485":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-readme-0-f-8-485.9a56f34120612aaa19a9.js"],"content---docsite-docs-react-appendix-2-related-websitesc-28-0af":["/docsite/content---docsite-docs-react-appendix-2-related-websitesc-28-0af.6b56a743054f0a0d7182.js"],"metadata---docsite-docs-react-appendix-2-related-websitesd-88-f2c":["/docsite/metadata---docsite-docs-react-appendix-2-related-websitesd-88-f2c.78bc1a8ec973c7ac3364.js"],"content---docsite-docs-doc-2-df-3-e73":["/docsite/content---docsite-docs-doc-2-df-3-e73.1f7759e2df14ee60863a.js"],"metadata---docsite-docs-doc-2-cd-2-869":["/docsite/metadata---docsite-docs-doc-2-cd-2-869.9f63c3882b5e02d38585.js"],"content---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-53-a-f80":["/docsite/content---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-53-a-f80.8c4346d660b7c9e2011b.js"],"metadata---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-4-ae-67c":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-4-ae-67c.da47e3ba886968740962.js"],"content---docsite-docs-react-1-basic-communicationef-2-b0f":["/docsite/content---docsite-docs-react-1-basic-communicationef-2-b0f.56b2fa9ffa0554c666c9.js"],"metadata---docsite-docs-react-1-basic-communication-567-9ee":["/docsite/metadata---docsite-docs-react-1-basic-communication-567-9ee.71e68c6f0ed958980765.js"],"content---docsite-docs-doc-1-b-2-f-57e":["/docsite/content---docsite-docs-doc-1-b-2-f-57e.dc6a4c2b69ca7aa1e145.js"],"metadata---docsite-docs-doc-13-f-5-2b6":["/docsite/metadata---docsite-docs-doc-13-f-5-2b6.f30f2eb9342661072ee5.js"],"content---docsite-docs-react-1-basic-readm-ec-5-a-742":["/docsite/content---docsite-docs-react-1-basic-readm-ec-5-a-742.3560e12b7b9cbf5a8b97.js"],"metadata---docsite-docs-react-1-basic-readme-0-e-0-acd":["/docsite/metadata---docsite-docs-react-1-basic-readme-0-e-0-acd.f1972fc1eb9d9f7fe6d6.js"],"content---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-ming-381-462":["/docsite/content---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-ming-381-462.2ba1f261e5984b0a5a63.js"],"metadata---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-mingbcf-ecd":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-mingbcf-ecd.28d10f8c887f80a6e424.js"],"content---docsite-docs-react-1-basic-lifecycle-58-a-ea4":["/docsite/content---docsite-docs-react-1-basic-lifecycle-58-a-ea4.738bad7dea62faddab81.js"],"metadata---docsite-docs-react-1-basic-lifecycle-962-1c3":["/docsite/metadata---docsite-docs-react-1-basic-lifecycle-962-1c3.f5bd3b0ea0044b37cda0.js"],"content---docsite-docs-react-1-basic-evente-9-b-30b":["/docsite/content---docsite-docs-react-1-basic-evente-9-b-30b.3a6ff0ee6a96005f63f1.js"],"metadata---docsite-docs-react-1-basic-eventa-09-980":["/docsite/metadata---docsite-docs-react-1-basic-eventa-09-980.fcede56c8ba67385e7f0.js"],"content---docsite-docs-react-1-basic-jsx-6-ce-242":["/docsite/content---docsite-docs-react-1-basic-jsx-6-ce-242.f11332359051ecac5960.js"],"metadata---docsite-docs-react-1-basic-jsx-295-0d0":["/docsite/metadata---docsite-docs-react-1-basic-jsx-295-0d0.88b2cbed3fa9ddb812f8.js"],"content---docsite-docs-react-1-basic-categoryb-79-31f":["/docsite/content---docsite-docs-react-1-basic-categoryb-79-31f.b8626d91ffe183f33494.js"],"metadata---docsite-docs-react-1-basic-category-453-065":["/docsite/metadata---docsite-docs-react-1-basic-category-453-065.d8499cf1965f6f27051e.js"],"content---docsite-docs-react-2-advanced-contextfc-8-3ee":["/docsite/content---docsite-docs-react-2-advanced-contextfc-8-3ee.aa095e8eeba6cec123b0.js"],"metadata---docsite-docs-react-2-advanced-contextfb-8-65a":["/docsite/metadata---docsite-docs-react-2-advanced-contextfb-8-65a.c7f30dba195109928744.js"],"content---docsite-docs-react-1-basic-style-608-23e":["/docsite/content---docsite-docs-react-1-basic-style-608-23e.3f0e423a52f4f4dab030.js"],"metadata---docsite-docs-react-1-basic-style-57-d-5e7":["/docsite/metadata---docsite-docs-react-1-basic-style-57-d-5e7.edc9c1fbb757f371b744.js"],"content---docsite-docs-react-1-basic-stateb-58-0ab":["/docsite/content---docsite-docs-react-1-basic-stateb-58-0ab.5f608f8ab99422d26316.js"],"metadata---docsite-docs-react-1-basic-state-8-bd-531":["/docsite/metadata---docsite-docs-react-1-basic-state-8-bd-531.60770d0b161460d43fec.js"],"content---docsite-docs-react-2-advanced-hooksaec-e85":["/docsite/content---docsite-docs-react-2-advanced-hooksaec-e85.28849f2b1b99dbce0ae7.js"],"metadata---docsite-docs-react-2-advanced-hooksfbd-7b0":["/docsite/metadata---docsite-docs-react-2-advanced-hooksfbd-7b0.b500f1271e85d6f5d7e8.js"],"content---docsite-docs-react-2-advanced-hoc-033-f9b":["/docsite/content---docsite-docs-react-2-advanced-hoc-033-f9b.8ce6a29a4b009d2bb485.js"],"metadata---docsite-docs-react-2-advanced-hoc-70-e-184":["/docsite/metadata---docsite-docs-react-2-advanced-hoc-70-e-184.4957f37cd62273d89d13.js"],"content---docsite-docs-react-2-advanced-portal-0-f-7-7e4":["/docsite/content---docsite-docs-react-2-advanced-portal-0-f-7-7e4.15c91f69f90db9550288.js"],"metadata---docsite-docs-react-2-advanced-portale-57-1ff":["/docsite/metadata---docsite-docs-react-2-advanced-portale-57-1ff.7aee9c5e638076c99bfc.js"],"content---docsite-docs-react-2-advanced-render-propse-18-eaf":["/docsite/content---docsite-docs-react-2-advanced-render-propse-18-eaf.10413af31ba88bd16fca.js"],"metadata---docsite-docs-react-2-advanced-render-props-80-d-af8":["/docsite/metadata---docsite-docs-react-2-advanced-render-props-80-d-af8.e9dc19d52e331a297e4e.js"],"content---docsite-docs-react-3-development-redux-componentea-7-2df":["/docsite/content---docsite-docs-react-3-development-redux-componentea-7-2df.bb20948104f24cb9d4a3.js"],"metadata---docsite-docs-react-3-development-redux-componentda-9-858":["/docsite/metadata---docsite-docs-react-3-development-redux-componentda-9-858.b129edb30fb5b2bbf480.js"],"content---docsite-docs-react-3-development-ui-componentc-85-2be":["/docsite/content---docsite-docs-react-3-development-ui-componentc-85-2be.e471832e7a412c3e8b0b.js"],"metadata---docsite-docs-react-3-development-ui-component-49-b-622":["/docsite/metadata---docsite-docs-react-3-development-ui-component-49-b-622.bd199926031d7c928a94.js"],"content---docsite-docs-react-4-state-management-actionf-7-e-659":["/docsite/content---docsite-docs-react-4-state-management-actionf-7-e-659.948e0b2dadea63e2a7a0.js"],"metadata---docsite-docs-react-4-state-management-action-543-f79":["/docsite/metadata---docsite-docs-react-4-state-management-action-543-f79.1a3bf726c8e5402a625e.js"],"content---docsite-docs-react-3-development-pure-componentef-9-b5a":["/docsite/content---docsite-docs-react-3-development-pure-componentef-9-b5a.2656e9d8ed3cd7a5812f.js"],"metadata---docsite-docs-react-3-development-pure-componente-63-d9b":["/docsite/metadata---docsite-docs-react-3-development-pure-componente-63-d9b.4c1e9eae9e2a4be2606d.js"],"content---docsite-docs-react-3-development-performance-4-fb-868":["/docsite/content---docsite-docs-react-3-development-performance-4-fb-868.7e91fe04ccdb210edbd2.js"],"metadata---docsite-docs-react-3-development-performance-5-ad-ce3":["/docsite/metadata---docsite-docs-react-3-development-performance-5-ad-ce3.051cedaf085a09a94779.js"],"content---docsite-docs-react-4-state-management-reducer-403-0c5":["/docsite/content---docsite-docs-react-4-state-management-reducer-403-0c5.ffa47a893c97bd037e42.js"],"metadata---docsite-docs-react-4-state-management-reducerb-81-f86":["/docsite/metadata---docsite-docs-react-4-state-management-reducerb-81-f86.54dd4dd74d45d1db2dec.js"],"content---docsite-docs-react-4-state-management-modeleda-5cf":["/docsite/content---docsite-docs-react-4-state-management-modeleda-5cf.1a754a968383d40ed1e1.js"],"metadata---docsite-docs-react-4-state-management-model-578-a22":["/docsite/metadata---docsite-docs-react-4-state-management-model-578-a22.eae0e9b9409f01584b3d.js"],"content---docsite-docs-react-4-state-management-reduxa-14-db8":["/docsite/content---docsite-docs-react-4-state-management-reduxa-14-db8.82d262a375dcd2c1b62b.js"],"metadata---docsite-docs-react-4-state-management-redux-0-fd-dd9":["/docsite/metadata---docsite-docs-react-4-state-management-redux-0-fd-dd9.98704fd8a7d50ded9b39.js"],"content---docsite-docs-react-4-state-management-middleware-140-3e9":["/docsite/content---docsite-docs-react-4-state-management-middleware-140-3e9.198c887f17e18d43bd9a.js"],"metadata---docsite-docs-react-4-state-management-middlewared-4-d-1b2":["/docsite/metadata---docsite-docs-react-4-state-management-middlewared-4-d-1b2.615d352ac886707b9533.js"],"content---docsite-docs-react-4-state-management-selector-4-c-8-91e":["/docsite/content---docsite-docs-react-4-state-management-selector-4-c-8-91e.e5793f9e888949d0bb0d.js"],"metadata---docsite-docs-react-4-state-management-selectoreb-5-bbe":["/docsite/metadata---docsite-docs-react-4-state-management-selectoreb-5-bbe.9ea9a60b3c7c954a9356.js"],"content---docsite-docs-react-4-state-management-store-6-ef-862":["/docsite/content---docsite-docs-react-4-state-management-store-6-ef-862.a403ca31a25422379666.js"],"metadata---docsite-docs-react-4-state-management-storead-0-cfd":["/docsite/metadata---docsite-docs-react-4-state-management-storead-0-cfd.640e415ac203b1ef0351.js"],"content---docsite-docs-react-5-router-management-readm-ea-41-107":["/docsite/content---docsite-docs-react-5-router-management-readm-ea-41-107.890013dc214653f7323f.js"],"metadata---docsite-docs-react-5-router-management-readm-eee-6-481":["/docsite/metadata---docsite-docs-react-5-router-management-readm-eee-6-481.18ca2c6d302bac6239b7.js"],"content---docsite-docs-react-5-router-management-link-0-cf-146":["/docsite/content---docsite-docs-react-5-router-management-link-0-cf-146.e079e4921c2e93839d07.js"],"metadata---docsite-docs-react-5-router-management-linkd-5-b-66d":["/docsite/metadata---docsite-docs-react-5-router-management-linkd-5-b-66d.3371d5fbb22c6fa5b1e1.js"],"content---docsite-docs-react-5-router-management-routee-01-076":["/docsite/content---docsite-docs-react-5-router-management-routee-01-076.d7a82aec65b5ca872c10.js"],"metadata---docsite-docs-react-5-router-management-route-777-705":["/docsite/metadata---docsite-docs-react-5-router-management-route-777-705.1a9f0508df4e4766d785.js"],"content---docsite-docs-react-5-router-management-router-904-e8b":["/docsite/content---docsite-docs-react-5-router-management-router-904-e8b.944dd8d4d7a87559d9a8.js"],"metadata---docsite-docs-react-5-router-management-routere-88-bd6":["/docsite/metadata---docsite-docs-react-5-router-management-routere-88-bd6.52fde26ccbd0ad6dcda0.js"],"content---docsite-docs-react-6-test-component-test-4-a-3-8c6":["/docsite/content---docsite-docs-react-6-test-component-test-4-a-3-8c6.6d66c52ebedfc9d01db9.js"],"metadata---docsite-docs-react-6-test-component-test-6-e-8-ab7":["/docsite/metadata---docsite-docs-react-6-test-component-test-6-e-8-ab7.72dae1987c17b41298ed.js"],"content---docsite-docs-react-6-test-state-test-458-5c7":["/docsite/content---docsite-docs-react-6-test-state-test-458-5c7.6cf18021a7189a0e8158.js"],"metadata---docsite-docs-react-6-test-state-test-95-c-d9f":["/docsite/metadata---docsite-docs-react-6-test-state-test-95-c-d9f.19569995b292a92708b7.js"],"content---docsite-docs-react-6-test-test-categoryef-4-0c8":["/docsite/content---docsite-docs-react-6-test-test-categoryef-4-0c8.fbfc058f31712dddf83f.js"],"metadata---docsite-docs-react-6-test-test-category-5-e-3-789":["/docsite/metadata---docsite-docs-react-6-test-test-category-5-e-3-789.2a556f2445f855a191b8.js"],"content---docsite-docs-react-6-test-unit-testbbe-8c7":["/docsite/content---docsite-docs-react-6-test-unit-testbbe-8c7.928879f1726c5fc8e55f.js"],"metadata---docsite-docs-react-6-test-unit-test-982-d87":["/docsite/metadata---docsite-docs-react-6-test-unit-test-982-d87.3eb513e760754ba71875.js"],"component---theme-blog-tags-posts-page-687-b6c":["/docsite/component---theme-blog-tags-posts-page-687-b6c.85c5ff68b6bdf57fa90d.js"],"metadata---docsite-blog-tags-facebook-628-fc9":["/docsite/metadata---docsite-blog-tags-facebook-628-fc9.078a315ebfd83c8abb15.js"],"metadata---docsite-blog-tags-hellobcb-730":["/docsite/metadata---docsite-blog-tags-hellobcb-730.ad3e68a572375e7e7761.js"],"metadata---docsite-blog-tags-hola-233-95b":["/docsite/metadata---docsite-blog-tags-hola-233-95b.edb20021aa19dee4cddb.js"],"metadata---docsite-blog-tags-docusaurus-350-a8e":["/docsite/metadata---docsite-blog-tags-docusaurus-350-a8e.dd3520aca16f3194f3b8.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/docsite/component---theme-blog-tags-list-page-01-a-d0b.7b4863ed46b94f843b6a.js"],"tags---docsite-blog-tagsb-23-7b0":["/docsite/tags---docsite-blog-tagsb-23-7b0.4450ac79b72965a3d91c.js"]};/*]]>*/</script>

<title data-react-helmet="true">Hooks</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Hooks"/><meta data-react-helmet="true" name="description" content="## 什么是State Hooks？"/><meta data-react-helmet="true" property="og:description" content="## 什么是State Hooks？"/><meta data-react-helmet="true" property="og:url" content="https://thinkbucket.github.io/docsite/docs/react/2.advanced/hooks"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/docsite/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/docsite/main.5af442a778040b828313.css" />

<link rel="stylesheet" type="text/css" href="/docsite/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/docsite/2.702de9bbb01fe4f46fa1.css" />

<link rel="stylesheet" type="text/css" href="/docsite/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css" />

<link rel="stylesheet" type="text/css" href="/docsite/component---theme-doc-legacy-item-031-769.1f1ce10374de019f5d3a.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="/docsite/img/logo.svg" alt="ThinkBucket Logo"/><strong>ThinkBucket</strong></a><a class="navbar__item navbar__link" label="React" position="left" href="/docsite/docs/react/1.basic/jsx">React</a><a class="navbar__item navbar__link" label="Docs" position="left" href="/docsite/docs/doc1">Docs</a><a class="navbar__item navbar__link" label="Blog" position="left" href="/docsite/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="/docsite/img/logo.svg" alt="ThinkBucket Logo"/><strong>ThinkBucket</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="React" position="left" href="/docsite/docs/react/1.basic/jsx">React</a></li><li class="menu__list-item"><a class="menu__link" label="Docs" position="left" href="/docsite/docs/doc1">Docs</a></li><li class="menu__list-item"><a class="menu__link" label="Blog" position="left" href="/docsite/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_Qb2S"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1uhT" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">1.组件基础</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/jsx">JSX</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/lifecycle">生命周期</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/state">状态</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/communication">通信</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/category">种类</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/event">事件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/style">样式</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">2.组件进阶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/render-props">Render Props</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/hoc">HOC</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docsite/docs/react/2.advanced/hooks">Hooks</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/context">Context</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/portal">Portal</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">3.组件开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.development/ui-component">UI组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.development/redux-component">Redux组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.development/pure-component">纯组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.development/performance">性能分析</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">4.状态管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/redux">Redux</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/store">Store</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/reducer">Reducer</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/action">Action</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/selector">Selector</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/middleware">Middleware</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.state-management/model">Model</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">5.路由管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.router-management/router">Router</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.router-management/route">Route</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.router-management/link">Link</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">6.测试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.test/test-category">测试种类</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.test/unit-test">单元测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.test/component-test">组件测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.test/state-test">状态测试</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">7.安全规约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/security-guide">安全规约</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">附录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/appendix1-references">附录A 参考资料</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/appendix2-related-websites">附录B 常用网站</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_3Gws"><header><h1 class="margin-bottom--lg">Hooks</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="什么是state-hooks？"></a><a aria-hidden="true" class="hash-link" href="#什么是state-hooks？">#</a>什么是State Hooks？</h2><p>看一个例子，我们分解来看到底state hooks做了什么：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="声明一个状态变量"></a><a aria-hidden="true" class="hash-link" href="#声明一个状态变量">#</a>声明一个状态变量</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><code>useState</code>是react自带的一个hook函数，它的作用就是用来声明状态变量。<code>useState</code>这个函数接收的参数是我们的状态初始值（initial state），它返回了一个数组，这个数组的第<code>[0]</code>项是当前当前的<strong>状态值</strong>，第<code>[1]</code>项是可以改变状态值的<strong>方法函数</strong>。</p><p>所以我们做的事情其实就是，声明了一个状态变量count，把它的初始值设为0，同时提供了一个可以更改count的函数setCount。</p><h3><a aria-hidden="true" class="anchor" id="读取状态值"></a><a aria-hidden="true" class="hash-link" href="#读取状态值">#</a>读取状态值</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>很简单，因为我们的状态count就是一个单纯的变量而已，我们再也不需要写成<code>{this.state.count}</code>这样了。</p><h3><a aria-hidden="true" class="anchor" id="更新状态"></a><a aria-hidden="true" class="hash-link" href="#更新状态">#</a>更新状态</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>当用户点击按钮时，我们调用setCount函数，这个函数接收的参数是修改过的新状态值。接下来的事情就交给react了，react将会重新渲染我们的Example组件，并且使用的是更新后的新的状态，即<code>count=1</code>。这里我们要停下来思考一下，Example本质上也是一个普通的函数，为什么它可以记住之前的状态？</p><h3><a aria-hidden="true" class="anchor" id="假如一个组件有多个状态值怎么办？"></a><a aria-hidden="true" class="hash-link" href="#假如一个组件有多个状态值怎么办？">#</a>假如一个组件有多个状态值怎么办？</h3><p>首先，useState是可以多次调用的，所以我们完全可以这样写：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">ExampleWithManyStates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setAge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">todos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setTodos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>其次，useState接收的初始值没有规定一定要是string/number/boolean这种简单数据类型，它完全<strong>可以接收对象或者数组作为参数</strong>。最后，react也给我们提供了一个<code>useReducer</code>的hook，如果你更喜欢redux式的状态管理方案的话。</p><blockquote><p><strong>注意</strong>：之前我们的<code>this.setState</code>做的是<strong>合并状态</strong>后返回一个新状态，而<code>useState</code>是直接<strong>替换</strong>老状态后返回新状态。</p></blockquote><p>从<code>ExampleWithManyStates</code>函数我们可以看到，<code>useState</code>无论调用多少次，相互之间是独立的。这一点至关重要。为什么这么说呢？</p><p>其实我们看hook的“形态”，有点类似之前被官方否定掉的Mixins这种方案，都是提供一种“插拔式的功能注入”的能力。而mixins之所以被否定，是因为<strong>Mixins机制是让多个Mixins共享一个对象的数据空间</strong>，这样就很难确保不同Mixins依赖的状态不发生冲突。</p><p>而现在我们的hook，一方面它是直接用在function当中，而不是class；另一方面每一个hook都是相互独立的，<strong>不同组件调用同一个hook也能保证各自状态的独立性。</strong>这就是两者的本质区别了。</p><h3><a aria-hidden="true" class="anchor" id="react是怎么保证多个usestate的相互独立的？"></a><a aria-hidden="true" class="hash-link" href="#react是怎么保证多个usestate的相互独立的？">#</a>React是怎么保证多个useState的相互独立的？</h3><p>还是看上面给出的<code>ExampleWithManyStates</code>例子，我们调用了三次<code>useState</code>，每次我们传的参数只是一个值（如42，‘banana’）<em>，</em>我们根本没有告诉react这些值对应的key是哪个，那react是怎么保证这三个useState找到它对应的state呢？</p><blockquote><p><strong>Tips</strong>：React是根据<code>useState</code>出现的顺序来定的。</p></blockquote><p>我们具体来看一下：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第一次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将age初始化为42</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将fruit初始化为banana</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第二次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量age的值（这时候传的参数42直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量fruit的值（这时候传的参数banana直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>假如我们改一下代码：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> showFruit </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">ExampleWithManyStates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setAge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">showFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    showFruit </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">todos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setTodos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这样一来：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第一次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将age初始化为42</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将fruit初始化为banana</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第二次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量age的值（这时候传的参数42直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// useState(&#x27;banana&#x27;);  </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取到的却是状态变量fruit的值，导致报错</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><blockquote><p><strong>强制</strong>：React规定我们必须把hooks写在函数的最外层，不能写在<code>ifelse</code>等条件语句当中，来确保hooks的执行顺序一致。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="effect-hooks"></a><a aria-hidden="true" class="hash-link" href="#effect-hooks">#</a>Effect Hooks</h2><p>我们在上一节的例子中增加一个新功能：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> useEffect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 类似于componentDidMount 和 componentDidUpdate:</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 更新文档的标题</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们对比着看一下，如果没有hooks，我们会怎么写？</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Example</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">React</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 139)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">super</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">state </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidMount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation keyword" style="color:rgb(127, 219, 202)">this</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidUpdate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation keyword" style="color:rgb(127, 219, 202)">this</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(127, 219, 202)">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setState</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> count</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(127, 219, 202)">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">state</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">          Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们写的有状态组件，通常会产生很多的副作用（side effect），比如发起ajax请求获取数据，添加一些监听的注册和取消注册，手动修改dom等等。我们之前都把这些副作用的函数写在生命周期函数钩子里，比如<code>componentDidMount</code>，<code>componentDidUpdate</code>和<code>componentWillUnmount</code>。而现在的<code>useEffect</code>就相当与这些声明周期函数钩子的集合体。它以一抵三。</p><p>同时，由于前文所说hooks可以反复多次使用，相互独立。所以我们合理的做法是，给每一个副作用一个单独的<code>useEffect</code>钩子。这样一来，这些副作用不再一股脑堆在生命周期钩子里，代码变得更加清晰。</p><h3><a aria-hidden="true" class="anchor" id="useeffect做了什么？"></a><a aria-hidden="true" class="hash-link" href="#useeffect做了什么？">#</a>useEffect做了什么？</h3><p>我们再梳理一遍下面代码的逻辑：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>首先，我们声明了一个状态变量<code>count</code>，将它的初始值设为0。然后我们告诉react，我们的这个组件有一个副作用。我们给<code>useEffect</code>hook传了一个匿名函数，这个匿名函数就是我们的副作用。</p><p>在这个例子里，我们的副作用是调用browser API来修改文档标题。当react要渲染我们的组件时，它会先记住我们用到的副作用。等react更新了DOM之后，它再依次执行我们定义的副作用函数。</p><p>这里要注意几点：</p><p>第一，react首次渲染和之后的每次渲染都会调用一遍传给<code>useEffect</code>的函数。而之前我们要用两个声明周期函数来分别表示首次渲染（<code>componentDidMount</code>），和之后的更新导致的重新渲染（<code>componentDidUpdate</code>）。</p><p>第二，<code>useEffect</code>中定义的副作用函数的执行不会阻碍浏览器更新视图，也就是说这些函数是<strong>异步</strong>执行的，而之前的<code>componentDidMount</code>或<code>componentDidUpdate</code>中的代码则是同步执行的。</p><p>这种安排对大多数副作用说都是合理的，但有的情况除外，比如我们有时候需要先根据DOM计算出某个元素的尺寸再重新渲染，这时候我们希望这次重新渲染是同步发生的，也就是说它会在浏览器真的去绘制这个页面前发生。</p><h3><a aria-hidden="true" class="anchor" id="useeffect怎么解绑一些副作用"></a><a aria-hidden="true" class="hash-link" href="#useeffect怎么解绑一些副作用">#</a>useEffect怎么解绑一些副作用?</h3><p>这种场景很常见，当我们在<code>componentDidMount</code>里添加了一个注册，我们得马上在<code>componentWillUnmount</code>中，也就是<strong>组件被注销之前</strong>清除掉我们添加的注册，否则<strong>内存泄漏</strong>的问题就出现了。</p><p>怎么清除呢？让我们传给<code>useEffect</code>的副作用函数返回一个新的函数即可。这个新的函数将会在组件下一次重新渲染之后执行。这种模式在一些pubsub模式的实现中很常见。看下面的例子：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> useEffect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">FriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">isOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setIsOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">setIsOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">isOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 一定注意下这个顺序：告诉react在下次重新渲染组件之后，同时是下次调用ChatAPI.subscribeToFriendStatus之前执行cleanup</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cleanup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">isOnline </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Loading...&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> isOnline </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Online&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Offline&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这里有一个点需要重视！这种解绑的模式跟<code>componentWillUnmount</code>不一样。<code>componentWillUnmount</code>只会在组件被销毁前执行一次而已，而<code>useEffect</code>里的函数，每次组件渲染后都会执行一遍，包括副作用函数返回的这个清理函数也会重新执行一遍。所以我们一起来看一下下面这个问题。</p><h3><a aria-hidden="true" class="anchor" id="为什么要让副作用函数每次组件更新都执行一遍？"></a><a aria-hidden="true" class="hash-link" href="#为什么要让副作用函数每次组件更新都执行一遍？">#</a>为什么要让副作用函数每次组件更新都执行一遍？</h3><p>我们先看以前的模式：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">componentDidMount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentWillUnmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们在<code>componentDidMount</code>注册，再在componentWillUnmount清除注册。但假如这时候<code>props.friend.id</code>变了怎么办？我们不得不再添加一个<code>componentDidUpdate</code>来处理这种情况：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidUpdate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">prevProps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 先把上一个friend.id解绑</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      prevProps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 再重新注册新但friend.id</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token operator" style="color:rgb(127, 219, 202)">...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>看到了吗？很繁琐，而我们但useEffect则没这个问题，因为它在每次组件更新后都会重新执行一遍。所以代码的执行顺序是这样的：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-text codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">1.页面首次渲染</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">2.替friend.id=1的朋友注册</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">3.突然friend.id变成了2</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">4.页面重新渲染</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">5.清除friend.id=1的绑定</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">6.替friend.id=2的朋友注册</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="怎么跳过一些不必要的副作用函数"></a><a aria-hidden="true" class="hash-link" href="#怎么跳过一些不必要的副作用函数">#</a>怎么跳过一些不必要的副作用函数</h3><p>按照上一节的思路，每次重新渲染都要执行一遍这些副作用函数，显然是不经济的。怎么跳过一些不必要的计算呢？我们只需要给useEffect传第二个参数即可。用第二个参数来告诉react只有当这个参数的值发生改变时，才执行我们传的副作用函数（第一个参数）。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 只有当count的值发生变化时，才会重新执行`document.title`这一句</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>当我们第二个参数传一个空数组<!-- -->[<!-- -->]<!-- -->时，其实就相当于只在首次渲染的时候执行。也就是<code>componentDidMount</code>加<code>componentWillUnmount</code>的模式。不过这种用法可能带来bug，少用。</p></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docsite/docs/react/2.advanced/hoc"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->HOC</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docsite/docs/react/2.advanced/context"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Context<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2wxO"><ul class="contents contents__left-border"><li><a href="#什么是state-hooks？" class="contents__link">什么是State Hooks？</a><ul class=""><li><a href="#声明一个状态变量" class="contents__link">声明一个状态变量</a></li><li><a href="#读取状态值" class="contents__link">读取状态值</a></li><li><a href="#更新状态" class="contents__link">更新状态</a></li><li><a href="#假如一个组件有多个状态值怎么办？" class="contents__link">假如一个组件有多个状态值怎么办？</a></li><li><a href="#react是怎么保证多个usestate的相互独立的？" class="contents__link">React是怎么保证多个useState的相互独立的？</a></li></ul></li><li><a href="#effect-hooks" class="contents__link">Effect Hooks</a><ul class=""><li><a href="#useeffect做了什么？" class="contents__link">useEffect做了什么？</a></li><li><a href="#useeffect怎么解绑一些副作用" class="contents__link">useEffect怎么解绑一些副作用?</a></li><li><a href="#为什么要让副作用函数每次组件更新都执行一遍？" class="contents__link">为什么要让副作用函数每次组件更新都执行一遍？</a></li><li><a href="#怎么跳过一些不必要的副作用函数" class="contents__link">怎么跳过一些不必要的副作用函数</a></li></ul></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/docsite/runtime~main.08e011c509c3e14482bd.js"></script>

<script type="text/javascript" src="/docsite/main.1327fab92a7f01990c21.js"></script>

<script type="text/javascript" src="/docsite/0.0048f5f93262716a8305.js"></script>

<script type="text/javascript" src="/docsite/1.3e7309d681e3cfa4ccaf.js"></script>

<script type="text/javascript" src="/docsite/2.3c84b51b285ce3e043f8.js"></script>

<script type="text/javascript" src="/docsite/component---theme-doc-legacy-page-9-e-7-ca5.9d6c43606139fcc73a3b.js"></script>

<script type="text/javascript" src="/docsite/docsMetadata---docsite-docs-6-dd-ccc.4f95eed2f63796e64261.js"></script>

<script type="text/javascript" src="/docsite/component---theme-doc-legacy-item-031-769.e3d3e1c8418c84422cd5.js"></script>

<script type="text/javascript" src="/docsite/content---docsite-docs-react-2-advanced-hooksaec-e85.28849f2b1b99dbce0ae7.js"></script>

<script type="text/javascript" src="/docsite/metadata---docsite-docs-react-2-advanced-hooksfbd-7b0.b500f1271e85d6f5d7e8.js"></script>

</body>
</html>