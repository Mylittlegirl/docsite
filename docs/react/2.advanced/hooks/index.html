<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/docsite/main.5af442a778040b828313.css","/docsite/main.d06546e487dc797bd8ac.js"],"component---site-src-pages-index-jsc-4-f-f99":["/docsite/component---site-src-pages-index-jsc-4-f-f99.9f99729bff7f082bd679.css","/docsite/component---site-src-pages-index-jsc-4-f-f99.5c889b0f620a328afa95.js"],"component---theme-blog-post-pageccc-cab":["/docsite/component---theme-blog-post-pageccc-cab.e6dde2a300810661ecab.js"],"content---docsite-blog-welcome-286-fbe":["/docsite/content---docsite-blog-welcome-286-fbe.e4dda0a741e7612a3f1e.js"],"metadata---docsite-blog-welcome-769-d0e":["/docsite/metadata---docsite-blog-welcome-769-d0e.a297636d420f952e7e01.js"],"nextItem---docsite-blog-welcome-552-1b1":["/docsite/nextItem---docsite-blog-welcome-552-1b1.6b714ac1d6e24b33c3de.js"],"content---docsite-blog-hello-worldd-61-877":["/docsite/content---docsite-blog-hello-worldd-61-877.7840aa042d765b7ed7a2.js"],"nextItem---docsite-blog-hello-worldeec-c62":["/docsite/nextItem---docsite-blog-hello-worldeec-c62.ce4f4db41ff60693bea7.js"],"content---docsite-blog-holabdd-cc6":["/docsite/content---docsite-blog-holabdd-cc6.4984610d0f3c8fdeab7a.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/docsite/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css","/docsite/component---theme-doc-legacy-page-9-e-7-ca5.5b47f0371000b8c7d8d4.js"],"docsMetadata---docsite-docs-6-dd-ccc":["/docsite/docsMetadata---docsite-docs-6-dd-ccc.5fea84d1c5a7ccdc9fac.js"],"component---theme-doc-legacy-item-031-769":["/docsite/component---theme-doc-legacy-item-031-769.1f1ce10374de019f5d3a.css","/docsite/component---theme-doc-legacy-item-031-769.e6f33864712b7af8c452.js"],"content---docsite-docs-doc-1-b-2-f-57e":["/docsite/content---docsite-docs-doc-1-b-2-f-57e.69c46af2898988585f5e.js"],"metadata---docsite-docs-doc-13-f-5-2b6":["/docsite/metadata---docsite-docs-doc-13-f-5-2b6.938d1466fa873bc82e54.js"],"content---docsite-docs-mdxce-3-ecf":["/docsite/content---docsite-docs-mdxce-3-ecf.bc7fb346fa1d169db090.js"],"metadata---docsite-docs-mdxdf-5-7ef":["/docsite/metadata---docsite-docs-mdxdf-5-7ef.3724f1ddcb7349168f48.js"],"content---docsite-docs-react-security-guidec-54-c4b":["/docsite/content---docsite-docs-react-security-guidec-54-c4b.b0aed9597ccccb87b8aa.js"],"metadata---docsite-docs-react-security-guidec-8-a-e29":["/docsite/metadata---docsite-docs-react-security-guidec-8-a-e29.f26ec8158932d18c789b.js"],"content---docsite-docs-doc-2-df-3-e73":["/docsite/content---docsite-docs-doc-2-df-3-e73.ff5646798604379792a2.js"],"metadata---docsite-docs-doc-2-cd-2-869":["/docsite/metadata---docsite-docs-doc-2-cd-2-869.c548ad6ed52918f95570.js"],"content---docsite-docs-react-appendix-1-references-14-f-380":["/docsite/content---docsite-docs-react-appendix-1-references-14-f-380.c71130246c42c16e6aca.js"],"metadata---docsite-docs-react-appendix-1-references-5-bc-3c7":["/docsite/metadata---docsite-docs-react-appendix-1-references-5-bc-3c7.c5c8613743894fcb92d0.js"],"content---docsite-docs-doc-3616-679":["/docsite/content---docsite-docs-doc-3616-679.0b4a51701c75e79aad27.js"],"metadata---docsite-docs-doc-3-cf-9-b82":["/docsite/metadata---docsite-docs-doc-3-cf-9-b82.dc9b9449aedd62718ac3.js"],"content---docsite-docs-react-appendix-2-related-websitesc-28-0af":["/docsite/content---docsite-docs-react-appendix-2-related-websitesc-28-0af.d15d03788d238e4ef71a.js"],"metadata---docsite-docs-react-appendix-2-related-websitesd-88-f2c":["/docsite/metadata---docsite-docs-react-appendix-2-related-websitesd-88-f2c.e61aece67deffebc6fe6.js"],"content---docsite-docs-react-readme-377-926":["/docsite/content---docsite-docs-react-readme-377-926.28c7de4d8b07370c3ff8.js"],"metadata---docsite-docs-react-readme-0-d-3-7c3":["/docsite/metadata---docsite-docs-react-readme-0-d-3-7c3.bdab30f508ac7065ac60.js"],"content---docsite-docs-algorithm-11-reverse-reverse-integerb-7-a-38b":["/docsite/content---docsite-docs-algorithm-11-reverse-reverse-integerb-7-a-38b.25bacaff7c842ac1ba2a.js"],"metadata---docsite-docs-algorithm-11-reverse-reverse-integer-939-980":["/docsite/metadata---docsite-docs-algorithm-11-reverse-reverse-integer-939-980.41f9c161a6c41b17951f.js"],"content---docsite-docs-algorithm-1-array-duplicated-number-in-array-2-e-8-ddb":["/docsite/content---docsite-docs-algorithm-1-array-duplicated-number-in-array-2-e-8-ddb.aafead8af5c7a9cb73b1.js"],"metadata---docsite-docs-algorithm-1-array-duplicated-number-in-array-51-b-3c9":["/docsite/metadata---docsite-docs-algorithm-1-array-duplicated-number-in-array-51-b-3c9.d905377eee5640cd75c9.js"],"content---docsite-docs-react-shuo-ming-273-7d2":["/docsite/content---docsite-docs-react-shuo-ming-273-7d2.4380a5056d22ccfd1a17.js"],"metadata---docsite-docs-react-shuo-ming-7-b-8-07d":["/docsite/metadata---docsite-docs-react-shuo-ming-7-b-8-07d.c1269ca1908864a6e2f5.js"],"content---docsite-docs-algorithm-11-reverse-reverse-linked-list-459-ddb":["/docsite/content---docsite-docs-algorithm-11-reverse-reverse-linked-list-459-ddb.4832e4cfd7e2d2465412.js"],"metadata---docsite-docs-algorithm-11-reverse-reverse-linked-list-866-42e":["/docsite/metadata---docsite-docs-algorithm-11-reverse-reverse-linked-list-866-42e.71658c6a237ef97cbc5b.js"],"content---docsite-docs-algorithm-5-binary-tree-build-tree-01-d-826":["/docsite/content---docsite-docs-algorithm-5-binary-tree-build-tree-01-d-826.32245bb6de645a5c0e7d.js"],"metadata---docsite-docs-algorithm-5-binary-tree-build-tree-9-c-7-24e":["/docsite/metadata---docsite-docs-algorithm-5-binary-tree-build-tree-9-c-7-24e.ae45a53506c7cd274376.js"],"content---docsite-docs-algorithm-4-linkedlist-merge-two-sorted-lists-159-257":["/docsite/content---docsite-docs-algorithm-4-linkedlist-merge-two-sorted-lists-159-257.b26db29a297ecb5e9174.js"],"metadata---docsite-docs-algorithm-4-linkedlist-merge-two-sorted-lists-3-ff-978":["/docsite/metadata---docsite-docs-algorithm-4-linkedlist-merge-two-sorted-lists-3-ff-978.77630155bd6c3e416676.js"],"content---docsite-docs-algorithm-3-stack-queue-min-stack-332-404":["/docsite/content---docsite-docs-algorithm-3-stack-queue-min-stack-332-404.a415b19ec52a9763d019.js"],"metadata---docsite-docs-algorithm-3-stack-queue-min-stackc-5-d-21b":["/docsite/metadata---docsite-docs-algorithm-3-stack-queue-min-stackc-5-d-21b.d0df7d7fc120fef07778.js"],"content---docsite-docs-algorithm-12-math-powx-n-9-c-8-419":["/docsite/content---docsite-docs-algorithm-12-math-powx-n-9-c-8-419.91bf0a994e3a2bc4ca30.js"],"metadata---docsite-docs-algorithm-12-math-powx-n-774-a51":["/docsite/metadata---docsite-docs-algorithm-12-math-powx-n-774-a51.8166303864ad5224d585.js"],"content---docsite-docs-algorithm-5-binary-tree-mirror-treef-6-a-cb3":["/docsite/content---docsite-docs-algorithm-5-binary-tree-mirror-treef-6-a-cb3.3ddc26219ac003511e38.js"],"metadata---docsite-docs-algorithm-5-binary-tree-mirror-tree-11-d-459":["/docsite/metadata---docsite-docs-algorithm-5-binary-tree-mirror-tree-11-d-459.f643be39b988e821021a.js"],"content---docsite-docs-algorithm-9-search-number-same-as-index-22-d-849":["/docsite/content---docsite-docs-algorithm-9-search-number-same-as-index-22-d-849.b46824e7dd83f90413ce.js"],"metadata---docsite-docs-algorithm-9-search-number-same-as-indexe-6-c-fc9":["/docsite/metadata---docsite-docs-algorithm-9-search-number-same-as-indexe-6-c-fc9.0cb3649ebe420a28e5c0.js"],"content---docsite-docs-algorithm-8-sort-quick-sort-03-d-9e9":["/docsite/content---docsite-docs-algorithm-8-sort-quick-sort-03-d-9e9.a85d1941cc8fd176ea76.js"],"metadata---docsite-docs-algorithm-8-sort-quick-sortdc-4-1cb":["/docsite/metadata---docsite-docs-algorithm-8-sort-quick-sortdc-4-1cb.b97c8f0b73e1fcc30be2.js"],"content---docsite-docs-algorithm-11-reverse-rotate-string-278-e01":["/docsite/content---docsite-docs-algorithm-11-reverse-rotate-string-278-e01.fa037c497417e34156f0.js"],"metadata---docsite-docs-algorithm-11-reverse-rotate-stringb-04-7ca":["/docsite/metadata---docsite-docs-algorithm-11-reverse-rotate-stringb-04-7ca.27e997270a7def27bcf1.js"],"content---docsite-docs-algorithm-9-search-number-in-sorted-arrayf-03-3c5":["/docsite/content---docsite-docs-algorithm-9-search-number-in-sorted-arrayf-03-3c5.57ead1c3a59bf7d8023a.js"],"metadata---docsite-docs-algorithm-9-search-number-in-sorted-array-9-c-7-f70":["/docsite/metadata---docsite-docs-algorithm-9-search-number-in-sorted-array-9-c-7-f70.1dcaea202c737b6566d7.js"],"content---docsite-docs-react-1-app-zong-lan-readm-ef-0-a-0b1":["/docsite/content---docsite-docs-react-1-app-zong-lan-readm-ef-0-a-0b1.15253cad7d1ce109eb67.js"],"metadata---docsite-docs-react-1-app-zong-lan-readme-0-f-8-485":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-readme-0-f-8-485.54936092e51858579a6e.js"],"content---docsite-docs-algorithm-8-sort-merged-sort-1-f-8-685":["/docsite/content---docsite-docs-algorithm-8-sort-merged-sort-1-f-8-685.90ba5fcee772289b9fe0.js"],"metadata---docsite-docs-algorithm-8-sort-merged-sort-7-cb-901":["/docsite/metadata---docsite-docs-algorithm-8-sort-merged-sort-7-cb-901.f213a2ec467814cb138a.js"],"content---docsite-docs-algorithm-9-search-missing-numberad-5-b21":["/docsite/content---docsite-docs-algorithm-9-search-missing-numberad-5-b21.ffb9ebc18af52a7f2886.js"],"metadata---docsite-docs-algorithm-9-search-missing-number-600-b5b":["/docsite/metadata---docsite-docs-algorithm-9-search-missing-number-600-b5b.3b332806bd27d2bf9809.js"],"content---docsite-docs-react-1-basic-evente-9-b-30b":["/docsite/content---docsite-docs-react-1-basic-evente-9-b-30b.bf98a4186eaecd100183.js"],"metadata---docsite-docs-react-1-basic-eventa-09-980":["/docsite/metadata---docsite-docs-react-1-basic-eventa-09-980.4b84edc8e17e8129a1c4.js"],"content---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-ming-381-462":["/docsite/content---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-ming-381-462.0a503e83ab7f592dd43f.js"],"metadata---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-mingbcf-ecd":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-wen-jian-he-wen-jian-jia-shuo-mingbcf-ecd.a8472b2dff294a6023f4.js"],"content---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-53-a-f80":["/docsite/content---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-53-a-f80.be83dbd7372e657720b3.js"],"metadata---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-4-ae-67c":["/docsite/metadata---docsite-docs-react-1-app-zong-lan-mu-lu-jie-gou-4-ae-67c.dad5b4247299a21d12f6.js"],"content---docsite-docs-react-1-basic-readm-ec-5-a-742":["/docsite/content---docsite-docs-react-1-basic-readm-ec-5-a-742.0235fa1a930927f655a0.js"],"metadata---docsite-docs-react-1-basic-readme-0-e-0-acd":["/docsite/metadata---docsite-docs-react-1-basic-readme-0-e-0-acd.c0823ffe92dafaf022bc.js"],"content---docsite-docs-react-1-basic-categoryb-79-31f":["/docsite/content---docsite-docs-react-1-basic-categoryb-79-31f.440ef8dbe53711491cd4.js"],"metadata---docsite-docs-react-1-basic-category-453-065":["/docsite/metadata---docsite-docs-react-1-basic-category-453-065.75a576e9b1711b93d100.js"],"content---docsite-docs-react-1-basic-communicationef-2-b0f":["/docsite/content---docsite-docs-react-1-basic-communicationef-2-b0f.39814a83c0b399437379.js"],"metadata---docsite-docs-react-1-basic-communication-567-9ee":["/docsite/metadata---docsite-docs-react-1-basic-communication-567-9ee.ee3c93cfe71ca8d0e807.js"],"content---docsite-docs-react-1-basic-stateb-58-0ab":["/docsite/content---docsite-docs-react-1-basic-stateb-58-0ab.232e9b3dc74861641ab9.js"],"metadata---docsite-docs-react-1-basic-state-8-bd-531":["/docsite/metadata---docsite-docs-react-1-basic-state-8-bd-531.7658def2d73eb051dcf3.js"],"content---docsite-docs-react-1-basic-jsx-6-ce-242":["/docsite/content---docsite-docs-react-1-basic-jsx-6-ce-242.c70946fa19e0ba463b55.js"],"metadata---docsite-docs-react-1-basic-jsx-295-0d0":["/docsite/metadata---docsite-docs-react-1-basic-jsx-295-0d0.e656099b7d18121ba9a9.js"],"content---docsite-docs-react-1-basic-lifecycle-58-a-ea4":["/docsite/content---docsite-docs-react-1-basic-lifecycle-58-a-ea4.e83b560daa948d5ab085.js"],"metadata---docsite-docs-react-1-basic-lifecycle-962-1c3":["/docsite/metadata---docsite-docs-react-1-basic-lifecycle-962-1c3.9a5d2575bc951a45eae1.js"],"content---docsite-docs-react-2-advanced-hoc-033-f9b":["/docsite/content---docsite-docs-react-2-advanced-hoc-033-f9b.f8b6dd101516024cb561.js"],"metadata---docsite-docs-react-2-advanced-hoc-70-e-184":["/docsite/metadata---docsite-docs-react-2-advanced-hoc-70-e-184.011d009803ce03dd590d.js"],"content---docsite-docs-react-2-advanced-hooksaec-e85":["/docsite/content---docsite-docs-react-2-advanced-hooksaec-e85.9634f376f9f34a2156d8.js"],"metadata---docsite-docs-react-2-advanced-hooksfbd-7b0":["/docsite/metadata---docsite-docs-react-2-advanced-hooksfbd-7b0.42e1b9c4a1f193353e6c.js"],"content---docsite-docs-react-1-basic-style-608-23e":["/docsite/content---docsite-docs-react-1-basic-style-608-23e.ed39519c6112bfaeaa38.js"],"metadata---docsite-docs-react-1-basic-style-57-d-5e7":["/docsite/metadata---docsite-docs-react-1-basic-style-57-d-5e7.30e77b1accf2c1d91e3c.js"],"content---docsite-docs-react-2-advanced-portal-0-f-7-7e4":["/docsite/content---docsite-docs-react-2-advanced-portal-0-f-7-7e4.98ffced7a20a80a000c3.js"],"metadata---docsite-docs-react-2-advanced-portale-57-1ff":["/docsite/metadata---docsite-docs-react-2-advanced-portale-57-1ff.75e7c99ff29280340c48.js"],"content---docsite-docs-react-2-advanced-contextfc-8-3ee":["/docsite/content---docsite-docs-react-2-advanced-contextfc-8-3ee.e49557bbc5347adf73be.js"],"metadata---docsite-docs-react-2-advanced-contextfb-8-65a":["/docsite/metadata---docsite-docs-react-2-advanced-contextfb-8-65a.2da4f1d8f944b84d001e.js"],"content---docsite-docs-react-2-advanced-render-propse-18-eaf":["/docsite/content---docsite-docs-react-2-advanced-render-propse-18-eaf.dbf3dc46f40a5463303b.js"],"metadata---docsite-docs-react-2-advanced-render-props-80-d-af8":["/docsite/metadata---docsite-docs-react-2-advanced-render-props-80-d-af8.ba5636ca167d5ec20e99.js"],"content---docsite-docs-react-3-optimization-code-splittingac-6-619":["/docsite/content---docsite-docs-react-3-optimization-code-splittingac-6-619.64beca5cc1a7b9a20660.js"],"metadata---docsite-docs-react-3-optimization-code-splitting-75-c-66f":["/docsite/metadata---docsite-docs-react-3-optimization-code-splitting-75-c-66f.28e55ee089edf04193fd.js"],"content---docsite-docs-react-3-optimization-performance-2-f-9-d3f":["/docsite/content---docsite-docs-react-3-optimization-performance-2-f-9-d3f.65925bc1608f7f39b59f.js"],"metadata---docsite-docs-react-3-optimization-performance-974-f77":["/docsite/metadata---docsite-docs-react-3-optimization-performance-974-f77.c2be9eee6eb42367b946.js"],"content---docsite-docs-react-3-optimization-pure-component-5-e-9-dbd":["/docsite/content---docsite-docs-react-3-optimization-pure-component-5-e-9-dbd.8afc40d45d32bc0a06c5.js"],"metadata---docsite-docs-react-3-optimization-pure-component-372-63b":["/docsite/metadata---docsite-docs-react-3-optimization-pure-component-372-63b.27d2e208b4d3fccc92ff.js"],"content---docsite-docs-react-3-optimization-suspense-579-7ac":["/docsite/content---docsite-docs-react-3-optimization-suspense-579-7ac.b2c806ab932cb4d9c9bc.js"],"metadata---docsite-docs-react-3-optimization-suspense-2-ec-66d":["/docsite/metadata---docsite-docs-react-3-optimization-suspense-2-ec-66d.861f204cf017d9fe604c.js"],"content---docsite-docs-react-4-three-components-container-component-68-a-227":["/docsite/content---docsite-docs-react-4-three-components-container-component-68-a-227.8e3ec652cb561b597fab.js"],"metadata---docsite-docs-react-4-three-components-container-componentf-40-40c":["/docsite/metadata---docsite-docs-react-4-three-components-container-componentf-40-40c.08fe96c6af4a42854187.js"],"content---docsite-docs-react-4-three-components-ui-component-782-cb9":["/docsite/content---docsite-docs-react-4-three-components-ui-component-782-cb9.4651a640a8723bccd6c5.js"],"metadata---docsite-docs-react-4-three-components-ui-componentddd-d8f":["/docsite/metadata---docsite-docs-react-4-three-components-ui-componentddd-d8f.e78f966598abb10125ce.js"],"content---docsite-docs-react-5-state-management-middlewaree-1-f-364":["/docsite/content---docsite-docs-react-5-state-management-middlewaree-1-f-364.fbdeda9f343d7d8d63f7.js"],"metadata---docsite-docs-react-5-state-management-middleware-396-5f0":["/docsite/metadata---docsite-docs-react-5-state-management-middleware-396-5f0.2c51e16b0ef9d6fc3943.js"],"content---docsite-docs-react-5-state-management-action-607-3e6":["/docsite/content---docsite-docs-react-5-state-management-action-607-3e6.9669835a07293fae9140.js"],"metadata---docsite-docs-react-5-state-management-action-85-c-aa3":["/docsite/metadata---docsite-docs-react-5-state-management-action-85-c-aa3.7aba7586c8738d16fb7b.js"],"content---docsite-docs-react-5-state-management-reducer-213-f18":["/docsite/content---docsite-docs-react-5-state-management-reducer-213-f18.7d08ebd50feeacc54e70.js"],"metadata---docsite-docs-react-5-state-management-reducerefa-8c9":["/docsite/metadata---docsite-docs-react-5-state-management-reducerefa-8c9.9dfbb31a58bd1312cad1.js"],"content---docsite-docs-react-3-optimization-memo-358-d02":["/docsite/content---docsite-docs-react-3-optimization-memo-358-d02.45c14185c84f522318d2.js"],"metadata---docsite-docs-react-3-optimization-memo-7-aa-76c":["/docsite/metadata---docsite-docs-react-3-optimization-memo-7-aa-76c.7d19b3d219be9d5836b9.js"],"content---docsite-docs-react-5-state-management-reduxc-48-ecd":["/docsite/content---docsite-docs-react-5-state-management-reduxc-48-ecd.0b65aee324e11ce069e8.js"],"metadata---docsite-docs-react-5-state-management-redux-63-f-555":["/docsite/metadata---docsite-docs-react-5-state-management-redux-63-f-555.ffd97634e68bfa6fad07.js"],"content---docsite-docs-react-5-state-management-stored-0-c-9e4":["/docsite/content---docsite-docs-react-5-state-management-stored-0-c-9e4.ba85a3b2a72c685aceca.js"],"metadata---docsite-docs-react-5-state-management-store-495-872":["/docsite/metadata---docsite-docs-react-5-state-management-store-495-872.dfa528f231c6cb416767.js"],"content---docsite-docs-react-5-state-management-model-327-380":["/docsite/content---docsite-docs-react-5-state-management-model-327-380.6280e1c807774fea52a7.js"],"metadata---docsite-docs-react-5-state-management-modelec-8-de1":["/docsite/metadata---docsite-docs-react-5-state-management-modelec-8-de1.cf3318147ca7f802346d.js"],"content---docsite-docs-react-4-three-components-presentational-componentff-2-b33":["/docsite/content---docsite-docs-react-4-three-components-presentational-componentff-2-b33.47022459906d8877d608.js"],"metadata---docsite-docs-react-4-three-components-presentational-component-4-c-7-135":["/docsite/metadata---docsite-docs-react-4-three-components-presentational-component-4-c-7-135.49ae5b22f3bf05a52981.js"],"content---docsite-docs-react-5-state-management-selector-652-951":["/docsite/content---docsite-docs-react-5-state-management-selector-652-951.e105ed60ccc8209c6545.js"],"metadata---docsite-docs-react-5-state-management-selector-6-aa-f5b":["/docsite/metadata---docsite-docs-react-5-state-management-selector-6-aa-f5b.ff5875616a2f79a5a1d1.js"],"content---docsite-docs-react-6-router-management-routee-99-145":["/docsite/content---docsite-docs-react-6-router-management-routee-99-145.318be275192a6282be21.js"],"metadata---docsite-docs-react-6-router-management-routee-36-2ae":["/docsite/metadata---docsite-docs-react-6-router-management-routee-36-2ae.eeb1fe97c02c755d85ca.js"],"content---docsite-docs-react-6-router-management-readm-ee-71-b93":["/docsite/content---docsite-docs-react-6-router-management-readm-ee-71-b93.afb44d45413b295abb19.js"],"metadata---docsite-docs-react-6-router-management-readm-ef-5-b-c6c":["/docsite/metadata---docsite-docs-react-6-router-management-readm-ef-5-b-c6c.95c683b89ac3288694c3.js"],"content---docsite-docs-react-6-router-management-routerd-09-c66":["/docsite/content---docsite-docs-react-6-router-management-routerd-09-c66.89ce9e6397d06f568659.js"],"metadata---docsite-docs-react-6-router-management-router-4-ab-c46":["/docsite/metadata---docsite-docs-react-6-router-management-router-4-ab-c46.7ae85c1df02461c22f8e.js"],"content---docsite-docs-web-1-http-ajax-5-a-1-a10":["/docsite/content---docsite-docs-web-1-http-ajax-5-a-1-a10.06c4b77861a64a18a322.js"],"metadata---docsite-docs-web-1-http-ajaxc-6-c-05f":["/docsite/metadata---docsite-docs-web-1-http-ajaxc-6-c-05f.36229d978b8e1424848b.js"],"content---docsite-docs-web-1-http-http-cache-85-c-259":["/docsite/content---docsite-docs-web-1-http-http-cache-85-c-259.767af7c49bffdbe38e12.js"],"metadata---docsite-docs-web-1-http-http-cache-62-c-fbf":["/docsite/metadata---docsite-docs-web-1-http-http-cache-62-c-fbf.2e3a621698b6a36226a7.js"],"content---docsite-docs-web-1-http-fetch-96-d-718":["/docsite/content---docsite-docs-web-1-http-fetch-96-d-718.e5a402cb23a92c7e17ab.js"],"metadata---docsite-docs-web-1-http-fetchcf-4-f13":["/docsite/metadata---docsite-docs-web-1-http-fetchcf-4-f13.404b14019d3eaf4ddac0.js"],"content---docsite-docs-web-1-http-http-statusdd-5-aa2":["/docsite/content---docsite-docs-web-1-http-http-statusdd-5-aa2.76f2c23538c3a0c679db.js"],"metadata---docsite-docs-web-1-http-http-status-003-aa7":["/docsite/metadata---docsite-docs-web-1-http-http-status-003-aa7.9845242d4fafbb06dee1.js"],"content---docsite-docs-web-1-http-http-connectiond-32-0d6":["/docsite/content---docsite-docs-web-1-http-http-connectiond-32-0d6.42184ce621dd2f772e72.js"],"metadata---docsite-docs-web-1-http-http-connection-60-c-80b":["/docsite/metadata---docsite-docs-web-1-http-http-connection-60-c-80b.338377e68609dcb5f293.js"],"content---docsite-docs-web-1-http-http-2972-eb7":["/docsite/content---docsite-docs-web-1-http-http-2972-eb7.cfc0c70a8302aea9b8b6.js"],"metadata---docsite-docs-web-1-http-http-236-d-3c4":["/docsite/metadata---docsite-docs-web-1-http-http-236-d-3c4.9dc43c9349bc817266b3.js"],"content---docsite-docs-web-1-http-http-1-1674-fb3":["/docsite/content---docsite-docs-web-1-http-http-1-1674-fb3.b926269d558f513a14f0.js"],"metadata---docsite-docs-web-1-http-http-1-1-f-32-26e":["/docsite/metadata---docsite-docs-web-1-http-http-1-1-f-32-26e.acf167e8584c2c10f2b6.js"],"content---docsite-docs-web-1-http-websocket-4-ca-27e":["/docsite/content---docsite-docs-web-1-http-websocket-4-ca-27e.3992e9e05bad7ebbae39.js"],"metadata---docsite-docs-web-1-http-websocketf-73-e32":["/docsite/metadata---docsite-docs-web-1-http-websocketf-73-e32.efb1df2b64823cbec3fb.js"],"content---docsite-docs-react-7-test-component-test-5-c-7-885":["/docsite/content---docsite-docs-react-7-test-component-test-5-c-7-885.29b36ebfbcd01ea35306.js"],"metadata---docsite-docs-react-7-test-component-test-6-e-2-569":["/docsite/metadata---docsite-docs-react-7-test-component-test-6-e-2-569.93e2b6c0bc0dff88d530.js"],"content---docsite-docs-react-7-test-state-test-3-ad-988":["/docsite/content---docsite-docs-react-7-test-state-test-3-ad-988.3e6a74b7f1cb3bd005b8.js"],"metadata---docsite-docs-react-7-test-state-teste-4-d-a18":["/docsite/metadata---docsite-docs-react-7-test-state-teste-4-d-a18.a0fddf0162e3410faeab.js"],"content---docsite-docs-web-1-http-https-724-bd0":["/docsite/content---docsite-docs-web-1-http-https-724-bd0.4d57ff4b8587e84abdda.js"],"metadata---docsite-docs-web-1-http-httpsd-5-a-aac":["/docsite/metadata---docsite-docs-web-1-http-httpsd-5-a-aac.dce7038da6897ad84a18.js"],"content---docsite-docs-react-7-test-test-category-072-6e4":["/docsite/content---docsite-docs-react-7-test-test-category-072-6e4.fefa24ecf46ed5c70630.js"],"metadata---docsite-docs-react-7-test-test-categoryf-5-c-08f":["/docsite/metadata---docsite-docs-react-7-test-test-categoryf-5-c-08f.48f1db5353d37315e6ba.js"],"content---docsite-docs-web-10-storage-service-workersc-08-b67":["/docsite/content---docsite-docs-web-10-storage-service-workersc-08-b67.44d9cd3da54b8697710e.js"],"metadata---docsite-docs-web-10-storage-service-workers-4-b-9-91e":["/docsite/metadata---docsite-docs-web-10-storage-service-workers-4-b-9-91e.61fadb88c5b0c256ff7b.js"],"content---docsite-docs-web-10-storage-indexed-db-80-e-ec0":["/docsite/content---docsite-docs-web-10-storage-indexed-db-80-e-ec0.21b295bbdef4b701d85f.js"],"metadata---docsite-docs-web-10-storage-indexed-d-bda-0-5ec":["/docsite/metadata---docsite-docs-web-10-storage-indexed-d-bda-0-5ec.35d3e55021780068b603.js"],"content---docsite-docs-react-7-test-unit-test-136-85c":["/docsite/content---docsite-docs-react-7-test-unit-test-136-85c.45459bfadc1430fa9d68.js"],"metadata---docsite-docs-react-7-test-unit-test-289-2e0":["/docsite/metadata---docsite-docs-react-7-test-unit-test-289-2e0.89f6527e9187fac7d207.js"],"content---docsite-docs-web-10-storage-web-sql-766-09c":["/docsite/content---docsite-docs-web-10-storage-web-sql-766-09c.23c4e5479f8e7761053c.js"],"metadata---docsite-docs-web-10-storage-web-sql-1-b-1-0a5":["/docsite/metadata---docsite-docs-web-10-storage-web-sql-1-b-1-0a5.4c89fc30e64a677ca7ab.js"],"content---docsite-docs-web-10-storage-summary-381-fc7":["/docsite/content---docsite-docs-web-10-storage-summary-381-fc7.66a13fa4572be12a6eee.js"],"metadata---docsite-docs-web-10-storage-summary-511-ca0":["/docsite/metadata---docsite-docs-web-10-storage-summary-511-ca0.e2fa0233e76626155038.js"],"content---docsite-docs-react-6-router-management-linkecf-cdd":["/docsite/content---docsite-docs-react-6-router-management-linkecf-cdd.887233da63c729ecf597.js"],"metadata---docsite-docs-react-6-router-management-link-963-26b":["/docsite/metadata---docsite-docs-react-6-router-management-link-963-26b.054a3d3cec6478ebf54d.js"],"content---docsite-docs-web-10-storage-webstorage-426-8e5":["/docsite/content---docsite-docs-web-10-storage-webstorage-426-8e5.7413be3cf2d794b4a8e5.js"],"metadata---docsite-docs-web-10-storage-webstoragec-11-471":["/docsite/metadata---docsite-docs-web-10-storage-webstoragec-11-471.0668fa88c67dd2e0f23d.js"],"content---docsite-docs-web-11-security-o-auth-0-a-8-e9b":["/docsite/content---docsite-docs-web-11-security-o-auth-0-a-8-e9b.273ddd1c341dfcf8218c.js"],"metadata---docsite-docs-web-11-security-o-auth-7-d-5-ffb":["/docsite/metadata---docsite-docs-web-11-security-o-auth-7-d-5-ffb.bce95881d8e700b97af0.js"],"content---docsite-docs-web-11-security-csrf-99-a-66d":["/docsite/content---docsite-docs-web-11-security-csrf-99-a-66d.64dfd3cd6e07721d1093.js"],"metadata---docsite-docs-web-11-security-csrf-951-89a":["/docsite/metadata---docsite-docs-web-11-security-csrf-951-89a.9d5c0aac86d0c9b0267e.js"],"content---docsite-docs-web-11-security-cookied-9-f-46d":["/docsite/content---docsite-docs-web-11-security-cookied-9-f-46d.a20ceccd445973fc82d4.js"],"metadata---docsite-docs-web-11-security-cookie-9-ca-6a6":["/docsite/metadata---docsite-docs-web-11-security-cookie-9-ca-6a6.6cbc8cafaa93a1cb8e37.js"],"content---docsite-docs-web-11-security-jw-tfd-0-d1c":["/docsite/content---docsite-docs-web-11-security-jw-tfd-0-d1c.ff0bd14211ec377706a1.js"],"metadata---docsite-docs-web-11-security-jw-tcef-55d":["/docsite/metadata---docsite-docs-web-11-security-jw-tcef-55d.0d48f8696acc6d996a5b.js"],"content---docsite-docs-web-11-security-xs-sa-7-d-18d":["/docsite/content---docsite-docs-web-11-security-xs-sa-7-d-18d.0590ac7d6df237303710.js"],"metadata---docsite-docs-web-11-security-xss-36-e-2d4":["/docsite/metadata---docsite-docs-web-11-security-xss-36-e-2d4.b3a4adfaa048fdd6210f.js"],"content---docsite-docs-web-12-web-optimize-delay-loading-3-ce-8a7":["/docsite/content---docsite-docs-web-12-web-optimize-delay-loading-3-ce-8a7.d84f67d43684f6bdc86b.js"],"metadata---docsite-docs-web-12-web-optimize-delay-loading-5-ed-143":["/docsite/metadata---docsite-docs-web-12-web-optimize-delay-loading-5-ed-143.2f0dc37766084988ebdd.js"],"content---docsite-docs-web-11-security-session-2-c-3-924":["/docsite/content---docsite-docs-web-11-security-session-2-c-3-924.9968c5b7dd449277f6dd.js"],"metadata---docsite-docs-web-11-security-session-4-f-1-d36":["/docsite/metadata---docsite-docs-web-11-security-session-4-f-1-d36.8b25e92c21613fd73e6b.js"],"content---docsite-docs-web-12-web-optimize-http-cacheaf-5-a7f":["/docsite/content---docsite-docs-web-12-web-optimize-http-cacheaf-5-a7f.6c81cb920e06efe1d883.js"],"metadata---docsite-docs-web-12-web-optimize-http-cache-4-b-3-f2e":["/docsite/metadata---docsite-docs-web-12-web-optimize-http-cache-4-b-3-f2e.771878253882a1ce4c1d.js"],"content---docsite-docs-web-12-web-optimize-pic-optimizedf-6-85f":["/docsite/content---docsite-docs-web-12-web-optimize-pic-optimizedf-6-85f.bfbbe1e2540cd11424c5.js"],"metadata---docsite-docs-web-12-web-optimize-pic-optimize-728-692":["/docsite/metadata---docsite-docs-web-12-web-optimize-pic-optimize-728-692.e3707f7f58f2c2e5c0f6.js"],"content---docsite-docs-web-2-same-origin-policy-same-origin-policy-2-b-9-ca5":["/docsite/content---docsite-docs-web-2-same-origin-policy-same-origin-policy-2-b-9-ca5.158f5baae6168c98c6d6.js"],"metadata---docsite-docs-web-2-same-origin-policy-same-origin-policybc-0-c1d":["/docsite/metadata---docsite-docs-web-2-same-origin-policy-same-origin-policybc-0-c1d.eca6fe5f63f0c8853a93.js"],"content---docsite-docs-web-3-cross-domain-cors-00-e-6a3":["/docsite/content---docsite-docs-web-3-cross-domain-cors-00-e-6a3.e17eba1f69a09a756149.js"],"metadata---docsite-docs-web-3-cross-domain-corsd-03-084":["/docsite/metadata---docsite-docs-web-3-cross-domain-corsd-03-084.cfcaff0bb6b58597a5e6.js"],"content---docsite-docs-web-13-rendering-engine-rendering-engine-941-ea2":["/docsite/content---docsite-docs-web-13-rendering-engine-rendering-engine-941-ea2.707d7fe4591008754c19.js"],"metadata---docsite-docs-web-13-rendering-engine-rendering-enginebbe-a3b":["/docsite/metadata---docsite-docs-web-13-rendering-engine-rendering-enginebbe-a3b.2a430493e663c2f2e362.js"],"content---docsite-docs-web-4-cross-document-iframeac-2-84a":["/docsite/content---docsite-docs-web-4-cross-document-iframeac-2-84a.541b997ae28c756a22dd.js"],"metadata---docsite-docs-web-4-cross-document-iframe-767-a37":["/docsite/metadata---docsite-docs-web-4-cross-document-iframe-767-a37.ce55b78ffefe7a24216f.js"],"content---docsite-docs-web-3-cross-domain-jsonp-6-ab-d39":["/docsite/content---docsite-docs-web-3-cross-domain-jsonp-6-ab-d39.7895266d595837367f68.js"],"metadata---docsite-docs-web-3-cross-domain-jsonp-9-e-8-91e":["/docsite/metadata---docsite-docs-web-3-cross-domain-jsonp-9-e-8-91e.7d57f602d00e5ea46b15.js"],"content---docsite-docs-web-3-cross-domain-websocket-988-020":["/docsite/content---docsite-docs-web-3-cross-domain-websocket-988-020.3899e8d0779dd1b77a6e.js"],"metadata---docsite-docs-web-3-cross-domain-websocketda-5-b45":["/docsite/metadata---docsite-docs-web-3-cross-domain-websocketda-5-b45.b53467163dbaea522cd9.js"],"content---docsite-docs-web-6-browser-rendering-async-defer-616-33f":["/docsite/content---docsite-docs-web-6-browser-rendering-async-defer-616-33f.2b2f991b5d95b366ff37.js"],"metadata---docsite-docs-web-6-browser-rendering-async-defer-3-cf-c6d":["/docsite/metadata---docsite-docs-web-6-browser-rendering-async-defer-3-cf-c6d.24b4e8a53c2e8770409c.js"],"content---docsite-docs-web-4-cross-document-post-massage-479-bdf":["/docsite/content---docsite-docs-web-4-cross-document-post-massage-479-bdf.07fe7ade5decc978984b.js"],"metadata---docsite-docs-web-4-cross-document-post-massageeeb-061":["/docsite/metadata---docsite-docs-web-4-cross-document-post-massageeeb-061.629097144b821a210bfc.js"],"content---docsite-docs-web-6-browser-rendering-js-single-thread-7-d-3-6a0":["/docsite/content---docsite-docs-web-6-browser-rendering-js-single-thread-7-d-3-6a0.e191b14102d167e9705f.js"],"metadata---docsite-docs-web-6-browser-rendering-js-single-threadd-21-80e":["/docsite/metadata---docsite-docs-web-6-browser-rendering-js-single-threadd-21-80e.222dbe01f4465010433d.js"],"content---docsite-docs-web-5-webworker-webworker-76-b-808":["/docsite/content---docsite-docs-web-5-webworker-webworker-76-b-808.2a84120fb27fd87ee66b.js"],"metadata---docsite-docs-web-5-webworker-webworker-63-a-ef9":["/docsite/metadata---docsite-docs-web-5-webworker-webworker-63-a-ef9.7efa9a9008c011c59d99.js"],"content---docsite-docs-web-6-browser-rendering-other-2-d-8-9e3":["/docsite/content---docsite-docs-web-6-browser-rendering-other-2-d-8-9e3.30903cd413efdb4f9d26.js"],"metadata---docsite-docs-web-6-browser-rendering-otherdb-7-b36":["/docsite/metadata---docsite-docs-web-6-browser-rendering-otherdb-7-b36.4e5506a542e9fec277e2.js"],"content---docsite-docs-web-7-js-animation-principlef-1-f-a44":["/docsite/content---docsite-docs-web-7-js-animation-principlef-1-f-a44.a78ebb408a8886fbc0ed.js"],"metadata---docsite-docs-web-7-js-animation-principlefcc-34f":["/docsite/metadata---docsite-docs-web-7-js-animation-principlefcc-34f.ffb840e6bfae03983d24.js"],"content---docsite-docs-web-6-browser-rendering-dom-content-loadedf-4-b-ae4":["/docsite/content---docsite-docs-web-6-browser-rendering-dom-content-loadedf-4-b-ae4.18ec271794ae08964c30.js"],"metadata---docsite-docs-web-6-browser-rendering-dom-content-loaded-8-a-9-4a1":["/docsite/metadata---docsite-docs-web-6-browser-rendering-dom-content-loaded-8-a-9-4a1.1c817379b52752c14cb5.js"],"content---docsite-docs-web-7-js-animation-request-animation-frame-8-fe-4ec":["/docsite/content---docsite-docs-web-7-js-animation-request-animation-frame-8-fe-4ec.f9b21410f11a2f401b3a.js"],"metadata---docsite-docs-web-7-js-animation-request-animation-frame-74-d-ac9":["/docsite/metadata---docsite-docs-web-7-js-animation-request-animation-frame-74-d-ac9.33b31f1b61e055a33b88.js"],"content---docsite-docs-web-7-js-animation-timer-290-4be":["/docsite/content---docsite-docs-web-7-js-animation-timer-290-4be.97a6ed212f8a4e112409.js"],"metadata---docsite-docs-web-7-js-animation-timer-9-fc-a2d":["/docsite/metadata---docsite-docs-web-7-js-animation-timer-9-fc-a2d.5253edb741cedfd436fd.js"],"content---docsite-docs-web-6-browser-rendering-page-rendering-5-e-1-b99":["/docsite/content---docsite-docs-web-6-browser-rendering-page-rendering-5-e-1-b99.53dd5d48245949ccaec7.js"],"metadata---docsite-docs-web-6-browser-rendering-page-rendering-702-9c0":["/docsite/metadata---docsite-docs-web-6-browser-rendering-page-rendering-702-9c0.1dc4809aafa402d164a7.js"],"content---docsite-docs-web-6-browser-rendering-reflow-repaint-71-e-0fa":["/docsite/content---docsite-docs-web-6-browser-rendering-reflow-repaint-71-e-0fa.62f2240b15fa7bf93ccd.js"],"metadata---docsite-docs-web-6-browser-rendering-reflow-repaintd-00-a5c":["/docsite/metadata---docsite-docs-web-6-browser-rendering-reflow-repaintd-00-a5c.888a3513aa0f53c6a3cd.js"],"content---docsite-docs-web-8-dom-event-8-cb-e67":["/docsite/content---docsite-docs-web-8-dom-event-8-cb-e67.703452c6d575b047ac91.js"],"metadata---docsite-docs-web-8-dom-event-89-c-3fd":["/docsite/metadata---docsite-docs-web-8-dom-event-89-c-3fd.a216b3acc54461f02e51.js"],"content---docsite-docs-web-9-rooter-hash-rooterb-05-670":["/docsite/content---docsite-docs-web-9-rooter-hash-rooterb-05-670.557e9c0af140db1fa377.js"],"metadata---docsite-docs-web-9-rooter-hash-rooterd-12-739":["/docsite/metadata---docsite-docs-web-9-rooter-hash-rooterd-12-739.3761e431231984870cae.js"],"content---docsite-docs-web-9-rooter-history-rooterc-36-43f":["/docsite/content---docsite-docs-web-9-rooter-history-rooterc-36-43f.ccac39e2db9730751708.js"],"metadata---docsite-docs-web-9-rooter-history-rooter-157-07d":["/docsite/metadata---docsite-docs-web-9-rooter-history-rooter-157-07d.a1e60130ac3327b60ee0.js"],"content---docsite-docs-web-8-dom-node-62-c-6d5":["/docsite/content---docsite-docs-web-8-dom-node-62-c-6d5.5d4271aaa4deff9d6935.js"],"metadata---docsite-docs-web-8-dom-node-16-f-2f3":["/docsite/metadata---docsite-docs-web-8-dom-node-16-f-2f3.f9014602f5d7db15d13c.js"],"component---theme-blog-list-pagea-6-a-7ba":["/docsite/component---theme-blog-list-pagea-6-a-7ba.4a5285af10ba1a77d933.js"],"content---docsite-blogaf-1-fa9":["/docsite/content---docsite-blogaf-1-fa9.d77998658cefe06a82b2.js"],"content---docsite-blog-357-e89":["/docsite/content---docsite-blog-357-e89.2f8b3c3c8325be18e0e8.js"],"content---docsite-blog-8-e-9-cce":["/docsite/content---docsite-blog-8-e-9-cce.49d13f7a928a416aef57.js"],"metadata---docsite-blog-218-2ba":["/docsite/metadata---docsite-blog-218-2ba.979f7026d6267d48dee2.js"],"component---theme-blog-tags-posts-page-687-b6c":["/docsite/component---theme-blog-tags-posts-page-687-b6c.f6f80dee496747fe4e31.js"],"metadata---docsite-blog-tags-docusaurus-350-a8e":["/docsite/metadata---docsite-blog-tags-docusaurus-350-a8e.26bfaeb70fd71758760f.js"],"metadata---docsite-blog-tags-hellobcb-730":["/docsite/metadata---docsite-blog-tags-hellobcb-730.4f61188fbfb7536de705.js"],"metadata---docsite-blog-tags-hola-233-95b":["/docsite/metadata---docsite-blog-tags-hola-233-95b.69b12e47f336f67d71fd.js"],"metadata---docsite-blog-tags-facebook-628-fc9":["/docsite/metadata---docsite-blog-tags-facebook-628-fc9.850ab0dcf074460d30d5.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/docsite/component---theme-blog-tags-list-page-01-a-d0b.7dfecbd5ba08a02379f6.js"],"tags---docsite-blog-tagsb-23-7b0":["/docsite/tags---docsite-blog-tagsb-23-7b0.8fc99df93d42cd8954c0.js"]};/*]]>*/</script>

<title data-react-helmet="true">Hooks</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Hooks"/><meta data-react-helmet="true" name="description" content="## 什么是State Hooks？"/><meta data-react-helmet="true" property="og:description" content="## 什么是State Hooks？"/><meta data-react-helmet="true" property="og:url" content="https://thinkbucket.github.io/docsite/docs/react/2.advanced/hooks"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/docsite/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/docsite/main.5af442a778040b828313.css" />

<link rel="stylesheet" type="text/css" href="/docsite/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/docsite/2.702de9bbb01fe4f46fa1.css" />

<link rel="stylesheet" type="text/css" href="/docsite/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css" />

<link rel="stylesheet" type="text/css" href="/docsite/component---theme-doc-legacy-item-031-769.1f1ce10374de019f5d3a.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="/docsite/img/logo.svg" alt="ThinkBucket Logo"/><strong>ThinkBucket</strong></a><a class="navbar__item navbar__link" label="React" position="left" href="/docsite/docs/react/1.basic/jsx">React</a><a class="navbar__item navbar__link" label="Web" position="left" href="/docsite/docs/web/1.http/http-connection">Web</a><a class="navbar__item navbar__link" label="Algorithm" position="left" href="/docsite/docs/algorithm/1.array/duplicated-number-in-array">Algorithm</a><a class="navbar__item navbar__link" label="Docs" position="left" href="/docsite/docs/doc1">Docs</a><a class="navbar__item navbar__link" label="Blog" position="left" href="/docsite/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="/docsite/img/logo.svg" alt="ThinkBucket Logo"/><strong>ThinkBucket</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="React" position="left" href="/docsite/docs/react/1.basic/jsx">React</a></li><li class="menu__list-item"><a class="menu__link" label="Web" position="left" href="/docsite/docs/web/1.http/http-connection">Web</a></li><li class="menu__list-item"><a class="menu__link" label="Algorithm" position="left" href="/docsite/docs/algorithm/1.array/duplicated-number-in-array">Algorithm</a></li><li class="menu__list-item"><a class="menu__link" label="Docs" position="left" href="/docsite/docs/doc1">Docs</a></li><li class="menu__list-item"><a class="menu__link" label="Blog" position="left" href="/docsite/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_Qb2S"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1uhT" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">1.组件基础</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/jsx">JSX</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/lifecycle">生命周期</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/state">状态</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/communication">通信</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/category">种类</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/event">事件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/1.basic/style">样式</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">2.组件进阶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/render-props">Render Props</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/hoc">HOC</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docsite/docs/react/2.advanced/hooks">Hooks</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/context">Context</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/2.advanced/portal">Portal</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">3.组件优化</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.optimization/performance">性能分析</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.optimization/pure-component">纯组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.optimization/memo">记忆化组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.optimization/code-splitting">Code Splitting</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/3.optimization/suspense">Suspense</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">4.三大组件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.three-components/container-component">容器型组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.three-components/presentational-component">展示型组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/4.three-components/ui-component">UI组件</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">5.状态管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/redux">Redux</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/store">Store</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/reducer">Reducer</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/action">Action</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/selector">Selector</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/middleware">Middleware</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/5.state-management/model">Model</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">6.路由管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.router-management/router">Router</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.router-management/route">Route</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/6.router-management/link">Link</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">7.测试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/7.test/test-category">测试种类</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/7.test/unit-test">单元测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/7.test/component-test">组件测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/7.test/state-test">状态测试</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">8.安全规约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/security-guide">安全规约</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">附录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/appendix1-references">I 参考资料</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/react/appendix2-related-websites">II 常用网站</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_3Gws"><header><h1 class="margin-bottom--lg">Hooks</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="什么是state-hooks？"></a><a aria-hidden="true" class="hash-link" href="#什么是state-hooks？">#</a>什么是State Hooks？</h2><p>看一个例子，我们分解来看到底state hooks做了什么：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="声明一个状态变量"></a><a aria-hidden="true" class="hash-link" href="#声明一个状态变量">#</a>声明一个状态变量</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><code>useState</code>是react自带的一个hook函数，它的作用就是用来声明状态变量。<code>useState</code>这个函数接收的参数是我们的状态初始值（initial state），它返回了一个数组，这个数组的第<code>[0]</code>项是当前当前的<strong>状态值</strong>，第<code>[1]</code>项是可以改变状态值的<strong>方法函数</strong>。</p><p>所以我们做的事情其实就是，声明了一个状态变量count，把它的初始值设为0，同时提供了一个可以更改count的函数setCount。</p><h3><a aria-hidden="true" class="anchor" id="读取状态值"></a><a aria-hidden="true" class="hash-link" href="#读取状态值">#</a>读取状态值</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>很简单，因为我们的状态count就是一个单纯的变量而已，我们再也不需要写成<code>{this.state.count}</code>这样了。</p><h3><a aria-hidden="true" class="anchor" id="更新状态"></a><a aria-hidden="true" class="hash-link" href="#更新状态">#</a>更新状态</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>当用户点击按钮时，我们调用setCount函数，这个函数接收的参数是修改过的新状态值。接下来的事情就交给react了，react将会重新渲染我们的Example组件，并且使用的是更新后的新的状态，即<code>count=1</code>。这里我们要停下来思考一下，Example本质上也是一个普通的函数，为什么它可以记住之前的状态？</p><h3><a aria-hidden="true" class="anchor" id="假如一个组件有多个状态值怎么办？"></a><a aria-hidden="true" class="hash-link" href="#假如一个组件有多个状态值怎么办？">#</a>假如一个组件有多个状态值怎么办？</h3><p>首先，useState是可以多次调用的，所以我们完全可以这样写：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">ExampleWithManyStates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setAge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">todos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setTodos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>其次，useState接收的初始值没有规定一定要是string/number/boolean这种简单数据类型，它完全<strong>可以接收对象或者数组作为参数</strong>。最后，react也给我们提供了一个<code>useReducer</code>的hook，如果你更喜欢redux式的状态管理方案的话。</p><blockquote><p><strong>注意</strong>：之前我们的<code>this.setState</code>做的是<strong>合并状态</strong>后返回一个新状态，而<code>useState</code>是直接<strong>替换</strong>老状态后返回新状态。</p></blockquote><p>从<code>ExampleWithManyStates</code>函数我们可以看到，<code>useState</code>无论调用多少次，相互之间是独立的。这一点至关重要。为什么这么说呢？</p><p>其实我们看hook的“形态”，有点类似之前被官方否定掉的Mixins这种方案，都是提供一种“插拔式的功能注入”的能力。而mixins之所以被否定，是因为<strong>Mixins机制是让多个Mixins共享一个对象的数据空间</strong>，这样就很难确保不同Mixins依赖的状态不发生冲突。</p><p>而现在我们的hook，一方面它是直接用在function当中，而不是class；另一方面每一个hook都是相互独立的，<strong>不同组件调用同一个hook也能保证各自状态的独立性。</strong>这就是两者的本质区别了。</p><h3><a aria-hidden="true" class="anchor" id="react是怎么保证多个usestate的相互独立的？"></a><a aria-hidden="true" class="hash-link" href="#react是怎么保证多个usestate的相互独立的？">#</a>React是怎么保证多个useState的相互独立的？</h3><p>还是看上面给出的<code>ExampleWithManyStates</code>例子，我们调用了三次<code>useState</code>，每次我们传的参数只是一个值（如42，‘banana’）<em>，</em>我们根本没有告诉react这些值对应的key是哪个，那react是怎么保证这三个useState找到它对应的state呢？</p><blockquote><p><strong>Tips</strong>：React是根据<code>useState</code>出现的顺序来定的。</p></blockquote><p>我们具体来看一下：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第一次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将age初始化为42</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将fruit初始化为banana</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第二次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量age的值（这时候传的参数42直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量fruit的值（这时候传的参数banana直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>假如我们改一下代码：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> showFruit </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">ExampleWithManyStates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setAge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">showFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setFruit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    showFruit </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">todos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setTodos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这样一来：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第一次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将age初始化为42</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;banana&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//将fruit初始化为banana</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//第二次渲染</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取状态变量age的值（这时候传的参数42直接被忽略）</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// useState(&#x27;banana&#x27;);  </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Learn Hooks&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//读取到的却是状态变量fruit的值，导致报错</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><blockquote><p><strong>强制</strong>：React规定我们必须把hooks写在函数的最外层，不能写在<code>ifelse</code>等条件语句当中，来确保hooks的执行顺序一致。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="effect-hooks"></a><a aria-hidden="true" class="hash-link" href="#effect-hooks">#</a>Effect Hooks</h2><p>我们在上一节的例子中增加一个新功能：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> useEffect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 类似于componentDidMount 和 componentDidUpdate:</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 更新文档的标题</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们对比着看一下，如果没有hooks，我们会怎么写？</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Example</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">React</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 139)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">super</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">state </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidMount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation keyword" style="color:rgb(127, 219, 202)">this</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidUpdate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation keyword" style="color:rgb(127, 219, 202)">this</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(127, 219, 202)">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript function" style="color:rgb(130, 170, 255)">setState</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> count</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript keyword" style="color:rgb(127, 219, 202)">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">state</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)">count </span><span class="token tag script language-javascript operator" style="color:rgb(127, 219, 202)">+</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token tag script language-javascript" style="color:rgb(127, 219, 202)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">          Click me</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们写的有状态组件，通常会产生很多的副作用（side effect），比如发起ajax请求获取数据，添加一些监听的注册和取消注册，手动修改dom等等。我们之前都把这些副作用的函数写在生命周期函数钩子里，比如<code>componentDidMount</code>，<code>componentDidUpdate</code>和<code>componentWillUnmount</code>。而现在的<code>useEffect</code>就相当与这些声明周期函数钩子的集合体。它以一抵三。</p><p>同时，由于前文所说hooks可以反复多次使用，相互独立。所以我们合理的做法是，给每一个副作用一个单独的<code>useEffect</code>钩子。这样一来，这些副作用不再一股脑堆在生命周期钩子里，代码变得更加清晰。</p><h3><a aria-hidden="true" class="anchor" id="useeffect做了什么？"></a><a aria-hidden="true" class="hash-link" href="#useeffect做了什么？">#</a>useEffect做了什么？</h3><p>我们再梳理一遍下面代码的逻辑：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>首先，我们声明了一个状态变量<code>count</code>，将它的初始值设为0。然后我们告诉react，我们的这个组件有一个副作用。我们给<code>useEffect</code>hook传了一个匿名函数，这个匿名函数就是我们的副作用。</p><p>在这个例子里，我们的副作用是调用browser API来修改文档标题。当react要渲染我们的组件时，它会先记住我们用到的副作用。等react更新了DOM之后，它再依次执行我们定义的副作用函数。</p><p>这里要注意几点：</p><p>第一，react首次渲染和之后的每次渲染都会调用一遍传给<code>useEffect</code>的函数。而之前我们要用两个声明周期函数来分别表示首次渲染（<code>componentDidMount</code>），和之后的更新导致的重新渲染（<code>componentDidUpdate</code>）。</p><p>第二，<code>useEffect</code>中定义的副作用函数的执行不会阻碍浏览器更新视图，也就是说这些函数是<strong>异步</strong>执行的，而之前的<code>componentDidMount</code>或<code>componentDidUpdate</code>中的代码则是同步执行的。</p><p>这种安排对大多数副作用说都是合理的，但有的情况除外，比如我们有时候需要先根据DOM计算出某个元素的尺寸再重新渲染，这时候我们希望这次重新渲染是同步发生的，也就是说它会在浏览器真的去绘制这个页面前发生。</p><h3><a aria-hidden="true" class="anchor" id="useeffect怎么解绑一些副作用"></a><a aria-hidden="true" class="hash-link" href="#useeffect怎么解绑一些副作用">#</a>useEffect怎么解绑一些副作用?</h3><p>这种场景很常见，当我们在<code>componentDidMount</code>里添加了一个注册，我们得马上在<code>componentWillUnmount</code>中，也就是<strong>组件被注销之前</strong>清除掉我们添加的注册，否则<strong>内存泄漏</strong>的问题就出现了。</p><p>怎么清除呢？让我们传给<code>useEffect</code>的副作用函数返回一个新的函数即可。这个新的函数将会在组件下一次重新渲染之后执行。这种模式在一些pubsub模式的实现中很常见。看下面的例子：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> useEffect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">FriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">isOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setIsOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">setIsOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">isOnline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 一定注意下这个顺序：告诉react在下次重新渲染组件之后，同时是下次调用ChatAPI.subscribeToFriendStatus之前执行cleanup</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cleanup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handleStatusChange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">isOnline </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Loading...&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> isOnline </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Online&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Offline&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这里有一个点需要重视！这种解绑的模式跟<code>componentWillUnmount</code>不一样。<code>componentWillUnmount</code>只会在组件被销毁前执行一次而已，而<code>useEffect</code>里的函数，每次组件渲染后都会执行一遍，包括副作用函数返回的这个清理函数也会重新执行一遍。所以我们一起来看一下下面这个问题。</p><h3><a aria-hidden="true" class="anchor" id="为什么要让副作用函数每次组件更新都执行一遍？"></a><a aria-hidden="true" class="hash-link" href="#为什么要让副作用函数每次组件更新都执行一遍？">#</a>为什么要让副作用函数每次组件更新都执行一遍？</h3><p>我们先看以前的模式：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">componentDidMount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentWillUnmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>我们在<code>componentDidMount</code>注册，再在componentWillUnmount清除注册。但假如这时候<code>props.friend.id</code>变了怎么办？我们不得不再添加一个<code>componentDidUpdate</code>来处理这种情况：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">componentDidUpdate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">prevProps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 先把上一个friend.id解绑</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribeFromFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      prevProps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 再重新注册新但friend.id</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    ChatAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">subscribeToFriendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">friend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">handleStatusChange</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token operator" style="color:rgb(127, 219, 202)">...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>看到了吗？很繁琐，而我们但useEffect则没这个问题，因为它在每次组件更新后都会重新执行一遍。所以代码的执行顺序是这样的：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-text codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">1.页面首次渲染</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">2.替friend.id=1的朋友注册</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">3.突然friend.id变成了2</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">4.页面重新渲染</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">5.清除friend.id=1的绑定</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">6.替friend.id=2的朋友注册</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="怎么跳过一些不必要的副作用函数"></a><a aria-hidden="true" class="hash-link" href="#怎么跳过一些不必要的副作用函数">#</a>怎么跳过一些不必要的副作用函数</h3><p>按照上一节的思路，每次重新渲染都要执行一遍这些副作用函数，显然是不经济的。怎么跳过一些不必要的计算呢？我们只需要给useEffect传第二个参数即可。用第二个参数来告诉react只有当这个参数的值发生改变时，才执行我们传的副作用函数（第一个参数）。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-jsx codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)"> times`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 只有当count的值发生变化时，才会重新执行`document.title`这一句</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>当我们第二个参数传一个空数组<!-- -->[<!-- -->]<!-- -->时，其实就相当于只在首次渲染的时候执行。也就是<code>componentDidMount</code>加<code>componentWillUnmount</code>的模式。不过这种用法可能带来bug，少用。</p></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docsite/docs/react/2.advanced/hoc"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->HOC</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docsite/docs/react/2.advanced/context"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Context<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2wxO"><ul class="contents contents__left-border"><li><a href="#什么是state-hooks？" class="contents__link">什么是State Hooks？</a><ul class=""><li><a href="#声明一个状态变量" class="contents__link">声明一个状态变量</a></li><li><a href="#读取状态值" class="contents__link">读取状态值</a></li><li><a href="#更新状态" class="contents__link">更新状态</a></li><li><a href="#假如一个组件有多个状态值怎么办？" class="contents__link">假如一个组件有多个状态值怎么办？</a></li><li><a href="#react是怎么保证多个usestate的相互独立的？" class="contents__link">React是怎么保证多个useState的相互独立的？</a></li></ul></li><li><a href="#effect-hooks" class="contents__link">Effect Hooks</a><ul class=""><li><a href="#useeffect做了什么？" class="contents__link">useEffect做了什么？</a></li><li><a href="#useeffect怎么解绑一些副作用" class="contents__link">useEffect怎么解绑一些副作用?</a></li><li><a href="#为什么要让副作用函数每次组件更新都执行一遍？" class="contents__link">为什么要让副作用函数每次组件更新都执行一遍？</a></li><li><a href="#怎么跳过一些不必要的副作用函数" class="contents__link">怎么跳过一些不必要的副作用函数</a></li></ul></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/docsite/runtime~main.bbc66474d5c7920f7ca5.js"></script>

<script type="text/javascript" src="/docsite/main.d06546e487dc797bd8ac.js"></script>

<script type="text/javascript" src="/docsite/0.a1a369d24508fdb0f694.js"></script>

<script type="text/javascript" src="/docsite/1.edd80b9b9931526214a4.js"></script>

<script type="text/javascript" src="/docsite/2.7963dc8c22844d6f8fb0.js"></script>

<script type="text/javascript" src="/docsite/component---theme-doc-legacy-page-9-e-7-ca5.5b47f0371000b8c7d8d4.js"></script>

<script type="text/javascript" src="/docsite/docsMetadata---docsite-docs-6-dd-ccc.5fea84d1c5a7ccdc9fac.js"></script>

<script type="text/javascript" src="/docsite/component---theme-doc-legacy-item-031-769.e6f33864712b7af8c452.js"></script>

<script type="text/javascript" src="/docsite/content---docsite-docs-react-2-advanced-hooksaec-e85.9634f376f9f34a2156d8.js"></script>

<script type="text/javascript" src="/docsite/metadata---docsite-docs-react-2-advanced-hooksfbd-7b0.42e1b9c4a1f193353e6c.js"></script>

</body>
</html>