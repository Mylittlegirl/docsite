<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"17896441":["/docsite/17896441.f10d0adc.css","/docsite/17896441.e073e502.js"],"23472906":["/docsite/23472906.54446b0e.js"],"27780837":["/docsite/27780837.dfe1749b.js"],"37794963":["/docsite/37794963.4262f3ce.js"],"57930540":["/docsite/57930540.fb9c6771.js"],"74419249":["/docsite/74419249.687ec0a8.js"],"74980264":["/docsite/74980264.24ef7729.js"],"87130785":["/docsite/87130785.e97b7c2f.js"],"93955555":["/docsite/93955555.7d09f65b.js"],"94119482":["/docsite/94119482.f7af3cd4.js"],"97236668":["/docsite/97236668.37b412f4.js"],"main":["/docsite/main.29b42a75.css","/docsite/main.1be15401.js"],"c4f5d8e4":["/docsite/c4f5d8e4.9f99729b.css","/docsite/c4f5d8e4.9710c30f.js"],"a6aa9e1f":["/docsite/a6aa9e1f.42d18faa.css","/docsite/a6aa9e1f.7d47b803.js"],"53ffd27f":["/docsite/53ffd27f.257f1125.js"],"ee3a113c":["/docsite/ee3a113c.f026029d.js"],"67f379f0":["/docsite/67f379f0.5d00ead0.js"],"08efdbeb":["/docsite/08efdbeb.3273d70a.js"],"7a66c60e":["/docsite/7a66c60e.1c9cc5c2.js"],"0e1f83fa":["/docsite/0e1f83fa.c8ec1a37.js"],"7abe9480":["/docsite/7abe9480.30565aed.js"],"ccc49370":["/docsite/ccc49370.42d18faa.css","/docsite/ccc49370.0df3d31c.js"],"c495ceb9":["/docsite/c495ceb9.8ae3370a.js"],"2f794cde":["/docsite/2f794cde.2057ac99.js"],"01a85c17":["/docsite/01a85c17.7c2172e4.js"],"9f1c2de8":["/docsite/9f1c2de8.69d94d2c.js"],"6875c492":["/docsite/6875c492.42d18faa.css","/docsite/6875c492.17244d57.js"],"5fb3dc64":["/docsite/5fb3dc64.921675c2.js"],"758a60bf":["/docsite/758a60bf.29323470.js"],"c154f36d":["/docsite/c154f36d.2edba146.js"],"dc6093b7":["/docsite/dc6093b7.7c85eb91.js"],"46767a84":["/docsite/46767a84.b0cc1273.js"],"1be78505":["/docsite/1be78505.a7dc664a.css","/docsite/1be78505.b70f1190.js"],"1f74bc4f":["/docsite/1f74bc4f.ec706bd9.js"],"b2f90839":["/docsite/b2f90839.e18d9a3c.js"],"3646ceb6":["/docsite/3646ceb6.a67afd0e.js"],"df361e2b":["/docsite/df361e2b.d6cbb15e.js"],"2e30eda0":["/docsite/2e30eda0.35437ec4.js"],"616665f6":["/docsite/616665f6.7e49d410.js"],"d68604a8":["/docsite/d68604a8.d71a3ebe.js"],"ce3e42ad":["/docsite/ce3e42ad.fe36eccc.js"],"38fb889f":["/docsite/38fb889f.85fb42a0.js"],"3771367e":["/docsite/3771367e.e1410f28.js"],"6b71f900":["/docsite/6b71f900.84c6625b.js"],"b2238368":["/docsite/b2238368.7372e2c5.js"],"39919c58":["/docsite/39919c58.98711322.js"],"2841c254":["/docsite/2841c254.1f4f6960.js"],"211d6883":["/docsite/211d6883.db7f27b2.js"],"4e95ff28":["/docsite/4e95ff28.bb99dbfb.css","/docsite/4e95ff28.81e6f1fa.js"],"047084a0":["/docsite/047084a0.e65ffd21.js"],"5cbbbd3d":["/docsite/5cbbbd3d.bb99dbfb.css","/docsite/5cbbbd3d.e7c18286.js"],"c8683266":["/docsite/c8683266.6dc99c67.js"],"2e89c190":["/docsite/2e89c190.2fd699d0.js"],"6dfd4eb7":["/docsite/6dfd4eb7.6d0dc779.js"],"f4108344":["/docsite/f4108344.dfc9a9f6.js"],"bd2f0648":["/docsite/bd2f0648.ce5c3055.js"],"5c9c385e":["/docsite/5c9c385e.867687f7.js"],"74a1810e":["/docsite/74a1810e.866d6369.js"],"504797aa":["/docsite/504797aa.13e3b2c3.js"],"93a1e63d":["/docsite/93a1e63d.d1fafa2d.js"],"1db8cef8":["/docsite/1db8cef8.75c8d403.js"],"4eb9051e":["/docsite/4eb9051e.b943e574.js"],"c8dedd7d":["/docsite/c8dedd7d.3ef47f83.js"],"08612653":["/docsite/08612653.d09f9686.js"],"3322b8b6":["/docsite/3322b8b6.116e14af.js"],"3243c609":["/docsite/3243c609.fcac3873.js"],"63fda552":["/docsite/63fda552.4746ae28.js"],"2e1b3ae3":["/docsite/2e1b3ae3.3571536d.js"],"11b2d1e3":["/docsite/11b2d1e3.35462b47.js"],"1b8e9266":["/docsite/1b8e9266.b492fcfb.js"],"affd65fc":["/docsite/affd65fc.336825f1.js"],"f7923353":["/docsite/f7923353.3a4764a2.js"],"01dcda27":["/docsite/01dcda27.d351f918.js"],"7c74ee73":["/docsite/7c74ee73.087d1973.js"],"244229a2":["/docsite/244229a2.1bf4d384.js"],"6adf5f29":["/docsite/6adf5f29.39e7f540.js"],"f6a51704":["/docsite/f6a51704.63a349bb.js"],"2e8891f7":["/docsite/2e8891f7.f9b1b535.js"],"0863ad8b":["/docsite/0863ad8b.522b0cb0.js"],"1621b74f":["/docsite/1621b74f.35e884b3.js"],"f6cecaf9":["/docsite/f6cecaf9.9240d87f.js"],"159f3bbd":["/docsite/159f3bbd.049934d6.js"],"92ef0e91":["/docsite/92ef0e91.80409297.js"],"38e977dc":["/docsite/38e977dc.49501421.js"],"05d994bc":["/docsite/05d994bc.0c93480f.js"],"3b0fa7e1":["/docsite/3b0fa7e1.18fa9486.js"],"de1e4f41":["/docsite/de1e4f41.482832ce.js"],"080b33f0":["/docsite/080b33f0.98a22f14.js"],"8368e116":["/docsite/8368e116.b5b4ae08.js"],"500c3bd1":["/docsite/500c3bd1.79670d93.js"],"d7d45e95":["/docsite/d7d45e95.ca9b9a52.js"],"c4f8f901":["/docsite/c4f8f901.a54b7ef3.js"],"f969be42":["/docsite/f969be42.6ef15f0b.js"],"1f8685b8":["/docsite/1f8685b8.e315a282.js"],"b43e5da4":["/docsite/b43e5da4.50e6b3fd.js"],"03de2b5e":["/docsite/03de2b5e.de150cfc.js"],"5ade0974":["/docsite/5ade0974.461bd9b5.js"],"f4e97366":["/docsite/f4e97366.c9733a0b.js"],"2c2869b1":["/docsite/2c2869b1.c33a7e5c.js"],"fbe75a3b":["/docsite/fbe75a3b.2040ef5a.js"],"cbfb232c":["/docsite/cbfb232c.b297c0bb.js"],"ad5a956a":["/docsite/ad5a956a.019303ba.js"],"2aef18e2":["/docsite/2aef18e2.c3405fb7.js"],"f032f3e9":["/docsite/f032f3e9.17074b45.js"],"2b3c65d5":["/docsite/2b3c65d5.b13e6602.js"],"22d45952":["/docsite/22d45952.db2e61c9.js"],"d1317f86":["/docsite/d1317f86.2e799189.js"],"ac69863b":["/docsite/ac69863b.9044a420.js"],"db4a1533":["/docsite/db4a1533.2d9a164d.js"],"2f924de0":["/docsite/2f924de0.ff27485b.js"],"ad194f87":["/docsite/ad194f87.6f0c8ecb.js"],"358bcdd4":["/docsite/358bcdd4.7e440490.js"],"5ea24069":["/docsite/5ea24069.4186ff9c.js"],"5e9632dd":["/docsite/5e9632dd.bb99dbfb.css","/docsite/5e9632dd.92fa9540.js"],"f3680ec8":["/docsite/f3680ec8.a5f8a3d2.js"],"e2dce444":["/docsite/e2dce444.8e816c81.js"],"6071507c":["/docsite/6071507c.bb99dbfb.css","/docsite/6071507c.3f7f68c2.js"],"b5d46e94":["/docsite/b5d46e94.b9514eed.js"],"e1f6f245":["/docsite/e1f6f245.bb99dbfb.css","/docsite/e1f6f245.1fe90f3e.js"],"31d0ea72":["/docsite/31d0ea72.ac32e6c6.js"],"3277807d":["/docsite/3277807d.192e7906.js"],"653c4cb0":["/docsite/653c4cb0.78cecca7.js"],"213eca13":["/docsite/213eca13.bb99dbfb.css","/docsite/213eca13.c2e9f9ad.js"],"b95a7d71":["/docsite/b95a7d71.b5819d73.js"],"6520bede":["/docsite/6520bede.bb99dbfb.css","/docsite/6520bede.88a2200b.js"],"ef6db2c5":["/docsite/ef6db2c5.6c41bb59.js"],"c48b7179":["/docsite/c48b7179.9339db99.js"],"e22e0aa0":["/docsite/e22e0aa0.cafdaf06.js"],"d0ced307":["/docsite/d0ced307.bb99dbfb.css","/docsite/d0ced307.155f7b96.js"],"0a08042c":["/docsite/0a08042c.fa557b96.js"],"e71cc4f0":["/docsite/e71cc4f0.bb99dbfb.css","/docsite/e71cc4f0.cd986e20.js"],"49f4125d":["/docsite/49f4125d.9100aed3.js"],"ecf76184":["/docsite/ecf76184.6fd896f5.js"],"67a5ed66":["/docsite/67a5ed66.1412a002.js"],"d093435a":["/docsite/d093435a.bb99dbfb.css","/docsite/d093435a.bcd8abce.js"],"233b9e72":["/docsite/233b9e72.679893e9.js"],"e99f5c31":["/docsite/e99f5c31.bb99dbfb.css","/docsite/e99f5c31.93b83ac0.js"],"f1ea77c2":["/docsite/f1ea77c2.f60608e4.js"],"5c709309":["/docsite/5c709309.bb99dbfb.css","/docsite/5c709309.ad319272.js"],"a22acfe6":["/docsite/a22acfe6.e72ad685.js"],"3ad82b0e":["/docsite/3ad82b0e.bb99dbfb.css","/docsite/3ad82b0e.43469f79.js"],"c1e89aed":["/docsite/c1e89aed.29a7bad3.js"],"0723b8c1":["/docsite/0723b8c1.baf4986d.js"],"5f7eab5b":["/docsite/5f7eab5b.061c50f0.js"],"136355ba":["/docsite/136355ba.bb99dbfb.css","/docsite/136355ba.be7697ab.js"],"9fa359ca":["/docsite/9fa359ca.7ffd6950.js"],"fc8a29f4":["/docsite/fc8a29f4.bb99dbfb.css","/docsite/fc8a29f4.be73c499.js"],"17b6bee9":["/docsite/17b6bee9.ef8c7a95.js"],"033763e3":["/docsite/033763e3.bb99dbfb.css","/docsite/033763e3.26098acd.js"],"c44fe60a":["/docsite/c44fe60a.22048f22.js"],"83e620c2":["/docsite/83e620c2.bb99dbfb.css","/docsite/83e620c2.7e434485.js"],"76906ad8":["/docsite/76906ad8.860a8330.js"],"0f7d1b9b":["/docsite/0f7d1b9b.bb99dbfb.css","/docsite/0f7d1b9b.6bf6cac7.js"],"e51935b5":["/docsite/e51935b5.4defb26b.js"],"e1843fd7":["/docsite/e1843fd7.bb99dbfb.css","/docsite/e1843fd7.be735641.js"],"4567070e":["/docsite/4567070e.8190f13c.js"],"c5aabd03":["/docsite/c5aabd03.caa30212.js"],"45f42b17":["/docsite/45f42b17.18354429.js"],"b793522a":["/docsite/b793522a.bb99dbfb.css","/docsite/b793522a.3013095f.js"],"40b7e39e":["/docsite/40b7e39e.d4cf82e7.js"],"ef2aecc9":["/docsite/ef2aecc9.bb99dbfb.css","/docsite/ef2aecc9.ce4dd24c.js"],"5b751c09":["/docsite/5b751c09.70847d53.js"],"e9b50d9c":["/docsite/e9b50d9c.bb99dbfb.css","/docsite/e9b50d9c.ade2f7c8.js"],"8f362039":["/docsite/8f362039.e0477188.js"],"6ce58e08":["/docsite/6ce58e08.bb99dbfb.css","/docsite/6ce58e08.132fea89.js"],"9473f903":["/docsite/9473f903.3d2c1392.js"],"58a91745":["/docsite/58a91745.bb99dbfb.css","/docsite/58a91745.a101d9ad.js"],"899c0b14":["/docsite/899c0b14.f14ccf39.js"],"b58d7a20":["/docsite/b58d7a20.bb99dbfb.css","/docsite/b58d7a20.52d14a84.js"],"5714c767":["/docsite/5714c767.c30474be.js"],"608d68a9":["/docsite/608d68a9.bb99dbfb.css","/docsite/608d68a9.48a8dbd6.js"],"a16394ef":["/docsite/a16394ef.2a7b1241.js"],"68a08e37":["/docsite/68a08e37.bb99dbfb.css","/docsite/68a08e37.27ffbeee.js"],"adfd710b":["/docsite/adfd710b.69d25ae8.js"],"ff209b8e":["/docsite/ff209b8e.bb99dbfb.css","/docsite/ff209b8e.b8ea1dd4.js"],"af41aca9":["/docsite/af41aca9.f8b0e808.js"],"782ea202":["/docsite/782ea202.0f4a891f.js"],"7555a1cd":["/docsite/7555a1cd.e53cbfca.js"],"1d4cb3eb":["/docsite/1d4cb3eb.92bf8d5e.js"],"dbc0c67c":["/docsite/dbc0c67c.9e38a1eb.js"],"90c46ce7":["/docsite/90c46ce7.c8fe1be3.js"],"3f2d7e49":["/docsite/3f2d7e49.7aa7217e.js"],"15880d90":["/docsite/15880d90.0ebd725a.js"],"07043dd8":["/docsite/07043dd8.9ae0869c.js"],"11e41ebd":["/docsite/11e41ebd.8bef0891.js"],"ae3fc00b":["/docsite/ae3fc00b.36f15361.js"],"5f3b28c6":["/docsite/5f3b28c6.0816c926.js"],"87c34667":["/docsite/87c34667.48741f32.js"],"3d53e746":["/docsite/3d53e746.bb99dbfb.css","/docsite/3d53e746.913395e5.js"],"ac358721":["/docsite/ac358721.b9b47e21.js"],"d0d470d3":["/docsite/d0d470d3.b24309a9.js"],"fa554913":["/docsite/fa554913.cbc3ed81.js"],"8e2b2155":["/docsite/8e2b2155.bb99dbfb.css","/docsite/8e2b2155.e6eaa298.js"],"d73cc76a":["/docsite/d73cc76a.1d355949.js"],"4663baf9":["/docsite/4663baf9.59ed0a87.js"],"b3d6ebf6":["/docsite/b3d6ebf6.e37d5321.js"],"1894aae2":["/docsite/1894aae2.bd9528dc.js"],"0cd87c01":["/docsite/0cd87c01.30c7affc.js"],"a4c04a02":["/docsite/a4c04a02.a466279e.js"],"6f32d80d":["/docsite/6f32d80d.f4ae98c1.js"],"aa345f92":["/docsite/aa345f92.f4c115bb.js"],"ad428253":["/docsite/ad428253.0ea8cd2f.js"],"b00a4f88":["/docsite/b00a4f88.a5a199cf.js"],"fec8d432":["/docsite/fec8d432.a6917c01.js"],"b43c2a92":["/docsite/b43c2a92.dda0ce64.js"],"d0b14826":["/docsite/d0b14826.cf8b4d32.js"],"3ede3bc2":["/docsite/3ede3bc2.70e1e1c9.js"],"0b5983b8":["/docsite/0b5983b8.5e5285d7.js"],"e8003673":["/docsite/e8003673.9b4b45f4.js"],"771fed07":["/docsite/771fed07.00275ea1.js"],"cd9805d6":["/docsite/cd9805d6.668fc2bb.js"],"a2edeb56":["/docsite/a2edeb56.2d67aa90.js"],"ad7530d0":["/docsite/ad7530d0.bb99dbfb.css","/docsite/ad7530d0.f5367c7e.js"],"814efee9":["/docsite/814efee9.79f240d2.js"],"4531f9ea":["/docsite/4531f9ea.bb99dbfb.css","/docsite/4531f9ea.5607ac9a.js"],"a06b1018":["/docsite/a06b1018.5f041752.js"],"2ce331c7":["/docsite/2ce331c7.bb99dbfb.css","/docsite/2ce331c7.56fb0861.js"],"d7fbcadc":["/docsite/d7fbcadc.2db48fb3.js"],"01ef92ae":["/docsite/01ef92ae.b92ce7ac.js"],"7bf05233":["/docsite/7bf05233.dcb5491c.js"],"a1fd2207":["/docsite/a1fd2207.a29759a4.js"],"033045c8":["/docsite/033045c8.66603f5e.js"],"2d720e8c":["/docsite/2d720e8c.85dd8362.js"],"d54bbdcf":["/docsite/d54bbdcf.ddcce9e7.js"],"8c68c9f8":["/docsite/8c68c9f8.c33331db.js"],"78e2ac06":["/docsite/78e2ac06.70d08638.js"],"39137d30":["/docsite/39137d30.c12b76db.js"],"394db02f":["/docsite/394db02f.472c7aaf.js"],"f544e65a":["/docsite/f544e65a.2139ba86.js"],"6d1e4b91":["/docsite/6d1e4b91.50f10caa.js"],"ed73bc09":["/docsite/ed73bc09.e23ec3dc.js"],"eb64de9e":["/docsite/eb64de9e.a8e47efc.js"],"a298e154":["/docsite/a298e154.4336aee9.js"],"0e39d46c":["/docsite/0e39d46c.ce2659bc.js"],"1b5b4c7d":["/docsite/1b5b4c7d.49ec7294.js"],"85ccf9b3":["/docsite/85ccf9b3.85d5dc1d.js"],"0473fe8e":["/docsite/0473fe8e.f19fa87d.js"],"897e23ff":["/docsite/897e23ff.3d1b8814.js"],"a11811fe":["/docsite/a11811fe.845e30f3.js"],"88aca744":["/docsite/88aca744.bb99dbfb.css","/docsite/88aca744.2d0ffce6.js"],"0f1e15b0":["/docsite/0f1e15b0.84907abf.js"],"adbdc601":["/docsite/adbdc601.21875753.js"],"d6792699":["/docsite/d6792699.86195980.js"],"b7ef10f2":["/docsite/b7ef10f2.b8b7ed96.js"],"c60ee35b":["/docsite/c60ee35b.5c6db82c.js"],"f447115f":["/docsite/f447115f.bb99dbfb.css","/docsite/f447115f.5535ce7e.js"],"4923d296":["/docsite/4923d296.53058931.js"],"55f378f5":["/docsite/55f378f5.bb99dbfb.css","/docsite/55f378f5.60ef78eb.js"],"29a1ddb4":["/docsite/29a1ddb4.213fe8fa.js"],"d88d97a0":["/docsite/d88d97a0.cd18a0fa.js"],"f198a29a":["/docsite/f198a29a.5490966d.js"],"af8e703b":["/docsite/af8e703b.ef754ac0.js"],"8039a4bb":["/docsite/8039a4bb.265376e5.js"],"0f631d56":["/docsite/0f631d56.ae878936.js"],"e13129ca":["/docsite/e13129ca.24058b67.js"],"9b6a08e4":["/docsite/9b6a08e4.bb99dbfb.css","/docsite/9b6a08e4.99d3bcf5.js"],"4573c181":["/docsite/4573c181.9ba372b9.js"],"c62bfe1a":["/docsite/c62bfe1a.228fb349.js"],"5d5d2097":["/docsite/5d5d2097.9ab3b470.js"],"8ba219ff":["/docsite/8ba219ff.e3113ac2.js"],"8eca8034":["/docsite/8eca8034.7bf2893d.js"],"ae237e47":["/docsite/ae237e47.97a06a49.js"],"7a9deafd":["/docsite/7a9deafd.033dcba0.js"],"6e89837f":["/docsite/6e89837f.408b9cc8.js"],"8072479e":["/docsite/8072479e.fde3b790.js"],"67f7f0af":["/docsite/67f7f0af.096f4b22.js"],"1eb0d661":["/docsite/1eb0d661.bb99dbfb.css","/docsite/1eb0d661.e2d6ede0.js"],"38d1a4ef":["/docsite/38d1a4ef.b6f38a4b.js"],"a13ecb67":["/docsite/a13ecb67.4ff22e77.js"],"fc30cf21":["/docsite/fc30cf21.47dd38b3.js"],"3c06ffaf":["/docsite/3c06ffaf.bb99dbfb.css","/docsite/3c06ffaf.5e66d3c0.js"],"80e7ac46":["/docsite/80e7ac46.a6ce17bd.js"],"65263e04":["/docsite/65263e04.e8f41de3.js"],"0a8e8050":["/docsite/0a8e8050.bc581a18.js"],"4705e7a1":["/docsite/4705e7a1.e2d1ec26.js"],"17969eb4":["/docsite/17969eb4.08b08f87.js"],"50036b11":["/docsite/50036b11.2cfabb81.js"],"4c9f16f0":["/docsite/4c9f16f0.977a4dac.js"],"e3e216fd":["/docsite/e3e216fd.d1a45e6e.js"],"fe9a0438":["/docsite/fe9a0438.db6cdec6.js"],"182507fe":["/docsite/182507fe.bb99dbfb.css","/docsite/182507fe.d73f4471.js"],"db957782":["/docsite/db957782.87de8b68.js"],"29c12071":["/docsite/29c12071.4839655a.js"],"06279ac4":["/docsite/06279ac4.17991aa3.js"],"dcbf60b8":["/docsite/dcbf60b8.c744db48.js"],"5baeab77":["/docsite/5baeab77.52565017.js"],"4583e479":["/docsite/4583e479.e6d7543f.js"],"0cd0532d":["/docsite/0cd0532d.3fe8d04a.js"],"78ba05ff":["/docsite/78ba05ff.352722a4.js"],"7d5b7d40":["/docsite/7d5b7d40.a8153714.js"],"25689b48":["/docsite/25689b48.939085c0.js"],"cd14ec25":["/docsite/cd14ec25.c34f046e.js"],"d419e3e1":["/docsite/d419e3e1.c8d39321.js"],"cc228aab":["/docsite/cc228aab.319f6160.js"],"3d682d4f":["/docsite/3d682d4f.809b2ede.js"],"85caa9e7":["/docsite/85caa9e7.fc8072d8.js"],"f49b7631":["/docsite/f49b7631.28fb6bb9.js"],"d3223938":["/docsite/d3223938.d49f824b.js"],"3b9c71f2":["/docsite/3b9c71f2.0dd0b496.js"],"dd587fe5":["/docsite/dd587fe5.1c22ec9b.js"],"bac13824":["/docsite/bac13824.850062c1.js"],"6747d72b":["/docsite/6747d72b.a7d3a382.js"],"213e76a6":["/docsite/213e76a6.c0099e4d.js"],"7249b070":["/docsite/7249b070.9c8f1677.js"],"8b822973":["/docsite/8b822973.6bd7968a.js"],"b855955d":["/docsite/b855955d.7ff5ddcc.js"],"23db57e6":["/docsite/23db57e6.48202cef.js"],"7d08c7d9":["/docsite/7d08c7d9.06c60460.js"],"986fcf25":["/docsite/986fcf25.320cd992.js"],"614c128a":["/docsite/614c128a.1ccf6dc9.js"],"ed6aaf84":["/docsite/ed6aaf84.253c1105.js"],"60e2e0ad":["/docsite/60e2e0ad.bb99dbfb.css","/docsite/60e2e0ad.b96f04ef.js"],"1d004d4f":["/docsite/1d004d4f.ee94c08e.js"],"427c7282":["/docsite/427c7282.dac33d88.js"],"3cee0e13":["/docsite/3cee0e13.691285e9.js"],"8d9dbcf3":["/docsite/8d9dbcf3.419e70b3.js"],"af584b4a":["/docsite/af584b4a.f3334d39.js"],"f2fc7818":["/docsite/f2fc7818.a3836780.js"],"df6e83fc":["/docsite/df6e83fc.86f4a6fc.js"],"c17af7ff":["/docsite/c17af7ff.a8312a5e.js"],"6d2d7f95":["/docsite/6d2d7f95.ac660a68.js"],"f8d4c3b5":["/docsite/f8d4c3b5.ac10c8ca.js"],"34bb3249":["/docsite/34bb3249.1e940d5d.js"],"b9bf037c":["/docsite/b9bf037c.4149bfed.js"],"412795d7":["/docsite/412795d7.7f4f0867.js"],"ac8597e5":["/docsite/ac8597e5.673303e7.js"],"98fa44c9":["/docsite/98fa44c9.deda4e6a.js"],"439f584e":["/docsite/439f584e.8b402ad1.js"],"236802b2":["/docsite/236802b2.d9909238.js"],"bb9412db":["/docsite/bb9412db.4a5cb3be.js"],"c9fcb32a":["/docsite/c9fcb32a.d543f4f7.js"],"db103f51":["/docsite/db103f51.bc2dd477.js"],"843f9ae0":["/docsite/843f9ae0.b090a22d.js"],"a742cf3e":["/docsite/a742cf3e.70744393.js"],"1fe3553c":["/docsite/1fe3553c.ffb56909.js"],"b9436201":["/docsite/b9436201.0fec96af.js"],"dc8617b3":["/docsite/dc8617b3.be40892d.js"],"1eaf26ba":["/docsite/1eaf26ba.21a26c28.js"],"ec60decb":["/docsite/ec60decb.95ccf60b.js"],"1eab4370":["/docsite/1eab4370.c0354138.js"],"9128dbbb":["/docsite/9128dbbb.387364a2.js"],"85087f88":["/docsite/85087f88.764865b5.js"],"832bdbc2":["/docsite/832bdbc2.0c2b73b2.js"],"b284c1df":["/docsite/b284c1df.c6fdd092.js"],"aee504ae":["/docsite/aee504ae.b0447fc4.js"],"ebf53fdb":["/docsite/ebf53fdb.bfc820e8.js"],"01fc4311":["/docsite/01fc4311.ed251eed.js"],"cd15c05e":["/docsite/cd15c05e.2d2136bb.js"],"1dc17812":["/docsite/1dc17812.3141b6a8.js"],"beebe54d":["/docsite/beebe54d.c2cc2d30.js"],"00e1963e":["/docsite/00e1963e.030a02e2.js"],"f0688b84":["/docsite/f0688b84.0d21c8dd.js"],"6ab7db70":["/docsite/6ab7db70.376a8c38.js"],"60cc2509":["/docsite/60cc2509.986076cb.js"],"f0ca46d8":["/docsite/f0ca46d8.72c97ac9.js"],"10d9fd8d":["/docsite/10d9fd8d.efe3749a.js"],"988dfc52":["/docsite/988dfc52.93b2df39.js"],"d01479ac":["/docsite/d01479ac.691d714b.js"],"bc7cf78e":["/docsite/bc7cf78e.5c1b8859.js"],"4be14196":["/docsite/4be14196.148b24b2.js"],"922fbcdd":["/docsite/922fbcdd.73f5312f.js"],"9ca32d26":["/docsite/9ca32d26.3bc543d4.js"],"af3ba288":["/docsite/af3ba288.f567bb22.js"],"c4f62906":["/docsite/c4f62906.8b671ed9.js"],"903de9cb":["/docsite/903de9cb.06054666.js"],"2d1ffbbd":["/docsite/2d1ffbbd.e2d42c3c.js"],"c34a239d":["/docsite/c34a239d.1b056820.js"],"e9622f49":["/docsite/e9622f49.41210321.js"],"b1a00198":["/docsite/b1a00198.6ad8b36c.js"],"2c9c0d52":["/docsite/2c9c0d52.6338e4d3.js"],"2a30ffac":["/docsite/2a30ffac.795eb4f8.js"],"4487f9f3":["/docsite/4487f9f3.10f6f0ba.js"],"45b8064f":["/docsite/45b8064f.bb99dbfb.css","/docsite/45b8064f.2db1e1c8.js"],"75fd3a3d":["/docsite/75fd3a3d.f23e845f.js"],"8cb59774":["/docsite/8cb59774.4f5470e5.js"],"c894b8d7":["/docsite/c894b8d7.786fe69e.js"],"8817c11b":["/docsite/8817c11b.475cbe11.js"],"1b321cb9":["/docsite/1b321cb9.c4668fd2.js"],"e969442b":["/docsite/e969442b.bb99dbfb.css","/docsite/e969442b.86562286.js"],"139073a4":["/docsite/139073a4.8e969b41.js"],"62c2d618":["/docsite/62c2d618.bb99dbfb.css","/docsite/62c2d618.65d84f89.js"],"475e2f04":["/docsite/475e2f04.0a4983f0.js"],"7895bed1":["/docsite/7895bed1.e14ad8e1.js"],"485beb01":["/docsite/485beb01.b646c9db.js"],"e3f0815c":["/docsite/e3f0815c.a5797a5e.js"],"2bf081b9":["/docsite/2bf081b9.2804a850.js"],"841beeb4":["/docsite/841beeb4.dba0df0b.js"],"8c077d6e":["/docsite/8c077d6e.c58b33d3.js"],"266b4df4":["/docsite/266b4df4.37e72b06.js"],"b98a3732":["/docsite/b98a3732.bee165d3.js"],"96d1d503":["/docsite/96d1d503.da3d3943.js"],"e23820a4":["/docsite/e23820a4.50751c54.js"],"d02b0e26":["/docsite/d02b0e26.45aeb0ce.js"],"06dc108f":["/docsite/06dc108f.b5deda84.js"],"6d5133e3":["/docsite/6d5133e3.7ebf1967.js"],"82eddbbc":["/docsite/82eddbbc.bb99dbfb.css","/docsite/82eddbbc.8159b05b.js"],"e0bb3e5a":["/docsite/e0bb3e5a.381388ce.js"],"b8173626":["/docsite/b8173626.a36bf98b.js"],"9e153541":["/docsite/9e153541.88b7a4b2.js"],"6489409d":["/docsite/6489409d.bb99dbfb.css","/docsite/6489409d.20eed350.js"],"926a3e9b":["/docsite/926a3e9b.90670ed7.js"],"31e7cd9d":["/docsite/31e7cd9d.f53b0cdc.js"],"056d127c":["/docsite/056d127c.2d676329.js"],"aaf4e36b":["/docsite/aaf4e36b.bb99dbfb.css","/docsite/aaf4e36b.0cd510f8.js"],"5280e440":["/docsite/5280e440.f4d4718a.js"],"a9fdbaac":["/docsite/a9fdbaac.bb99dbfb.css","/docsite/a9fdbaac.2ccde4c3.js"],"29f00e4b":["/docsite/29f00e4b.e67e3abc.js"],"4a106cee":["/docsite/4a106cee.bb99dbfb.css","/docsite/4a106cee.a62cdb77.js"],"9969367e":["/docsite/9969367e.d055ae1e.js"],"854d2873":["/docsite/854d2873.c029ffd6.js"],"2de5dc04":["/docsite/2de5dc04.8e0b1bc8.js"],"89086bde":["/docsite/89086bde.bc063fe6.js"],"fb261e89":["/docsite/fb261e89.17a01d68.js"],"dc53247c":["/docsite/dc53247c.e39baa59.js"],"1a67cdf1":["/docsite/1a67cdf1.13241d0e.js"],"7a3a3ff7":["/docsite/7a3a3ff7.e3740769.js"],"3b92a16f":["/docsite/3b92a16f.dceaef65.js"],"d942bcad":["/docsite/d942bcad.65b1ebee.js"],"06d768fd":["/docsite/06d768fd.9bee7a40.js"],"f3157692":["/docsite/f3157692.0dcd16ee.js"],"553d0265":["/docsite/553d0265.6d0875df.js"],"c9952c8d":["/docsite/c9952c8d.d3c3e373.js"],"ef2b6d60":["/docsite/ef2b6d60.291f9efb.js"],"713dc552":["/docsite/713dc552.9dc81a41.js"],"3bf2adf7":["/docsite/3bf2adf7.5ab9cfb2.js"],"80064ca2":["/docsite/80064ca2.bb99dbfb.css","/docsite/80064ca2.f4ccfcc2.js"],"aea92a5e":["/docsite/aea92a5e.21517492.js"],"f9675e35":["/docsite/f9675e35.bb99dbfb.css","/docsite/f9675e35.3ede73aa.js"],"04153fdf":["/docsite/04153fdf.aa60f84e.js"],"6edcb490":["/docsite/6edcb490.97eed2bf.js"],"beefdf71":["/docsite/beefdf71.d057220c.js"],"05712003":["/docsite/05712003.bb99dbfb.css","/docsite/05712003.20a4d331.js"],"2af29633":["/docsite/2af29633.f040f253.js"],"1ba1df6e":["/docsite/1ba1df6e.bb99dbfb.css","/docsite/1ba1df6e.ed80c1b2.js"],"ace0622f":["/docsite/ace0622f.3c69d480.js"],"a55d5f72":["/docsite/a55d5f72.527bbad1.js"],"46408bb0":["/docsite/46408bb0.4d468b4c.js"],"699af1ca":["/docsite/699af1ca.bb99dbfb.css","/docsite/699af1ca.0689081b.js"],"44a22b46":["/docsite/44a22b46.c9622c4b.js"],"44f81845":["/docsite/44f81845.bb99dbfb.css","/docsite/44f81845.b2464eaf.js"],"b2a6c8c9":["/docsite/b2a6c8c9.6b190085.js"],"6c18c0bc":["/docsite/6c18c0bc.bb99dbfb.css","/docsite/6c18c0bc.fc0d80db.js"],"d50781cd":["/docsite/d50781cd.a3914c80.js"],"2ed77221":["/docsite/2ed77221.bb99dbfb.css","/docsite/2ed77221.7c869690.js"],"223e4ab9":["/docsite/223e4ab9.7389409e.js"],"44404b2d":["/docsite/44404b2d.bb99dbfb.css","/docsite/44404b2d.1d8929ca.js"],"88b38720":["/docsite/88b38720.3df48a2b.js"],"01ebbcaa":["/docsite/01ebbcaa.bb99dbfb.css","/docsite/01ebbcaa.451a88a3.js"],"81e8bdf0":["/docsite/81e8bdf0.f8c0f05f.js"],"d70931dc":["/docsite/d70931dc.bb99dbfb.css","/docsite/d70931dc.b14d56a7.js"],"a8136616":["/docsite/a8136616.6711c7ba.js"],"107dbe37":["/docsite/107dbe37.5a6f64d9.js"],"d94e8ef0":["/docsite/d94e8ef0.9131a4f2.js"],"58de53a7":["/docsite/58de53a7.f262dcb6.js"],"1c1410a3":["/docsite/1c1410a3.890cfc8c.js"],"19c852f6":["/docsite/19c852f6.2028bbb9.js"],"663ff5bb":["/docsite/663ff5bb.622e98aa.js"],"a59e1759":["/docsite/a59e1759.51ebb90f.js"],"33330f73":["/docsite/33330f73.84281125.js"]};/*]]>*/</script>

<title data-react-helmet="true">内存泄漏</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="ThinkBucket · The tagline of my site"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="不再用到的内存，没有及时释放，就叫做内存泄漏 (Memory Leak)。"/><meta data-react-helmet="true" property="og:description" content="不再用到的内存，没有及时释放，就叫做内存泄漏 (Memory Leak)。"/><meta data-react-helmet="true" property="og:url" content="https://thinkbucket.github.io/docsite/docs/javascript/2.memory/memory-leak"/>

<link data-react-helmet="true" rel="shortcut icon" href="https://avatars1.githubusercontent.com/u/53037732?s=70&amp;v=4"/>


<link rel="stylesheet" type="text/css" href="/docsite/main.29b42a75.css" />

<link rel="stylesheet" type="text/css" href="/docsite/1.6f6572d2.css" />

<link rel="stylesheet" type="text/css" href="/docsite/2.0c3243b4.css" />

<link rel="stylesheet" type="text/css" href="/docsite/1be78505.a7dc664a.css" />

<link rel="stylesheet" type="text/css" href="/docsite/17896441.f10d0adc.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="https://avatars1.githubusercontent.com/u/53037732?s=70&amp;v=4" alt="Logo"/><strong class="">ThinkBucket</strong></a><a class="navbar__item navbar__link" label="Javascript" position="left" href="/docsite/docs/javascript/preface/overview">Javascript</a><a class="navbar__item navbar__link" label="CSS" position="left" href="/docsite/docs/css/preface/overview">CSS</a><a class="navbar__item navbar__link" label="Web" position="left" href="/docsite/docs/web/preface/overview">Web</a><a class="navbar__item navbar__link" label="React Stack" position="left" href="/docsite/docs/react/preface/overview">React Stack</a><a class="navbar__item navbar__link" label="Design Patterns" position="left" href="/docsite/docs/design-patterns/preface/overview">Design Patterns</a><a class="navbar__item navbar__link" label="Algorithm" position="left" href="/docsite/docs/algorithm/preface/overview">Algorithm</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="Docs" position="right" href="/docsite/docs/doc1">Docs</a><a class="navbar__item navbar__link" label="Blog" position="right" href="/docsite/blog">Blog</a><a class="navbar__item navbar__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/docsite/"><img class="navbar__logo" src="https://avatars1.githubusercontent.com/u/53037732?s=70&amp;v=4" alt="Logo"/><strong>ThinkBucket</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Javascript" position="left" href="/docsite/docs/javascript/preface/overview">Javascript</a></li><li class="menu__list-item"><a class="menu__link" label="CSS" position="left" href="/docsite/docs/css/preface/overview">CSS</a></li><li class="menu__list-item"><a class="menu__link" label="Web" position="left" href="/docsite/docs/web/preface/overview">Web</a></li><li class="menu__list-item"><a class="menu__link" label="React Stack" position="left" href="/docsite/docs/react/preface/overview">React Stack</a></li><li class="menu__list-item"><a class="menu__link" label="Design Patterns" position="left" href="/docsite/docs/design-patterns/preface/overview">Design Patterns</a></li><li class="menu__list-item"><a class="menu__link" label="Algorithm" position="left" href="/docsite/docs/algorithm/preface/overview">Algorithm</a></li><li class="menu__list-item"><a class="menu__link" label="Docs" position="right" href="/docsite/docs/doc1">Docs</a></li><li class="menu__list-item"><a class="menu__link" label="Blog" position="right" href="/docsite/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/ThinkBucket/docsite" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><main class="main"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">前言</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/preface/overview">总览</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/preface/note">说明</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1. 基础概念</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/1.basic/workflow">V8工作流程</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/1.basic/scope">作用域</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/1.basic/execute-context">执行上下文</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">2. 内存管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/2.memory/memory-space">内存空间</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/2.memory/memory-check">内存检测</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/2.memory/old-new-space">分代回收</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/2.memory/reference-counting">引用计数</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docsite/docs/javascript/2.memory/memory-leak">内存泄漏</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/2.memory/gc-optimization">GC缺陷与优化</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">3. 闭包</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/3.closure/closure-external">闭包的形</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/3.closure/closure-internal">闭包的神</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/3.closure/closure-issues">闭包注意事项</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/3.closure/closure-application">闭包的应用</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/3.closure/summary-test">小结与测试</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">4. 函数</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/function-overview">函数概览</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/context-this">上下文与this</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/function-params">函数参数</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/constructor">构造器/构造函数</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/iife">立即执行函数IIFE</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/4.function/chained-call">链式调用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">5. 类型机制</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/5.typing/is-type">类型判断</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/5.typing/type-conversion">类型转换</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/5.typing/equal">比较</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/5.typing/clone">拷贝</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/5.typing/data-binding">数据绑定</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">6. 模块机制</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/6.modules/amd-cmd-umd">AMD/CMD/UMD</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/6.modules/es6-module">ES6 Module</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/6.modules/import()">动态import()</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/6.modules/browser-import">浏览器加载</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/6.modules/babel">Babel编译</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">7. 引用类型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/7.reference-type/array">数组</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/7.reference-type/object">对象</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/7.reference-type/regex">正则表达式</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/7.reference-type/date">日期</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/7.reference-type/set-map">Set/Map</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">8. 面向对象编程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/constructor">构造函数</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/create-instance">创建实例</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/prototype-chain">原型和原型链</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/inherit">原型链继承</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/class">class</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/8.object-oriented-programming/super">super</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">9. 异步编程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/macro-task">宏任务</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/micro-task">微任务</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/event-loop">事件循环</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/callback">Callback</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/promise">Promise</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/9.async-programming/async-await">async/await</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">10. 响应式编程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/10.reactive-programming/race-condition">竞态</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">11. 性能优化</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/11.performance-optimization/debounce">防抖</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/11.performance-optimization/throttle">节流</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/11.performance-optimization/memoization">缓存与记忆化</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/11.performance-optimization/tco">递归与尾调用优化</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">附录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/appendix1-references">I 参考资料</a></li><li class="menu__list-item"><a class="menu__link" href="/docsite/docs/javascript/appendix2-related-websites">II 常用网站</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">内存泄漏</h1></header><article><div class="markdown"><p>不再用到的内存，没有及时释放，就叫做内存泄漏 (Memory Leak)。</p><p>JS 中常见的内存泄漏有：</p><ul><li>意外的全局变量</li><li>创建以及删除DOM</li><li>循环引用</li></ul><h2><a aria-hidden="true" class="anchor" id="内存泄漏的识别方法"></a><a aria-hidden="true" class="hash-link" href="#内存泄漏的识别方法">#</a>内存泄漏的识别方法</h2><h3><a aria-hidden="true" class="anchor" id="找出周期性增长的内存"></a><a aria-hidden="true" class="hash-link" href="#找出周期性增长的内存">#</a>找出周期性增长的内存</h3><p>怎样可以观察到内存泄漏呢？经验法则是，如果连续五次垃圾回收之后，内存占用一次比一次大，就有内存泄漏。这就要求实时查看内存占用。Chrome 浏览器查看内存占用：</p><img src="https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/cf5diM.png"/><p>具体如何查看内存占用请阅读 Chrome DevTools 官方教程：<a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems">Chrome DevTools: 解决内存问题</a>，如果内存占用基本平稳，接近水平，就说明不存在内存泄漏。反之，就是内存泄漏了。</p><h3><a aria-hidden="true" class="anchor" id="保存两个快照"></a><a aria-hidden="true" class="hash-link" href="#保存两个快照">#</a>保存两个快照</h3><p>切换到 Chrome Dev Tools 的 <code>Profiles</code> 标签，刷新页面，等页面刷新完成之后，点击 Take Heap Snapshot 保存快照作为基准。而后再次点击 The Button 按钮，等数秒以后，保存第二个快照。</p><p>筛选菜单选择 Summary，右侧选择 Objects allocated between Snapshot 1 and Snapshot 2，或者筛选菜单选择 Comparison ，然后可以看到一个对比列表。</p><p>此例很容易找到内存泄漏，看下 (string) 的 Size Delta Constructor，8MB，58个新对象。新对象被分配，但是没有释放，占用了8MB。</p><p>如果展开 (string) Constructor，会看到许多单独的内存分配。选择某一个单独的分配，下面的 retainers 会吸引我们的注意。</p><p>我们已选择的分配是数组的一部分，数组关联到 window 对象的 x 变量。这里展示了从巨大对象到无法回收的 root（window）的完整路径。我们已经找到了潜在的泄漏以及它的出处。</p><p>我们的例子还算简单，只泄漏了少量的 DOM 节点，利用以上提到的快照很容易发现。对于更大型的网站，Chrome 还提供了 Record Heap Allocations 功能。</p><h3><a aria-hidden="true" class="anchor" id="record-heap-allocations-找内存泄漏"></a><a aria-hidden="true" class="hash-link" href="#record-heap-allocations-找内存泄漏">#</a>Record heap allocations 找内存泄漏</h3><p>回到 Chrome Dev Tools 的 profiles 标签，点击 Record Heap Allocations。工具运行的时候，注意顶部的蓝条，代表了内存分配，每一秒有大量的内存分配。运行几秒以后停止。</p><p>上图中可以看到工具的杀手锏：选择某一条时间线，可以看到这个时间段的内存分配情况。尽可能选择接近峰值的时间线，下面的列表仅显示了三种 constructor：其一是泄漏最严重的（string），下一个是关联的 DOM 分配，最后一个是 Text constructor（DOM 叶子节点包含的文本）。</p><p>从列表中选择一个 HTMLDivElement constructor，然后选择 Allocation stack。</p><p>现在知道元素被分配到哪里了吧（grow -&gt; createSomeNodes），仔细观察一下图中的时间线，发现 HTMLDivElement constructor 调用了许多次，意味着内存一直被占用，无法被 GC 回收，我们知道了这些对象被分配的确切位置（createSomeNodes）。回到代码本身，探讨下如何修复内存泄漏吧。</p><h3><a aria-hidden="true" class="anchor" id="另一个有用的特性"></a><a aria-hidden="true" class="hash-link" href="#另一个有用的特性">#</a>另一个有用的特性</h3><p>在 heap allocations 的结果区域，选择 Allocation。</p><p>这个视图呈现了内存分配相关的功能列表，我们立刻看到了 grow 和 createSomeNodes。当选择 grow 时，看看相关的 object constructor，清楚地看到 (string), HTMLDivElement 和 Text 泄漏了。</p><p>结合以上提到的工具，可以轻松找到内存泄漏。</p><h2><a aria-hidden="true" class="anchor" id="意外的全局变量"></a><a aria-hidden="true" class="hash-link" href="#意外的全局变量">#</a>意外的全局变量</h2><p>先看以下例子，可以本地建一个 <code>html</code> 文件运行一下。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">btn</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Click</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> happy</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// global</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> </span><span class="token script language-javascript function-variable function" style="color:rgb(130, 170, 255)">poop</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">for</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> i </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">0</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> i</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">100000</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> i</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">++</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">            happy </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">+=</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27; a &#x27;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;btn&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;click&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> poop</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>当我们不断点击 <code>button</code> 的时候通过 <code>Performance</code> 面板可以分析出以下内存占用图：</p><img src="https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/fP2iLE.png"/><p>可以看出发生了内存泄漏，如果修改一下代码，将全局变量换成局部变量：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">btn</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Click</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> </span><span class="token script language-javascript function-variable function" style="color:rgb(130, 170, 255)">poop</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> happy</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// local</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">for</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> i </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">0</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> i</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">100000</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> i</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">++</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">            happy </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">+=</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27; a &#x27;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">    </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;btn&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;click&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> poop</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>再看一下内存占用图，内存得到了及时的回收：</p><img src="https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/uxQLmN.png"/><p>尤其当全局变量用于临时存储和处理大量信息时，需要多加小心。如果必须使用全局变量存储大量数据时，确保用完以后把它设置为 <code>null</code> 或者重新定义。与全局变量相关的增加内存消耗的一个主因是缓存。</p><blockquote><p>缓存数据是为了重用，<strong>缓存必须有一个大小上限才有用</strong>。高内存消耗导致缓存突破上限，因为缓存内容无法被回收。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="创建以及删除dom"></a><a aria-hidden="true" class="hash-link" href="#创建以及删除dom">#</a>创建以及删除DOM</h2><p>有一组很经典的情况就是游离状的DOM无法被回收。以下的代码， <code>node</code> 已经被删除了，那么 <code>node</code> 中的子元素是否可以被回收？</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> node </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> div </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createElement</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;div&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">appendChild</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">div</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">removeChild</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>答案是 <code>NO</code> ，因为 <code>node</code> 的引用还存在着，虽然在DOM中被删除了，但在 <code>window</code> 中引用还在，这个时候 node 的子元素就会以游离状态的DOM存在，而且无法被回收，如下图所示：</p><div align="center"><img width="300" src="https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/fGBpmf.png"/></div><p>解决方案就是 <code>node = null</code> ，手动清空引用，消除游离状态的DOM。</p><p>即使 <code>setInterval</code> 像下面这样写，其实也没发生内存泄漏：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">setInterval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> happy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        happy </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27; a &#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><img src="https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/qpzkFL.png"/><p><code>setInterval</code> 只是放大了内存泄漏，但并不是罪魁祸首。</p><h2><a aria-hidden="true" class="anchor" id="循环引用"></a><a aria-hidden="true" class="hash-link" href="#循环引用">#</a>循环引用</h2><p>对于观察者的例子，一旦它们不再需要（或者关联的对象变成不可达），明确地移除它们非常重要。老的 IE 6 是无法处理循环引用的。如今，即使没有明确移除它们，一旦观察者对象变成不可达，大部分浏览器是可以回收观察者处理函数的。</p><p>观察者代码示例：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> element </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;button&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onClick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;text&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;click&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> onClick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>老版本的 IE 是无法检测 DOM 节点与 JavaScript 代码之间的循环引用，会导致内存泄漏。如今，现代的浏览器（包括 IE 和 Microsoft Edge）使用了更先进的垃圾回收算法，已经可以正确检测和处理循环引用了。换言之，回收节点内存时，不必非要调用 removeEventListener 了。</p><p>在 Chrome 中查看一下内存情况，发现其实并没有发生泄漏：</p><h2><a aria-hidden="true" class="anchor" id="weaksetweakmap"></a><a aria-hidden="true" class="hash-link" href="#weaksetweakmap">#</a>WeakSet/WeakMap</h2><p>前面说过，及时清除引用非常重要。但是，你不可能记得那么多，有时候一疏忽就忘了，所以才有那么多内存泄漏。</p><p>最好能有一种方法，在新建引用的时候就声明，哪些引用必须手动清除，哪些引用可以忽略不计，当其他引用消失以后，垃圾回收机制就可以释放内存。这样就能大大减轻程序员的负担，你只要清除主要引用就可以了。</p><p>ES6 考虑到了这一点，推出了两种新的数据结构：WeakSet 和 WeakMap。它们对于值的引用都是不计入垃圾回收机制的（<strong>其实就是对key或者value的引用计数不再增加，相当于WeakMap中这次引用计数是不算数的</strong>），所以名字里面才会有一个&quot;Weak&quot;，表示这是弱引用。</p><p>下面以 WeakMap 为例，看看它是怎么解决内存泄漏的。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> wm </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">WeakMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> element </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;example&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">wm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;some information&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">wm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &quot;some information&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码中，先新建一个 WeakMap 实例。然后，将一个 DOM 节点作为键名存入该实例，并将一些附加信息作为键值，一起存放在 WeakMap 里面。这时，WeakMap 里面对 <code>element</code> 的引用就是弱引用，不会被计入垃圾回收机制。</p><p>也就是说，DOM 节点对象的引用计数是1，而不是2。这时，一旦消除对该节点的引用，它占用的内存就会被垃圾回收机制释放。 WeakMap 保存的这个键值对，也会自动消失。</p><p>基本上，如果你要往对象上添加数据，又不想干扰垃圾回收机制，就可以使用 WeakMap。只要外部的引用消失（比如 <code>element</code> 的引用被解除），WeakMap 内部的引用，就会自动被垃圾回收清除（<code>&#x27;some information&#x27;</code>的空间就会被回收）。</p><h2><a aria-hidden="true" class="anchor" id="更多阅读"></a><a aria-hidden="true" class="hash-link" href="#更多阅读">#</a>更多阅读</h2><ol><li><a href="https://youtu.be/nrPa0mEk4Pw">YouTube Video: Find memory leaks with Chrome Dev Tools</a></li><li><a href="https://youtu.be/RJRbZdtKmxU">YouTube Video: He&#x27;s Dead Jim: Finding JS Memory Leaks with Chrome Dev Tools</a></li><li><a href="https://youtu.be/xrX_BtOUDls">YouTube Video: How Javascript Causes Memory Leak</a></li><li><a href="https://juejin.im/post/5c4044e1f265da614f708f7d">深度解密setTimeout和setInterval——为setInterval正名！作者：小美娜娜</a></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ThinkBucket/docsite/edit/master/docs/javascript/2.memory/memory-leak.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated<!-- --> <!-- -->on<!-- --> <strong>10/12/2019</strong> <!-- -->by <strong>Kimi Gao</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docsite/docs/javascript/2.memory/reference-counting"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->引用计数</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docsite/docs/javascript/2.memory/gc-optimization"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">GC缺陷与优化<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#内存泄漏的识别方法" class="contents__link">内存泄漏的识别方法</a><ul class=""><li><a href="#找出周期性增长的内存" class="contents__link">找出周期性增长的内存</a></li><li><a href="#保存两个快照" class="contents__link">保存两个快照</a></li><li><a href="#record-heap-allocations-找内存泄漏" class="contents__link">Record heap allocations 找内存泄漏</a></li><li><a href="#另一个有用的特性" class="contents__link">另一个有用的特性</a></li></ul></li><li><a href="#意外的全局变量" class="contents__link">意外的全局变量</a></li><li><a href="#创建以及删除dom" class="contents__link">创建以及删除DOM</a></li><li><a href="#循环引用" class="contents__link">循环引用</a></li><li><a href="#weaksetweakmap" class="contents__link">WeakSet/WeakMap</a></li><li><a href="#更多阅读" class="contents__link">更多阅读</a></li></ul></div></div></div></div></div></div></main></div></main><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">相关资源</h4><ul class="footer__items"><li class="footer__item"><a aria-current="page" class="footer__link-item active" label="文档介绍" href="/docsite/">文档介绍</a></li><li class="footer__item"><a class="footer__link-item" label="MDX" to="https://github.com/mdx-js/mdx" href="https://github.com/mdx-js/mdx">MDX</a></li><li class="footer__item"><a class="footer__link-item" label="Docusaurus" to="https://github.com/facebook/docusaurus" href="https://github.com/facebook/docusaurus">Docusaurus</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">帮助</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="更新日志" href="https://github.com/ThinkBucket/docsite/releases" target="_blank" rel="noopener noreferrer">更新日志</a></li><li class="footer__item"><a class="footer__link-item" label="讨论列表" href="https://github.com/ThinkBucket/docsite/issues" target="_blank" rel="noopener noreferrer">讨论列表</a></li><li class="footer__item"><a class="footer__link-item" label="报告 Bug" href="https://github.com/ThinkBucket/docsite/issues/new" target="_blank" rel="noopener noreferrer">报告 Bug</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Blog" href="/docsite/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" label="GitHub" href="https://github.com/ThinkBucket/docsite" target="_blank" rel="noopener noreferrer">GitHub</a></li><div><iframe src="https://ghbtns.com/github-btn.html?user=ThinkBucket&repo=docsite&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe></div></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"/></div>Copyright © 2019 ThinkBucket.</div></div></footer>
</div>

<script type="text/javascript" src="/docsite/runtime~main.1d1257b2.js"></script>

<script type="text/javascript" src="/docsite/main.1be15401.js"></script>

<script type="text/javascript" src="/docsite/1.1073e6bc.js"></script>

<script type="text/javascript" src="/docsite/2.09e32ab6.js"></script>

<script type="text/javascript" src="/docsite/1be78505.b70f1190.js"></script>

<script type="text/javascript" src="/docsite/1f74bc4f.ec706bd9.js"></script>

<script type="text/javascript" src="/docsite/17896441.e073e502.js"></script>

<script type="text/javascript" src="/docsite/b43c2a92.dda0ce64.js"></script>

<script type="text/javascript" src="/docsite/d0b14826.cf8b4d32.js"></script>

</body>
</html>