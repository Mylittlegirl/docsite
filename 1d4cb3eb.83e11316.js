(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{246:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"rightToc",(function(){return b})),t.d(n,"default",(function(){return o}));t(0);var a=t(546);function l(){return(l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}const r={title:"\u6267\u884c\u4e0a\u4e0b\u6587",sidebar_label:"\u6267\u884c\u4e0a\u4e0b\u6587"},b=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",children:[]},{value:"Activation / Variable Object AO/VO",id:"activation--variable-object-aovo",children:[]},{value:"\u53d8\u91cf\u540d\u63d0\u5347(Hoisting)",id:"\u53d8\u91cf\u540d\u63d0\u5347hoisting",children:[]}],c={rightToc:b},i="wrapper";function o({components:e,...n}){return Object(a.b)(i,l({},c,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),Object(a.b)("p",null,"\u8fd9\u662f\u6df7\u6dc6\u7ecf\u5e38\u51fa\u73b0\u7684\u5730\u65b9\uff0c\u201c\u6267\u884c\u4e0a\u4e0b\u6587\uff08Execution Context\uff09\u201d\u66f4\u591a\u5730\u6d89\u53ca\u4f5c\u7528\u57df\u800c\u4e0d\u662f\u5982\u524d\u6240\u8ff0\u7684\u4e0a\u4e0b\u6587\uff08Context\uff09\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5f53\u524d\u4ee3\u7801\u7684\u6267\u884c\u73af\u5883\u3002\u8fd9\u662f\u4e00\u4e2a\u4e0d\u5e78\u7684\u547d\u540d\u7ea6\u5b9a\uff0c\u4f46\u5b83\u662fECMAScript\u89c4\u8303\u5b9a\u4e49\u7684\u672f\u8bed\u3002"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"\u4e0a\u4e0b\u6587"),"\uff1a\u65b9\u6cd5\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5373this\u6307\u4ee3\u90a3\u4e2a\u5bf9\u8c61\uff0c\u5373",Object(a.b)("strong",{parentName:"li"},"\u4e0a\u4e0b\u6587\u662f\u57fa\u4e8e\u5bf9\u8c61\u7684"),"\u3002"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"\u6267\u884c\u4e0a\u4e0b\u6587"),"\uff1a\u9664\u4e86this\u6307\u5411\u8fd8\u5305\u62ecVO\u548c\u4f5c\u7528\u57df\u94fe\uff0c\u66f4\u504f\u5411\u4e8e\u4f5c\u7528\u57df\u7684\u63cf\u8ff0\u3002\u6bd4\u5982\u5168\u5c40EC\uff1a")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"windowEC = {\n   VO: Window,\n   scopeChain: {},\n   this: Window\n}\n")),Object(a.b)("p",null,"JS\u662f\u5355\u7ebf\u7a0b\u8bed\u8a00\uff0c\u610f\u5473\u7740\u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u3002\u5f53JS\u7f16\u8bd1\u5668\u6700\u521d\u6267\u884c\u4ee3\u7801\u65f6\uff0c\u5b83\u9996\u5148\u9ed8\u8ba4\u8fdb\u5165\u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587\u3002\u4ee5\u540e\u6bcf\u6b21\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u90fd\u4f1a\u5bfc\u81f4\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"\u6bcf\u8fdb\u5165\u4e00\u4e2a\u4e0d\u540c\u7684\u8fd0\u884c\u73af\u5883\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u76f8\u5e94\u7684\u6267\u884c\u4e0a\u4e0b\u6587"),"\uff0c\u90a3\u4e48\u5728\u4e00\u6bb5JS\u7a0b\u5e8f\u4e2d\u4e00\u822c\u90fd\u4f1a\u521b\u5efa\u591a\u4e2a\u6267\u884c\u4e0a\u4e0b\u6587\uff0cJS\u5f15\u64ce\u4f1a\u4ee5",Object(a.b)("strong",{parentName:"p"},"\u6808"),"\u7684\u65b9\u5f0f\u5bf9\u8fd9\u4e9b\u6267\u884c\u4e0a\u4e0b\u6587\u8fdb\u884c\u5904\u7406\uff0c\u5f62\u6210\u51fd\u6570\u8c03\u7528\u6808\uff08call stack\uff09\uff0c\u6808\u5e95\u6c38\u8fdc\u662f\u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u6808\u9876\u5219\u6c38\u8fdc\u662f\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u3002"),Object(a.b)("p",null,"EC\u7279\u70b9\uff1a"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u5355\u7ebf\u7a0b"),Object(a.b)("li",{parentName:"ul"},"\u540c\u6b65\u6267\u884c\uff0c\u53ea\u6709\u6808\u9876\u7684\u4e0a\u4e0b\u6587\u5904\u4e8e\u6267\u884c\u4e2d\uff0c\u5176\u4ed6\u4e0a\u4e0b\u6587\u9700\u8981\u7b49\u5f85"),Object(a.b)("li",{parentName:"ul"},"\u5168\u5c40\u4e0a\u4e0b\u6587\u53ea\u6709\u552f\u4e00\u7684\u4e00\u4e2a\uff0c\u5b83\u5728\u6d4f\u89c8\u5668\u5173\u95ed\u65f6\u51fa\u6808"),Object(a.b)("li",{parentName:"ul"},"\u6bcf\u6b21\u51fd\u6570\u88ab\u8c03\u7528\uff0c\u5c31\u4f1a\u6709\u4e2a\u65b0\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u4e3a\u5176\u521b\u5efa\uff0c\u5373\u4f7f\u662f\u8c03\u7528\u7684\u81ea\u8eab\u51fd\u6570\uff0c\u4e5f\u662f\u5982\u6b64\u3002")),Object(a.b)("p",null,"\u4e24\u5927\u9636\u6bb5"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"\u521b\u5efa\u9636\u6bb5")," ","[\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u6267\u884c\u5185\u90e8\u4ee3\u7801\u524d]",":",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u6839\u636e\u4e4b\u524d\u89e3\u6790\u9636\u6bb5\u7684\u6210\u679c\u521b\u5efa\u4f5c\u7528\u57df\u94fe"),Object(a.b)("li",{parentName:"ul"},"\u521b\u5efa variables, functions \u548c arguments"),Object(a.b)("li",{parentName:"ul"},'\u786e\u5b9a "this" \u7684\u503c'))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"\u6fc0\u6d3b / \u4ee3\u7801\u6267\u884c\u9636\u6bb5"),":",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u8d4b\u503c"),Object(a.b)("li",{parentName:"ul"},"\u51fd\u6570\u5f15\u7528"),Object(a.b)("li",{parentName:"ul"},"\u89e3\u91ca(\u7f16\u8bd1)\u6267\u884c\u4ee3\u7801")))),Object(a.b)("p",null,"\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u6267\u884c\u4e0a\u4e0b\u6587\u5728\u6982\u5ff5\u4e0a\u8868\u793a\u4e3a\u5177\u67093\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"executionContextObj = {\n   'scopeChain': { /* variableObject + all parent execution context's variableObject */ },\n   'variableObject': { /* function arguments / parameters, inner variable and function declarations */ },\n   'this': {}\n}\n")),Object(a.b)("h2",{id:"activation--variable-object-aovo"},"Activation / Variable Object ","[AO/VO]"),Object(a.b)("p",null,"\u521b\u5efa\u9636\u6bb5\u89e3\u91ca\u5668\u901a\u8fc7\u626b\u63cf\u4f20\u5165\u7684\u53c2\u6570\u6216\u53c2\u6570\u7684\u51fd\u6570\uff0c\u672c\u5730\u51fd\u6570\u58f0\u660e\u548c\u5c40\u90e8\u53d8\u91cf\u58f0\u660e\u6765\u521b\u5efaexecutionContextObj\u3002\u6b64\u626b\u63cf\u7684\u7ed3\u679c\u5c06\u6210\u4e3aexecutionContextObj\u4e2d\u7684variableObject\u3002"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u67e5\u627e\u8c03\u7528\u51fd\u6570\u7684\u4ee3\u7801\u3002"),Object(a.b)("li",{parentName:"ul"},"\u521b\u5efa\u9636\u6bb5\uff0c\u5728\u4e4b\u524d\u51fd\u6570\u5185\u90e8\u4ee3\u7801\u4e4b\u524d\uff0c\u5148\u521b\u5efa\u6267\u884c\u4e0a\u4e0b\u6587:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u521d\u59cb\u5316\u4f5c\u7528\u57df\u94fe."),Object(a.b)("li",{parentName:"ul"},"\u521b\u5efa\u53d8\u91cf\u5bf9\u8c61VO:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u521b\u5efaarguments\u5bf9\u8c61\uff0c\u68c0\u67e5\u4e0a\u4e0b\u6587\uff0c\u521d\u59cb\u5316\u53c2\u6570\u540d\u79f0\u548c\u503c\u5e76\u521b\u5efa\u5f15\u7528\u7684\u590d\u5236\u3002"),Object(a.b)("li",{parentName:"ul"},"\u626b\u63cf\u4e0a\u4e0b\u6587\u7684\u51fd\u6570\u58f0\u660e:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u4e3a\u6bcf\u4e00\u4e2a\u51fd\u6570\uff0c\u5728variableObject\u4e0a\u521b\u5efa\u4e00\u4e2a{\u51fd\u6570\u540d: \u5f15\u7528\u5730\u5740}."),Object(a.b)("li",{parentName:"ul"},"\u5982\u679c\u51fd\u6570\u7684\u540d\u5b57\u5df2\u7ecf\u5b58\u5728\uff0c\u5f15\u7528\u6307\u9488\u5c06\u88ab\u91cd\u5199."))),Object(a.b)("li",{parentName:"ul"},"\u626b\u63cf\u4e0a\u4e0b\u6587\u7684\u53d8\u91cf\u58f0\u660e:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u4e3a\u6bcf\u4e2a\u53d8\u91cf\u58f0\u660e\uff0c\u5728variableObject\u4e0a\u521b\u5efa\u4e00\u4e2a{ \u53d8\u91cf\u540d: undefined}"),Object(a.b)("li",{parentName:"ul"},"\u5982\u679c\u53d8\u91cf\u540d\u5df2\u7ecf\u5728variableObject\u91cc\uff0c\u5c06\u4e0d\u4f1a\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u5e76\u7ee7\u7eed\u626b\u63cf."))),Object(a.b)("li",{parentName:"ul"},'\u786e\u5b9a\u4e0a\u4e0b\u6587\u5185\u90e8 "this" \u7684\u503c.'))))),Object(a.b)("li",{parentName:"ul"},"\u6fc0\u6d3b / \u4ee3\u7801\u6267\u884c\u9636\u6bb5:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u5728\u5f53\u524d\u4e0a\u4e0b\u6587\u4e0a\u8fd0\u884c/\u89e3\u91ca\u51fd\u6570\u4ee3\u7801\uff0c\u5e76\u968f\u7740\u4ee3\u7801\u4e00\u884c\u884c\u6267\u884c\u6307\u6d3e\u53d8\u91cf\u7684\u503c")))),Object(a.b)("p",null,"\u793a\u4f8b:"),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"function foo(i) {\n   var a = 'hello';\n   var b = function privateB() {};\n   function c() {}\n}\n\nfoo(22);\n")),Object(a.b)("p",null,"\u5728\u8c03\u7528 ",Object(a.b)("inlineCode",{parentName:"p"},"foo(22)")," \u65f6\uff0c\u521b\u5efa\u9636\u6bb5\u5982\u4e0b\u6240\u793a:"),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"fooExecutionContext = {\n   scopeChain: { ... },\n   variableObject: {\n       arguments: {\n           0: 22,\n           length: 1\n       },\n       i: 22,\n       c: pointer to function c()\n       a: undefined,\n       b: undefined\n   },\n   this: { ... }\n}\n")),Object(a.b)("p",null,"\u521b\u5efa\u9636\u6bb5\u5904\u7406\u5b9a\u4e49\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u662f\u4e3a\u5b83\u4eec\u8d4b\u503c\uff0c\u4f46\u53c2\u6570\u9664\u5916\u3002\u521b\u5efa\u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u8fdb\u5165\u51fd\u6570\u6267\u884c\u6d41\u7a0b\uff0c\u6fc0\u6d3b/\u4ee3\u7801\u6267\u884c\u9636\u6bb5\u5728\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\u5982\u4e0b\u6240\u793a:"),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"fooExecutionContext = {\n   scopeChain: { ... },\n   variableObject: {\n       arguments: {\n           0: 22,\n           length: 1\n       },\n       i: 22,\n       c: pointer to function c()\n       a: 'hello',\n       b: pointer to function privateB()\n   },\n   this: { ... }\n}\n")),Object(a.b)("h2",{id:"\u53d8\u91cf\u540d\u63d0\u5347hoisting"},"\u53d8\u91cf\u540d\u63d0\u5347(Hoisting)"),Object(a.b)("p",null,"\u638c\u63e1\u4e86\u5173\u4e8e\u89e3\u91ca\u5668\u5982\u4f55\u521b\u5efaAO\u7684\u65b0\u77e5\u8bc6\uff0c\u5f88\u5bb9\u6613\u7406\u89e3\u4e3a\u4ec0\u4e48\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u7684\u7ec6\u8282\u3002\u8bf7\u4ee5\u4e0b\u4ee3\u7801\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-js"}),"\u200b(function() {\n    console.log(typeof foo); // function pointer\n    console.log(typeof bar); // undefined\n    function foo() {\n       return 'hello';\n    }\n    var foo = 'hello';\n    var bar = function() {\n       return 'world';\n    };\n}());\u200b\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Q: \u4e3a\u4ec0\u4e48\u6211\u4eec\u80fd\u5728foo\u58f0\u660e\u4e4b\u524d\u8bbf\u95ee\u5b83\uff1f")),Object(a.b)("p",null,"A: \u5728\u51fd\u6570\u5185\u90e8\u4ee3\u7801\u6267\u884c\u4e4b\u524d\u4f1a\u6709\u4e00\u4e2a\u521b\u5efa\u9636\u6bb5\uff0cfoo\u90a3\u4e2a\u65f6\u5019\u5c31\u5df2\u7ecf\u5728VO\u91cc\u9762\u88ab\u5b9a\u4e49\u4e86\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Q: Foo\u88ab\u58f0\u660e\u4e86\u4e24\u6b21\uff0c\u4e3a\u4ec0\u4e48foo\u663e\u793a\u4e3a\u51fd\u6570\u800c\u4e0d\u662fundefined\u6216\u5b57\u7b26\u4e32\uff1f")),Object(a.b)("p",null,"A: \u9996\u5148\u626b\u63cf\u51fd\u6570\u58f0\u660e\u6bd4\u626b\u63cf\u53d8\u91cf\u58f0\u660e\u65e9\uff0c\u5176\u6b21\u626b\u63cf\u53d8\u91cf\u58f0\u660e\u65f6\u5982\u679c\u53d1\u73b0VO\u4e2d\u5df2\u7ecf\u5b58\u5728\u4e86\u5219\u4f1a\u8df3\u8fc7\u3002"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Q: \u4e3a\u4ec0\u4e48bar\u7684\u503c\u662fundefined\uff1f")),Object(a.b)("p",null,"bar\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u4f46\u53d8\u91cf\u7684\u503c\u662f\u51fd\u6570\uff0c\u5e76\u4e14\u6211\u4eec\u77e5\u9053\u53d8\u91cf\u5728\u521b\u5efa\u9636\u6bb5\u88ab\u521b\u5efa\u4f46\u4ed6\u4eec\u88ab\u521d\u59cb\u5316\u4e3aundefined\u3002"))}o.isMDXComponent=!0},546:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return p}));var a=t(0),l=t.n(a),r=l.a.createContext({}),b=function(e){var n=l.a.useContext(r),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},c=function(e){var n=b(e.components);return l.a.createElement(r.Provider,{value:n},e.children)};var i="mdxType",o={inlineCode:"code",wrapper:function(e){var n=e.children;return l.a.createElement(l.a.Fragment,{},n)}},u=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,i=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===n.indexOf(a)&&(t[a]=e[a]);return t}(e,["components","mdxType","originalType","parentName"]),u=b(t),p=a,O=u[c+"."+p]||u[p]||o[p]||r;return t?l.a.createElement(O,Object.assign({},{ref:n},i,{components:t})):l.a.createElement(O,Object.assign({},{ref:n},i))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,b=new Array(r);b[0]=u;var c={};for(var o in n)hasOwnProperty.call(n,o)&&(c[o]=n[o]);c.originalType=e,c[i]="string"==typeof e?e:a,b[1]=c;for(var p=2;p<r;p++)b[p]=t[p];return l.a.createElement.apply(null,b)}return l.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);