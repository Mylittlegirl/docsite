(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{184:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));n(0);var r=n(388);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c={title:"宏任务",sidebar_label:"宏任务"},l=[{value:"前言",id:"前言",children:[]},{value:"同步宏任务",id:"同步宏任务",children:[]},{value:"异步宏任务",id:"异步宏任务",children:[{value:"setTimeout",id:"settimeout",children:[]}]},{value:"setTimeout应用拓展",id:"settimeout应用拓展",children:[]}],i={rightToc:l},b="wrapper";function p(e){var t=e.components,n=o(e,["components"]);return Object(r.b)(b,a({},i,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"前言"},"前言"),Object(r.b)("p",null,"宏任务（macro-task/task）又按执行顺序分为同步宏任务和异步宏任务（这是两个宏任务）。理解宏任务中同步任务和异步任务的执行顺序，那么就相当于理解了JS异步执行机制–事件循环（Event Loop）。"),Object(r.b)("p",null,"总的执行顺序："),Object(r.b)("p",null,"(macro)task->渲染->(macro)task->..."),Object(r.b)("h2",{id:"同步宏任务"},"同步宏任务"),Object(r.b)("p",null,"同步任务指的是在JS引擎主线程上按顺序执行的任务，只有前一个任务执行完毕后，才能执行后一个任务，形成一个执行栈（函数调用栈）。"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"console.log('script start');\nconsole.log('script end');\n")),Object(r.b)("h2",{id:"异步宏任务"},"异步宏任务"),Object(r.b)("p",null,"异步任务指的是不直接进入JS引擎主线程，而是满足触发条件时，相关的线程将该异步任务推进任务队列(task queue)，等待JS引擎主线程上的任务执行完毕，空闲时读取执行的任务，例如"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"异步Ajax"),Object(r.b)("li",{parentName:"ul"},"DOM事件"),Object(r.b)("li",{parentName:"ul"},"setTimeout/setInterval"),Object(r.b)("li",{parentName:"ul"},"I/O"),Object(r.b)("li",{parentName:"ul"},"UI rendering"),Object(r.b)("li",{parentName:"ul"},"postMessage"),Object(r.b)("li",{parentName:"ul"},"MessageChannel"),Object(r.b)("li",{parentName:"ul"},"setImmediate(Node.js 环境)")),Object(r.b)("h3",{id:"settimeout"},"setTimeout"),Object(r.b)("p",null,Object(r.b)("a",a({parentName:"p"},{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout"}),"点击查看"),Object(r.b)("inlineCode",{parentName:"p"},"setTimeout"),"语法"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"setTimeout(function() {\n console.log('setTimeout');\n}, 0);\n")),Object(r.b)("p",null,"每一个",Object(r.b)("inlineCode",{parentName:"p"},"setTimeout"),"在执行时，会返回一个唯一ID。我们在使用时，常常会使用一个变量将这个唯一ID保存起来，用以传入",Object(r.b)("inlineCode",{parentName:"p"},"clearTimeout"),"，清除定时器。"),Object(r.b)("p",null,"我们都知道",Object(r.b)("inlineCode",{parentName:"p"},"setTimeout"),"和",Object(r.b)("inlineCode",{parentName:"p"},"setInterval"),"是异步任务的定时器，需要添加到任务队列等待主线程执行，那么使用",Object(r.b)("inlineCode",{parentName:"p"},"setTimeout"),"模拟实现",Object(r.b)("inlineCode",{parentName:"p"},"setInterval"),"，会有区别吗？"),Object(r.b)("p",null,"如果感兴趣，想深入了解两者的不同，可以",Object(r.b)("a",a({parentName:"p"},{href:"https://thinkbucket.github.io/docsite/blog/setTimeout-or-setInterval"}),"点击此处查看")),Object(r.b)("h2",{id:"settimeout应用拓展"},"setTimeout应用拓展"),Object(r.b)("p",null,Object(r.b)("a",a({parentName:"p"},{href:"https://css-tricks.com/debouncing-throttling-explained-examples/"}),"防抖和节流教程")),Object(r.b)("p",null,Object(r.b)("a",a({parentName:"p"},{href:"https://github.com/ThinkBucket/codebox/blob/master/src/debounce.js"}),"防抖源码实现")),Object(r.b)("p",null,Object(r.b)("a",a({parentName:"p"},{href:"https://github.com/ThinkBucket/codebox/blob/master/src/throttle.js"}),"节流源码实现")))}p.isMDXComponent=!0},388:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(0),a=n.n(r),o=a.a.createContext({}),c=function(e){var t=a.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=c(e.components);return a.a.createElement(o.Provider,{value:t},e.children)};var i="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["components","mdxType","originalType","parentName"]),p=c(n),u=r,s=p[l+"."+u]||p[u]||b[u]||o;return n?a.a.createElement(s,Object.assign({},{ref:t},i,{components:n})):a.a.createElement(s,Object.assign({},{ref:t},i))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=p;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l[i]="string"==typeof e?e:r,c[1]=l;for(var u=2;u<o;u++)c[u]=n[u];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);