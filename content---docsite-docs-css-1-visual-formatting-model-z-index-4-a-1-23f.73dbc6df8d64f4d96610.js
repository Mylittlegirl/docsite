(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{124:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return m}));n(0);var l=n(438),i=n(442),c=n(439);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},c=Object.keys(e);for(l=0;l<c.length;l++)n=c[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)n=c[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o={title:"层叠",sidebar_label:"层叠"},b=[{value:"层叠顺序",id:"层叠顺序",children:[]},{value:"层叠规则",id:"层叠规则",children:[]},{value:"层叠上下文",id:"层叠上下文",children:[{value:"层叠上下文的创建",id:"层叠上下文的创建",children:[]},{value:"层叠上下文与层叠顺序",id:"层叠上下文与层叠顺序",children:[]}]},{value:"负 z-index",id:"负-z-index",children:[]}],p={rightToc:b},s="wrapper";function m(e){var t=e.components,n=r(e,["components"]);return Object(l.b)(s,a({},p,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"层叠顺序"},"层叠顺序"),Object(l.b)(i.a,{width:"450",align:"center",legend:"图: 层叠顺序类型标注",src:"https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/page228image27822112.jpg",mdxType:"Img"}),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"位于最下面的 background/border 特指层叠上下文元素的边框和背景色。每一个 层叠顺序规则仅适用于当前层叠上下文元素的小世界。"),Object(l.b)("li",{parentName:"ol"},"inline水平盒子指的是包括inline/inline-block/inline-table元素的“层 叠顺序”，它们都是同等级别的。"),Object(l.b)("li",{parentName:"ol"},"单纯从层叠水平上看，实际上 z-index:0 和 z-index:auto 是可以看成是一样的。注 意这里的措辞— “单纯从层叠水平上看”，实际上，两者在层叠上下文领域有着根本性的差异。")),Object(l.b)(c.a,{type:"warning",mdxType:"Hint"},"内联元素的层叠顺序要比浮动元素和块状元素都高。"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"background"),"/",Object(l.b)("inlineCode",{parentName:"p"},"border")," 为装饰属性，浮动和块状元素一般用作布局，而内联元素都是内容。 网页中最重要的是什么?当然是内容了!尤其是 CSS 世界是为 更好的图文展示而设计的，因此，一定要让内容的层叠顺序相当 高，这样当发生层叠时，重要的文字、图片内容才可以优先显示。例如，文字和浮动图片重叠的时候."),Object(l.b)("h2",{id:"层叠规则"},"层叠规则"),Object(l.b)("p",null,"下面这两条是层叠领域的黄金准则。当元素发生层叠的时候，其覆盖关系遵循下面两条准则:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"谁大谁上"),":当具有明显的层叠水平标识的时候，如生效的 z-index 属性值，在同一个层叠上下文领域，层叠水平值大的那一个覆盖小的那一个。"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"后来居上"),":当元素的层叠水平一致、层叠顺序相同的时候，在 DOM 流中处于后面的元素会覆盖前面的元素。")),Object(l.b)("p",null,"在 CSS 和 HTML 领域，只要元素发生了重叠，都离不开上面这两条黄金准则。"),Object(l.b)("h2",{id:"层叠上下文"},"层叠上下文"),Object(l.b)("p",null,"Demo：",Object(l.b)("a",a({parentName:"p"},{href:"https://demo.cssworld.cn/7/5-1.php"}),"https://demo.cssworld.cn/7/5-1.php")),Object(l.b)("h3",{id:"层叠上下文的创建"},"层叠上下文的创建"),Object(l.b)("p",null,"和块状格式化上下文一样，层叠上下文也基本上是由一些特定的 CSS 属性创建的。我将其 总结为 3 个流派。"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"天生派:页面根元素天生具有层叠上下文，称为根层叠上下文。"),Object(l.b)("li",{parentName:"ol"},"正统派:z-index 值为数值的定位元素的传统“层叠上下文”。"),Object(l.b)("li",{parentName:"ol"},"扩招派:其他 CSS3 属性。")),Object(l.b)(c.a,{type:"tip",mdxType:"Hint"},"z-index 只是产生层叠上下文的一种方式，但不是全部。"),Object(l.b)("p",null,"注：定位元素指position不为static的元素\nposition: absolute/relative 的元素z-index不为auto的时候才会创建新的层叠上下文。\n在Chrome中，position: fixed是属于天生派中，auto也会创建层叠上下文。"),Object(l.b)("h4",{id:"根层叠上下文"},"根层叠上下文"),Object(l.b)("p",null,"根层叠上下文指的是页面根元素，可以看成是 ",Object(l.b)("inlineCode",{parentName:"p"},"<html>")," 元素。因此，页面中所有的元素一 定处于至少一个“",Object(l.b)("strong",{parentName:"p"},"层叠结界"),"”中。"),Object(l.b)("h4",{id:"定位元素与传统层叠上下文"},"定位元素与传统层叠上下文"),Object(l.b)("p",null,"对于 ",Object(l.b)("inlineCode",{parentName:"p"},"position")," 值为 ",Object(l.b)("inlineCode",{parentName:"p"},"relative"),"/",Object(l.b)("inlineCode",{parentName:"p"},"absolute")," 以及 Firefox/IE 浏览器(不包括 Chrome 浏览器)下含有 ",Object(l.b)("inlineCode",{parentName:"p"},"position:fixed")," 声明的定位元素，当其 ",Object(l.b)("inlineCode",{parentName:"p"},"z-index")," 值不是 ",Object(l.b)("inlineCode",{parentName:"p"},"auto")," 的时候，会创建层叠上下文。"),Object(l.b)("h4",{id:"css3-与新时代的层叠上下文"},"CSS3 与新时代的层叠上下文"),Object(l.b)("p",null,"CSS3 新世界的出现除了带来了新属性，还对过去的很多规则发出了挑战，其中对层叠上 下文规则的影响显得特别突出。"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"元素为 flex 布局元素(父元素 display:flex|inline-flex)，同时 z-index 值不是 auto。"),Object(l.b)("li",{parentName:"ul"},"元素的 opacity 值不是 1。"),Object(l.b)("li",{parentName:"ul"},"元素的 transform 值不是 none。"),Object(l.b)("li",{parentName:"ul"},"元素 mix-blend-mode 值不是 normal。"),Object(l.b)("li",{parentName:"ul"},"元素的 filter 值不是 none。"),Object(l.b)("li",{parentName:"ul"},"元素的 isolation 值是 isolate。"),Object(l.b)("li",{parentName:"ul"},"元素的 will-change 属性值为上面 2~6 的任意一个(如 will-change:opacity、will-chang:transform 等)。 (8)元素的-webkit-overflow-scrolling 设为 touch。")),Object(l.b)("h3",{id:"层叠上下文与层叠顺序"},"层叠上下文与层叠顺序"),Object(l.b)("h2",{id:"负-z-index"},"负 z-index"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"很多人(包括我)一开始的时候，以为一个定位元素设置 z-index 负值，就会跑到页面的背 后，隐藏掉，看不到了。结果实际上是有时候确实隐藏了，但有时候又隐藏不掉。为什么会这样?")),Object(l.b)("p",null,"z-index 负值的最终表现并不是单一的，而是与“层叠上下文”和“层叠顺序”密 切相关。前面展示的层叠顺序规则 7 阶图，其中最下面的 2 阶是理解 z-index 负值表现的关\n键，如图所示。"),Object(l.b)(i.a,{width:"250",align:"center",legend:"图: “层叠顺序”最底层 2 阶",src:"https://cosmos-x.oss-cn-hangzhou.aliyuncs.com/page234image27324608.jpg",mdxType:"Img"}),Object(l.b)("p",null,"图中已经很明显地标明了，z-index 负值元素的层级是在层叠上下文元素上面、block 元素的下面。"),Object(l.b)(c.a,{type:"tip",mdxType:"Hint"},"z-index 虽然名为负数层级，但依然无法突破当前层叠上下文所包裹的小世界。"),Object(l.b)(c.a,{type:"tip",mdxType:"Hint"},"z-index 负值渲染过程就是寻找第一个层叠上下文元素的过程，然后层叠顺序止步于这个层叠上下文元素。"),Object(l.b)("p",null,"Demo：",Object(l.b)("a",a({parentName:"p"},{href:"https://demo.cssworld.cn/7/6-1.php"}),"https://demo.cssworld.cn/7/6-1.php")))}m.isMDXComponent=!0},439:function(e,t,n){"use strict";var l=n(0),i=n.n(l),c=n(441),a=n.n(c),r=(n(440),{best:{name:"推荐",color:"#50c610",icon:i.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",className:"custom-hint__icon",style:{color:"#50c610"}},i.a.createElement("g",null,i.a.createElement("path",{d:"M22 11.07V12a10 10 0 1 1-5.93-9.14"}),i.a.createElement("polyline",{points:"23 3 12 14 9 11"})))},must:{name:"强制",color:"#ff4642",icon:i.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"#ff4642",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",stroke:"none",className:"custom-hint__icon"},i.a.createElement("g",null,i.a.createElement("path",{d:"M512 992c-262.4 0-480-217.6-480-480 0-262.4 217.6-480 480-480s480 217.6 480 480C992 774.4 774.4 992 512 992zM512 108.8C288 108.8 108.8 288 108.8 512c0 224 179.2 403.2 403.2 403.2s403.2-179.2 403.2-403.2C915.2 288 736 108.8 512 108.8zM697.6 684.8l-12.8 12.8c-6.4 6.4-19.2 6.4-25.6 0L512 550.4l-140.8 140.8c-6.4 6.4-19.2 6.4-25.6 0l-12.8-12.8c-6.4-6.4-6.4-19.2 0-25.6L473.6 512 326.4 371.2C320 358.4 320 345.6 326.4 339.2l12.8-12.8C345.6 320 358.4 320 371.2 326.4L512 473.6l140.8-140.8c6.4-6.4 19.2-6.4 25.6 0l12.8 12.8c6.4 6.4 6.4 19.2 0 25.6L550.4 512l140.8 140.8C704 665.6 704 678.4 697.6 684.8z"})))},tip:{name:"提示",color:"#3884ff",icon:i.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"none",className:"custom-hint__icon",style:{color:"#3884ff"}},i.a.createElement("g",null,i.a.createElement("path",{d:"M12.2 8.98c.06-.01.12-.03.18-.06.06-.02.12-.05.18-.09l.15-.12c.18-.19.29-.45.29-.71 0-.06-.01-.13-.02-.19a.603.603 0 0 0-.06-.19.757.757 0 0 0-.09-.18c-.03-.05-.08-.1-.12-.15-.28-.27-.72-.37-1.09-.21-.13.05-.23.12-.33.21-.04.05-.09.1-.12.15-.04.06-.07.12-.09.18-.03.06-.05.12-.06.19-.01.06-.02.13-.02.19 0 .26.11.52.29.71.1.09.2.16.33.21.12.05.25.08.38.08.06 0 .13-.01.2-.02M13 16v-4a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0M12 3c-4.962 0-9 4.038-9 9 0 4.963 4.038 9 9 9 4.963 0 9-4.037 9-9 0-4.962-4.037-9-9-9m0 20C5.935 23 1 18.065 1 12S5.935 1 12 1c6.066 0 11 4.935 11 11s-4.934 11-11 11",fillRule:"evenodd"})))},warning:{name:"注意",color:"#fdbe12",icon:i.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",className:"custom-hint__icon",style:{color:"#fdbe12"}},i.a.createElement("g",null,i.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),i.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),i.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16"})))}});t.a=function(e){var t=e.type,n=e.children;return i.a.createElement("div",{className:"custom-hint",style:{borderLeft:"4px solid ".concat(r[t].color)}},i.a.createElement("div",{style:{float:"left"}},r[t].icon),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a()("<strong>".concat(r[t].name,"</strong>：").concat(n))}}))}},440:function(e,t,n){},442:function(e,t,n){"use strict";var l=n(0),i=n.n(l);t.a=function(e){var t=e.align,n=e.width,l=e.src,c=e.legend;return t?i.a.createElement("div",{align:t},i.a.createElement("img",{src:l,width:n}),c&&i.a.createElement("p",null,c)):i.a.createElement("img",{src:l,width:n})}}}]);