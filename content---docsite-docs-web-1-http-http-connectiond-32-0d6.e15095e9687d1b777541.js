(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{136:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return b}));n(0);var r=n(179);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var l={id:"http-connection",title:"TCP 三次握手和四次挥手",sidebar_label:"TCP三次握手和四次挥手"},i=[{value:"三次握手",id:"三次握手",children:[{value:"为什么是三次握手，而不是两次握手？",id:"为什么是三次握手，而不是两次握手？",children:[]}]},{value:"四次挥手",id:"四次挥手",children:[{value:"为什么要等2MSL?",id:"为什么要等2msl",children:[]}]},{value:"总结一下",id:"总结一下",children:[]}],o={rightToc:i},u="wrapper";function b(e){var t=e.components,n=a(e,["components"]);return Object(r.b)(u,c({},o,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"三次握手"},"三次握手"),Object(r.b)("p",null,Object(r.b)("img",c({parentName:"p"},{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/3adqBj.png",alt:null}))),Object(r.b)("p",null,Object(r.b)("a",c({parentName:"p"},{href:"https://www.youtube.com/watch?v=QcapJPYUY58"}),"Youtube: Wireshark 抓包分析实战")),Object(r.b)("p",null,Object(r.b)("a",c({parentName:"p"},{href:"https://juejin.im/post/5c078058f265da611c26c235"}),"作为前端的你了解多少tcp的内容，作者：Guokai")),Object(r.b)("p",null,"三次最合理："),Object(r.b)("p",null,"男（客户端-SYN）：喂喂喂，我是你男票，你听的到吗？"),Object(r.b)("p",null,"女（服务端-SYN, ACK）：在在在，我能听到，我是你女票，你能听到我吗? "),Object(r.b)("p",null,"男（客户端-ACK）：听到了。"),Object(r.b)("p",null,"男：我们明天一起出去玩吧。"),Object(r.b)("h3",{id:"为什么是三次握手，而不是两次握手？"},"为什么是三次握手，而不是两次握手？"),Object(r.b)("p",null,"1、假设是两次握手，客户端将自己的初始序列号发送给服务端，服务端保存了客户端的初始序列号。如果服务端发送自身的初始序列号和同步信号（SYN）给客户端的数据包丢失，此时客户端和服务端无法就双方序列号达成一致。"),Object(r.b)("p",null,"2、当客户端发送给服务端的请求因为某些原因停滞，请求超时重传后，数据传输完毕，此时停滞的请求到达服务端，如果是两次握手，而不是三次握手，此时服务端认为是新的请求，又能与客户端建立链接。"),Object(r.b)("h2",{id:"四次挥手"},"四次挥手"),Object(r.b)("div",{align:"center"},Object(r.b)("img",{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/1IKUuI.png",width:"200",height:"300",align:"left"})),Object(r.b)("p",null,"男（客户端-FIN）：我要挂了哦"),Object(r.b)("p",null,"女（服务端-ACK）：等哈，我还要敷面膜"),Object(r.b)("p",null,"女（服务端-FIN）：我敷完了，现在可以挂了"),Object(r.b)("p",null,"男（客户端-ACK）：我舍不得挂，你挂吧"),Object(r.b)("p",null,"女：好吧，我挂了"),Object(r.b)("p",null,"男：等了2MSL听见嘟嘟嘟的声音后挂断"),Object(r.b)("br",null),Object(r.b)("br",null),Object(r.b)("h3",{id:"为什么要等2msl"},"为什么要等2MSL?"),Object(r.b)("p",null,"主动方发出确认信号2 MSL(报文最大生存时间)后关闭的主要原因是确保确认信号被被动方接受，如果报文丢包就超时重传，这样避免主动方关闭后，被动方无法正常关闭。"),Object(r.b)("h2",{id:"总结一下"},"总结一下"),Object(r.b)("div",{align:"center"},Object(r.b)("img",{src:"https://raw.githubusercontent.com/ThinkBucket/oss/master/tdM3oV.png",width:"360",height:"400"})))}b.isMDXComponent=!0},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p}));var r=n(0),c=n.n(r),a=c.a.createContext({}),l=function(e){var t=c.a.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},i=function(e){var t=l(e.components);return c.a.createElement(a.Provider,{value:t},e.children)};var o="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},b=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["components","mdxType","originalType","parentName"]),b=l(n),p=r,s=b[i+"."+p]||b[p]||u[p]||a;return n?c.a.createElement(s,Object.assign({},{ref:t},o,{components:n})):c.a.createElement(s,Object.assign({},{ref:t},o))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=b;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[o]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=n[p];return c.a.createElement.apply(null,l)}return c.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);